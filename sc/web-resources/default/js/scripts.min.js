(function(){var ai=this,ac=ai._,ae={},ar=Array.prototype,ab=Object.prototype,an=Function.prototype,aw=ar.push,ah=ar.slice,au=ar.concat,ak=ab.toString,aq=ab.hasOwnProperty,ad=ar.forEach,ag=ar.map,ao=ar.reduce,aa=ar.reduceRight,at=ar.filter,ap=ar.every,aj=ar.some,X=ar.indexOf,av=ar.lastIndexOf,Y=Array.isArray,ax=Object.keys,am=an.bind,Z=function(a){return a instanceof Z?a:this instanceof Z?(this._wrapped=a,void 0):new Z(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Z),exports._=Z):ai._=Z,Z.VERSION="1.4.4";var W=Z.each=Z.forEach=function(h,f,g){if(null!=h){if(ad&&h.forEach===ad){h.forEach(f,g)}else{if(h.length===+h.length){for(var c=0,d=h.length;d>c;c++){if(f.call(g,h[c],c,h)===ae){return}}}else{for(var b in h){if(Z.has(h,b)&&f.call(g,h[b],b,h)===ae){return}}}}}};Z.map=Z.collect=function(d,a,b){var c=[];return null==d?c:ag&&d.map===ag?d.map(a,b):(W(d,function(h,f,g){c[c.length]=a.call(b,h,f,g)}),c)};var H="Reduce of empty array with no initial value";Z.reduce=Z.foldl=Z.inject=function(f,b,c,d){var a=arguments.length>2;if(null==f&&(f=[]),ao&&f.reduce===ao){return d&&(b=Z.bind(b,d)),a?f.reduce(b,c):f.reduce(b)}if(W(f,function(j,h,g){a?c=b.call(d,c,j,h,g):(c=j,a=!0)}),!a){throw new TypeError(H)}return c},Z.reduceRight=Z.foldr=function(j,f,g,h){var c=arguments.length>2;if(null==j&&(j=[]),aa&&j.reduceRight===aa){return h&&(f=Z.bind(f,h)),c?j.reduceRight(f,g):j.reduceRight(f)}var d=j.length;if(d!==+d){var b=Z.keys(j);d=b.length}if(W(j,function(k,m,a){m=b?b[--d]:--d,c?g=f.call(h,g,j[m],m,a):(g=j[m],c=!0)}),!c){throw new TypeError(H)}return g},Z.find=Z.detect=function(d,a,b){var c;return Q(d,function(h,f,g){return a.call(b,h,f,g)?(c=h,!0):void 0}),c},Z.filter=Z.select=function(d,a,b){var c=[];return null==d?c:at&&d.filter===at?d.filter(a,b):(W(d,function(h,f,g){a.call(b,h,f,g)&&(c[c.length]=h)}),c)},Z.reject=function(c,a,b){return Z.filter(c,function(g,f,d){return !a.call(b,g,f,d)},b)},Z.every=Z.all=function(d,b,c){b||(b=Z.identity);var a=!0;return null==d?a:ap&&d.every===ap?d.every(b,c):(W(d,function(h,g,f){return(a=a&&b.call(c,h,g,f))?void 0:ae}),!!a)};var Q=Z.some=Z.any=function(d,b,c){b||(b=Z.identity);var a=!1;return null==d?a:aj&&d.some===aj?d.some(b,c):(W(d,function(h,g,f){return a||(a=b.call(c,h,g,f))?ae:void 0}),!!a)};Z.contains=Z.include=function(b,a){return null==b?!1:X&&b.indexOf===X?b.indexOf(a)!=-1:Q(b,function(c){return c===a})},Z.invoke=function(d,a){var b=ah.call(arguments,2),c=Z.isFunction(a);return Z.map(d,function(f){return(c?a:f[a]).apply(f,b)})},Z.pluck=function(b,a){return Z.map(b,function(c){return c[a]})},Z.where=function(c,a,b){return Z.isEmpty(a)?b?null:[]:Z[b?"find":"filter"](c,function(f){for(var d in a){if(a[d]!==f[d]){return !1}}return !0})},Z.findWhere=function(b,a){return Z.where(b,a,!0)},Z.max=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.max.apply(Math,d)}if(!a&&Z.isEmpty(d)){return -1/0}var c={computed:-1/0,value:-1/0};return W(d,function(j,g,h){var f=a?a.call(b,j,g,h):j;f>=c.computed&&(c={value:j,computed:f})}),c.value},Z.min=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.min.apply(Math,d)}if(!a&&Z.isEmpty(d)){return 1/0}var c={computed:1/0,value:1/0};return W(d,function(j,g,h){var f=a?a.call(b,j,g,h):j;c.computed>f&&(c={value:j,computed:f})}),c.value},Z.shuffle=function(d){var a,b=0,c=[];return W(d,function(f){a=Z.random(b++),c[b-1]=c[a],c[a]=f}),c};var al=function(a){return Z.isFunction(a)?a:function(b){return b[a]}};Z.sortBy=function(d,a,b){var c=al(a);return Z.pluck(Z.map(d,function(h,g,f){return{value:h,index:g,criteria:c.call(b,h,g,f)}}).sort(function(j,f){var g=j.criteria,h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(h>g||h===void 0){return -1}}return j.index<f.index?-1:1}),"value")};var P=function(g,c,d,f){var a={},b=al(c||Z.identity);return W(g,function(j,h){var k=b.call(d,j,h,g);f(a,k,j)}),a};Z.groupBy=function(c,a,b){return P(c,a,b,function(g,d,f){(Z.has(g,d)?g[d]:g[d]=[]).push(f)})},Z.countBy=function(c,a,b){return P(c,a,b,function(f,d){Z.has(f,d)||(f[d]=0),f[d]++})},Z.sortedIndex=function(k,f,g,h){g=null==g?Z.identity:al(g);for(var c=g.call(h,f),d=0,b=k.length;b>d;){var j=d+b>>>1;c>g.call(h,k[j])?d=j+1:b=j}return d},Z.toArray=function(a){return a?Z.isArray(a)?ah.call(a):a.length===+a.length?Z.map(a,Z.identity):Z.values(a):[]},Z.size=function(a){return null==a?0:a.length===+a.length?a.length:Z.keys(a).length},Z.first=Z.head=Z.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:ah.call(c,0,a)},Z.initial=function(c,a,b){return ah.call(c,0,c.length-(null==a||b?1:a))},Z.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:ah.call(c,Math.max(c.length-a,0))},Z.rest=Z.tail=Z.drop=function(c,a,b){return ah.call(c,null==a||b?1:a)},Z.compact=function(a){return Z.filter(a,Z.identity)};var G=function(c,a,b){return W(c,function(d){Z.isArray(d)?a?aw.apply(b,d):G(d,a,b):b.push(d)}),b};Z.flatten=function(b,a){return G(b,a,[])},Z.without=function(a){return Z.difference(a,ah.call(arguments,1))},Z.uniq=Z.unique=function(j,f,g,h){Z.isFunction(f)&&(h=g,g=f,f=!1);var c=g?Z.map(j,g,h):j,d=[],b=[];return W(c,function(a,k){(f?k&&b[b.length-1]===a:Z.contains(b,a))||(b.push(a),d.push(j[k]))}),d},Z.union=function(){return Z.uniq(au.apply(ar,arguments))},Z.intersection=function(b){var a=ah.call(arguments,1);return Z.filter(Z.uniq(b),function(c){return Z.every(a,function(d){return Z.indexOf(d,c)>=0})})},Z.difference=function(b){var a=au.apply(ar,ah.call(arguments,1));return Z.filter(b,function(c){return !Z.contains(a,c)})},Z.zip=function(){for(var d=ah.call(arguments),a=Z.max(Z.pluck(d,"length")),b=Array(a),c=0;a>c;c++){b[c]=Z.pluck(d,""+c)}return b},Z.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},Z.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=Z.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}if(X&&f.indexOf===X){return f.indexOf(b,c)}for(;a>d;d++){if(f[d]===b){return d}}return -1},Z.lastIndexOf=function(f,b,c){if(null==f){return -1}var d=null!=c;if(av&&f.lastIndexOf===av){return d?f.lastIndexOf(b,c):f.lastIndexOf(b)}for(var a=d?c:f.length;a--;){if(f[a]===b){return a}}return -1},Z.range=function(g,c,d){1>=arguments.length&&(c=g||0,g=0),d=arguments[2]||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=0,b=Array(f);f>a;){b[a++]=g,g+=d}return b},Z.bind=function(c,a){if(c.bind===am&&am){return am.apply(c,ah.call(arguments,1))}var b=ah.call(arguments,2);return function(){return c.apply(a,b.concat(ah.call(arguments)))}},Z.partial=function(b){var a=ah.call(arguments,1);return function(){return b.apply(this,a.concat(ah.call(arguments)))}},Z.bindAll=function(b){var a=ah.call(arguments,1);return 0===a.length&&(a=Z.functions(b)),W(a,function(c){b[c]=Z.bind(b[c],b)}),b},Z.memoize=function(c,a){var b={};return a||(a=Z.identity),function(){var d=a.apply(this,arguments);return Z.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}},Z.delay=function(c,a){var b=ah.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},Z.defer=function(a){return Z.delay.apply(Z,[a,1].concat(ah.call(arguments,1)))},Z.throttle=function(k,f){var g,h,c,d,b=0,j=function(){b=new Date,c=null,d=k.apply(g,h)};return function(){var m=new Date,a=f-(m-b);return g=this,h=arguments,0>=a?(clearTimeout(c),c=null,b=m,d=k.apply(g,h)):c||(c=setTimeout(j,a)),d}},Z.debounce=function(f,b,c){var d,a;return function(){var h=this,g=arguments,j=function(){d=null,c||(a=f.apply(h,g))},k=c&&!d;return clearTimeout(d),d=setTimeout(j,b),k&&(a=f.apply(h,g)),a}},Z.once=function(c){var a,b=!1;return function(){return b?a:(b=!0,a=c.apply(this,arguments),c=null,a)}},Z.wrap=function(b,a){return function(){var c=[b];return aw.apply(c,arguments),a.apply(this,c)}},Z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},Z.after=function(b,a){return 0>=b?a():function(){return 1>--b?a.apply(this,arguments):void 0}},Z.keys=ax||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){Z.has(c,b)&&(a[a.length]=b)}return a},Z.values=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push(c[b])}return a},Z.pairs=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push([b,c[b]])}return a},Z.invert=function(c){var a={};for(var b in c){Z.has(c,b)&&(a[c[b]]=b)}return a},Z.functions=Z.methods=function(c){var a=[];for(var b in c){Z.isFunction(c[b])&&a.push(b)}return a.sort()},Z.extend=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},Z.pick=function(c){var a={},b=au.apply(ar,ah.call(arguments,1));return W(b,function(d){d in c&&(a[d]=c[d])}),a},Z.omit=function(d){var b={},c=au.apply(ar,ah.call(arguments,1));for(var a in d){Z.contains(c,a)||(b[a]=d[a])}return b},Z.defaults=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){null==a[c]&&(a[c]=b[c])}}}),a},Z.clone=function(a){return Z.isObject(a)?Z.isArray(a)?a.slice():Z.extend({},a):a},Z.tap=function(b,a){return a(b),b};var L=function(g,q,b,k){if(g===q){return 0!==g||1/g==1/q}if(null==g||null==q){return g===q}g instanceof Z&&(g=g._wrapped),q instanceof Z&&(q=q._wrapped);var p=ak.call(g);if(p!=ak.call(q)){return !1}switch(p){case"[object String]":return g==q+"";case"[object Number]":return g!=+g?q!=+q:0==g?1/g==1/q:g==+q;case"[object Date]":case"[object Boolean]":return +g==+q;case"[object RegExp]":return g.source==q.source&&g.global==q.global&&g.multiline==q.multiline&&g.ignoreCase==q.ignoreCase}if("object"!=typeof g||"object"!=typeof q){return !1}for(var h=b.length;h--;){if(b[h]==g){return k[h]==q}}b.push(g),k.push(q);var m=0,d=!0;if("[object Array]"==p){if(m=g.length,d=m==q.length){for(;m--&&(d=L(g[m],q[m],b,k));){}}}else{var l=g.constructor,j=q.constructor;if(l!==j&&!(Z.isFunction(l)&&l instanceof l&&Z.isFunction(j)&&j instanceof j)){return !1}for(var v in g){if(Z.has(g,v)&&(m++,!(d=Z.has(q,v)&&L(g[v],q[v],b,k)))){break}}if(d){for(v in q){if(Z.has(q,v)&&!m--){break}}d=!m}}return b.pop(),k.pop(),d};Z.isEqual=function(b,a){return L(b,a,[],[])},Z.isEmpty=function(b){if(null==b){return !0}if(Z.isArray(b)||Z.isString(b)){return 0===b.length}for(var a in b){if(Z.has(b,a)){return !1}}return !0},Z.isElement=function(a){return !(!a||1!==a.nodeType)},Z.isArray=Y||function(a){return"[object Array]"==ak.call(a)},Z.isObject=function(a){return a===Object(a)},W(["Arguments","Function","String","Number","Date","RegExp"],function(a){Z["is"+a]=function(b){return ak.call(b)=="[object "+a+"]"}}),Z.isArguments(arguments)||(Z.isArguments=function(a){return !(!a||!Z.has(a,"callee"))}),"function"!=typeof/./&&(Z.isFunction=function(a){return"function"==typeof a}),Z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},Z.isNaN=function(a){return Z.isNumber(a)&&a!=+a},Z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==ak.call(a)},Z.isNull=function(a){return null===a},Z.isUndefined=function(a){return a===void 0},Z.has=function(b,a){return aq.call(b,a)},Z.noConflict=function(){return ai._=ac,this},Z.identity=function(a){return a},Z.times=function(f,b,c){for(var d=Array(f),a=0;f>a;a++){d[a]=b.call(c,a)}return d},Z.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))};var K={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};K.unescape=Z.invert(K.escape);var C={escape:RegExp("["+Z.keys(K.escape).join("")+"]","g"),unescape:RegExp("("+Z.keys(K.unescape).join("|")+")","g")};Z.each(["escape","unescape"],function(a){Z[a]=function(b){return null==b?"":(""+b).replace(C[a],function(c){return K[a][c]})}}),Z.result=function(c,a){if(null==c){return null}var b=c[a];return Z.isFunction(b)?b.call(c):b},Z.mixin=function(a){W(Z.functions(a),function(b){var c=Z[b]=a[b];Z.prototype[b]=function(){var d=[this._wrapped];return aw.apply(d,arguments),U.call(this,c.apply(Z,d))}})};var J=0;Z.uniqueId=function(b){var a=++J+"";return b?b+a:a},Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,af={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;Z.template=function(f,m,b){var h;b=Z.defaults({},b,Z.templateSettings);var l=RegExp([(b.escape||z).source,(b.interpolate||z).source,(b.evaluate||z).source].join("|")+"|$","g"),g=0,k="__p+='";f.replace(l,function(c,n,p,a,q){return k+=f.slice(g,q).replace(V,function(o){return"\\"+af[o]}),n&&(k+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),p&&(k+="'+\n((__t=("+p+"))==null?'':__t)+\n'"),a&&(k+="';\n"+a+"\n__p+='"),g=q+c.length,c}),k+="';\n",b.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=Function(b.variable||"obj","_",k)}catch(d){throw d.source=k,d}if(m){return h(m,Z)}var j=function(a){return h.call(this,a,Z)};return j.source="function("+(b.variable||"obj")+"){\n"+k+"}",j},Z.chain=function(a){return Z(a).chain()};var U=function(a){return this._chain?Z(a).chain():a};Z.mixin(Z),W(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=ar[b];Z.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],U.call(this,c)}}),W(["concat","join","slice"],function(b){var a=ar[b];Z.prototype[b]=function(){return U.call(this,a.apply(this._wrapped,arguments))}}),Z.extend(Z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var ac=this;var aq=ac.Backbone;var am=[];var ae=am.push;var ad=am.slice;var ah=am.splice;var av;if(typeof exports!=="undefined"){av=exports}else{av=ac.Backbone={}}av.VERSION="1.0.0";var an=ac._;if(!an&&typeof require!=="undefined"){an=require("underscore")}av.$=ac.jQuery||ac.Zepto||ac.ender||ac.$;av.noConflict=function(){ac.Backbone=aq;return this};av.emulateHTTP=false;av.emulateJSON=false;var ag=av.Events={on:function(b,d,a){if(!aj(this,"on",b,[d,a])||!d){return this}this._events||(this._events={});var c=this._events[b]||(this._events[b]=[]);c.push({callback:d,context:a,ctx:a||this});return this},once:function(b,f,a){if(!aj(this,"once",b,[f,a])||!f){return this}var d=this;var c=an.once(function(){d.off(b,c);f.apply(this,arguments)});c._callback=f;return this.on(b,c,a)},off:function(v,k,h){var b,w,g,m,d,p,l,j;if(!this._events||!aj(this,"off",v,[k,h])){return this}if(!v&&!k&&!h){this._events={};return this}m=v?[v]:an.keys(this._events);for(d=0,p=m.length;d<p;d++){v=m[d];if(g=this._events[v]){this._events[v]=b=[];if(k||h){for(l=0,j=g.length;l<j;l++){w=g[l];if(k&&k!==w.callback&&k!==w.callback._callback||h&&h!==w.context){b.push(w)}}}if(!b.length){delete this._events[v]}}}return this},trigger:function(b){if(!this._events){return this}var d=ad.call(arguments,1);if(!aj(this,"trigger",b,d)){return this}var a=this._events[b];var c=this._events.all;if(a){at(a,d)}if(c){at(c,arguments)}return this},stopListening:function(b,f,a){var d=this._listeners;if(!d){return this}var c=!f&&!a;if(typeof f==="object"){a=this}if(b){(d={})[b._listenerId]=b}for(var g in d){d[g].off(f,a,this);if(c){delete this._listeners[g]}}return this}};var ab=/\s+/;var aj=function(d,k,c,j){if(!c){return true}if(typeof c==="object"){for(var g in c){d[k].apply(d,[g,c[g]].concat(j))}return false}if(ab.test(c)){var l=c.split(ab);for(var b=0,f=l.length;b<f;b++){d[k].apply(d,[l[b]].concat(j))}return false}return true};var at=function(d,k){var c,j=-1,g=d.length,l=k[0],b=k[1],f=k[2];switch(k.length){case 0:while(++j<g){(c=d[j]).callback.call(c.ctx)}return;case 1:while(++j<g){(c=d[j]).callback.call(c.ctx,l)}return;case 2:while(++j<g){(c=d[j]).callback.call(c.ctx,l,b)}return;case 3:while(++j<g){(c=d[j]).callback.call(c.ctx,l,b,f)}return;default:while(++j<g){(c=d[j]).callback.apply(c.ctx,k)}}};var ap={listenTo:"on",listenToOnce:"once"};an.each(ap,function(a,b){ag[b]=function(g,c,f){var d=this._listeners||(this._listeners={});var h=g._listenerId||(g._listenerId=an.uniqueId("l"));d[h]=g;if(typeof c==="object"){f=this}g[a](c,f,this);return this}});ag.bind=ag.on;ag.unbind=ag.off;an.extend(av,ag);var ar=av.Model=function(b,d){var a;var c=b||{};d||(d={});this.cid=an.uniqueId("c");this.attributes={};an.extend(this,an.pick(d,af));if(d.parse){c=this.parse(c,d)||{}}if(a=an.result(this,"defaults")){c=an.defaults({},c,a)}this.set(c,d);this.changed={};this.initialize.apply(this,arguments)};var af=["url","urlRoot","collection"];an.extend(ar.prototype,ag,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return an.clone(this.attributes)},sync:function(){return av.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return an.escape(this.get(a))},has:function(a){return this.get(a)!=null},set:function(A,p,k){var b,C,h,x,g,y,j,w;if(A==null){return this}if(typeof A==="object"){C=A;k=p}else{(C={})[A]=p}k||(k={});if(!this._validate(C,k)){return false}h=k.unset;g=k.silent;x=[];y=this._changing;this._changing=true;if(!y){this._previousAttributes=an.clone(this.attributes);this.changed={}}w=this.attributes,j=this._previousAttributes;if(this.idAttribute in C){this.id=C[this.idAttribute]}for(b in C){p=C[b];if(!an.isEqual(w[b],p)){x.push(b)}if(!an.isEqual(j[b],p)){this.changed[b]=p}else{delete this.changed[b]}h?delete w[b]:w[b]=p}if(!g){if(x.length){this._pending=true}for(var m=0,v=x.length;m<v;m++){this.trigger("change:"+x[m],this,w[x[m]],k)}}if(y){return this}if(!g){while(this._pending){this._pending=false;this.trigger("change",this,k)}}this._pending=false;this._changing=false;return this},unset:function(a,b){return this.set(a,void 0,an.extend({},b,{unset:true}))},clear:function(b){var c={};for(var a in this.attributes){c[a]=void 0}return this.set(c,an.extend({},b,{unset:true}))},hasChanged:function(a){if(a==null){return !an.isEmpty(this.changed)}return an.has(this.changed,a)},changedAttributes:function(b){if(!b){return this.hasChanged()?an.clone(this.changed):false}var f,a=false;var d=this._changing?this._previousAttributes:this.attributes;for(var c in b){if(an.isEqual(d[c],f=b[c])){continue}(a||(a={}))[c]=f}return a},previous:function(a){if(a==null||!this._previousAttributes){return null}return this._previousAttributes[a]},previousAttributes:function(){return an.clone(this._previousAttributes)},fetch:function(b){b=b?an.clone(b):{};if(b.parse===void 0){b.parse=true}var c=this;var a=b.success;b.success=function(d){if(!c.set(c.parse(d,b),b)){return false}if(a){a(c,d,b)}c.trigger("sync",c,d,b)};D(this,b);return this.sync("read",this,b)},save:function(k,g,f){var b,l,d,h=this.attributes;if(k==null||typeof k==="object"){b=k;f=g}else{(b={})[k]=g}if(b&&(!f||!f.wait)&&!this.set(b,f)){return false}f=an.extend({validate:true},f);if(!this._validate(b,f)){return false}if(b&&f.wait){this.attributes=an.extend({},h,b)}if(f.parse===void 0){f.parse=true}var c=this;var j=f.success;f.success=function(a){c.attributes=h;var m=c.parse(a,f);if(f.wait){m=an.extend(b||{},m)}if(an.isObject(m)&&!c.set(m,f)){return false}if(j){j(c,a,f)}c.trigger("sync",c,a,f)};D(this,f);l=this.isNew()?"create":f.patch?"patch":"update";if(l==="patch"){f.attrs=b}d=this.sync(l,this,f);if(b&&f.wait){this.attributes=h}return d},destroy:function(b){b=b?an.clone(b):{};var f=this;var a=b.success;var d=function(){f.trigger("destroy",f,f.collection,b)};b.success=function(g){if(b.wait||f.isNew()){d()}if(a){a(f,g,b)}if(!f.isNew()){f.trigger("sync",f,g,b)}};if(this.isNew()){b.success();return false}D(this,b);var c=this.sync("delete",this,b);if(!b.wait){d()}return c},url:function(){var a=an.result(this,"urlRoot")||an.result(this.collection,"url")||q();if(this.isNew()){return a}return a+(a.charAt(a.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(a){return this._validate({},an.extend(a||{},{validate:true}))},_validate:function(b,c){if(!c.validate||!this.validate){return true}b=an.extend({},this.attributes,b);var a=this.validationError=this.validate(b,c)||null;if(!a){return true}this.trigger("invalid",this,a,an.extend(c||{},{validationError:a}));return false}});var aa=["keys","values","pairs","invert","pick","omit"];an.each(aa,function(a){ar.prototype[a]=function(){var b=ad.call(arguments);b.unshift(this.attributes);return an[a].apply(an,b)}});var ao=av.Collection=function(a,b){b||(b={});if(b.url){this.url=b.url}if(b.model){this.model=b.model}if(b.comparator!==void 0){this.comparator=b.comparator}this._reset();this.initialize.apply(this,arguments);if(a){this.reset(a,an.extend({silent:true},b))}};var ai={add:true,remove:true,merge:true};var X={add:true,merge:false,remove:false};an.extend(ao.prototype,ag,{model:ar,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return av.sync.apply(this,arguments)},add:function(a,b){return this.set(a,an.defaults(b||{},X))},remove:function(b,f){b=an.isArray(b)?b.slice():[b];f||(f={});var a,d,c,g;for(a=0,d=b.length;a<d;a++){g=this.get(b[a]);if(!g){continue}delete this._byId[g.id];delete this._byId[g.cid];c=this.indexOf(g);this.models.splice(c,1);this.length--;if(!f.silent){f.index=c;g.trigger("remove",g,this,f)}this._removeReference(g)}return this},set:function(E,r){r=an.defaults(r||{},ai);if(r.parse){E=this.parse(E,r)}if(!an.isArray(E)){E=E?[E]:[]}var k,H,y,h,C,j;var x=r.at;var n=this.comparator&&x==null&&r.sort!==false;var w=an.isString(this.comparator)?this.comparator:null;var b=[],A=[],m={};for(k=0,H=E.length;k<H;k++){if(!(y=this._prepareModel(E[k],r))){continue}if(C=this.get(y)){if(r.remove){m[C.cid]=true}if(r.merge){C.set(y.attributes,r);if(n&&!j&&C.hasChanged(w)){j=true}}}else{if(r.add){b.push(y);y.on("all",this._onModelEvent,this);this._byId[y.cid]=y;if(y.id!=null){this._byId[y.id]=y}}}}if(r.remove){for(k=0,H=this.length;k<H;++k){if(!m[(y=this.models[k]).cid]){A.push(y)}}if(A.length){this.remove(A,r)}}if(b.length){if(n){j=true}this.length+=b.length;if(x!=null){ah.apply(this.models,[x,0].concat(b))}else{ae.apply(this.models,b)}}if(j){this.sort({silent:true})}if(r.silent){return this}for(k=0,H=b.length;k<H;k++){(y=b[k]).trigger("add",y,this,r)}if(j){this.trigger("sort",this,r)}return this},reset:function(b,d){d||(d={});for(var a=0,c=this.models.length;a<c;a++){this._removeReference(this.models[a])}d.previousModels=this.models;this._reset();this.add(b,an.extend({silent:true},d));if(!d.silent){this.trigger("reset",this,d)}return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,an.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,an.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){if(a==null){return void 0}return this._byId[a.id!=null?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){if(an.isEmpty(a)){return b?void 0:[]}return this[b?"find":"filter"](function(d){for(var c in a){if(a[c]!==d.get(c)){return false}}return true})},findWhere:function(a){return this.where(a,true)},sort:function(a){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}a||(a={});if(an.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(an.bind(this.comparator,this))}if(!a.silent){this.trigger("sort",this,a)}return this},sortedIndex:function(b,d,a){d||(d=this.comparator);var c=an.isFunction(d)?d:function(f){return f.get(d)};return an.sortedIndex(this.models,b,c,a)},pluck:function(a){return an.invoke(this.models,"get",a)},fetch:function(b){b=b?an.clone(b):{};if(b.parse===void 0){b.parse=true}var c=b.success;var a=this;b.success=function(f){var d=b.reset?"reset":"set";a[d](f,b);if(c){c(a,f,b)}a.trigger("sync",a,f,b)};D(this,b);return this.sync("read",this,b)},create:function(b,d){d=d?an.clone(d):{};if(!(b=this._prepareModel(b,d))){return false}if(!d.wait){this.add(b,d)}var a=this;var c=d.success;d.success=function(f){if(d.wait){a.add(b,d)}if(c){c(b,f,d)}};b.save(null,d);return b},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,c){if(b instanceof ar){if(!b.collection){b.collection=this}return b}c||(c={});c.collection=this;var a=new this.model(b,c);if(!a._validate(b,c)){this.trigger("invalid",this,b,c);return false}return a},_removeReference:function(a){if(this===a.collection){delete a.collection}a.off("all",this._onModelEvent,this)},_onModelEvent:function(b,d,a,c){if((b==="add"||b==="remove")&&a!==this){return}if(b==="destroy"){this.remove(d,c)}if(d&&b==="change:"+d.idAttribute){delete this._byId[d.previous(d.idAttribute)];if(d.id!=null){this._byId[d.id]=d}}this.trigger.apply(this,arguments)}});var aw=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];an.each(aw,function(a){ao.prototype[a]=function(){var b=ad.call(arguments);b.unshift(this.models);return an[a].apply(an,b)}});var Z=["groupBy","countBy","sortBy"];an.each(Z,function(a){ao.prototype[a]=function(d,b){var c=an.isFunction(d)?d:function(f){return f.get(d)};return an[a](this.models,c,b)}});var au=av.View=function(a){this.cid=an.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var Y=/^(\S+)\s*(.*)$/;var M=["model","collection","el","id","attributes","className","tagName","events"];an.extend(au.prototype,ag,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){if(this.$el){this.undelegateEvents()}this.$el=a instanceof av.$?a:av.$(a);this.el=this.$el[0];if(b!==false){this.delegateEvents()}return this},delegateEvents:function(b){if(!(b||(b=an.result(this,"events")))){return this}this.undelegateEvents();for(var f in b){var a=b[f];if(!an.isFunction(a)){a=this[b[f]]}if(!a){continue}var d=f.match(Y);var c=d[1],g=d[2];a=an.bind(a,this);c+=".delegateEvents"+this.cid;if(g===""){this.$el.on(c,a)}else{this.$el.on(c,g,a)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){if(this.options){a=an.extend({},an.result(this,"options"),a)}an.extend(this,an.pick(a,M));this.options=a},_ensureElement:function(){if(!this.el){var a=an.extend({},an.result(this,"attributes"));if(this.id){a.id=an.result(this,"id")}if(this.className){a["class"]=an.result(this,"className")}var b=av.$("<"+an.result(this,"tagName")+">").attr(a);this.setElement(b,false)}else{this.setElement(an.result(this,"el"),false)}}});av.sync=function(b,f,a){var d=ak[b];an.defaults(a||(a={}),{emulateHTTP:av.emulateHTTP,emulateJSON:av.emulateJSON});var c={type:d,dataType:"json"};if(!a.url){c.url=an.result(f,"url")||q()}if(a.data==null&&f&&(b==="create"||b==="update"||b==="patch")){c.contentType="application/json";c.data=JSON.stringify(a.attrs||f.toJSON(a))}if(a.emulateJSON){c.contentType="application/x-www-form-urlencoded";c.data=c.data?{model:c.data}:{}}if(a.emulateHTTP&&(d==="PUT"||d==="DELETE"||d==="PATCH")){c.type="POST";if(a.emulateJSON){c.data._method=d}var h=a.beforeSend;a.beforeSend=function(j){j.setRequestHeader("X-HTTP-Method-Override",d);if(h){return h.apply(this,arguments)}}}if(c.type!=="GET"&&!a.emulateJSON){c.processData=false}if(c.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){c.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var g=a.xhr=av.ajax(an.extend(c,a));f.trigger("request",f,g,a);return g};var ak={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};av.ajax=function(){return av.$.ajax.apply(av.$,arguments)};var B=av.Router=function(a){a||(a={});if(a.routes){this.routes=a.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var W=/\((.*?)\)/g;var z=/(\(\?)?:\w+/g;var L=/\*\w+/g;var V=/[\-{}\[\]+?.,\\\^$|#\s]/g;an.extend(B.prototype,ag,{initialize:function(){},route:function(b,d,a){if(!an.isRegExp(b)){b=this._routeToRegExp(b)}if(an.isFunction(d)){a=d;d=""}if(!a){a=this[d]}var c=this;av.history.route(b,function(f){var g=c._extractParameters(b,f);a&&a.apply(c,g);c.trigger.apply(c,["route:"+d].concat(g));c.trigger("route",d,g);av.history.trigger("route",c,d,g)});return this},navigate:function(a,b){av.history.navigate(a,b);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=an.result(this,"routes");var a,b=an.keys(this.routes);while((a=b.pop())!=null){this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(V,"\\$&").replace(W,"(?:$1)?").replace(z,function(b,c){return c?b:"([^/]+)"}).replace(L,"(.*?)");return new RegExp("^"+a+"$")},_extractParameters:function(b,c){var a=b.exec(c).slice(1);return an.map(a,function(d){return d?decodeURIComponent(d):null})}});var K=av.History=function(){this.handlers=[];an.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var J=/^[#\/]|\s+$/g;var F=/^\/+|\/+$/g;var G=/msie [\w.]+/;var Q=/\/$/;K.started=false;an.extend(K.prototype,ag,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(b,c){if(b==null){if(this._hasPushState||!this._wantsHashChange||c){b=this.location.pathname;var a=this.root.replace(Q,"");if(!b.indexOf(a)){b=b.substr(a.length)}}else{b=this.getHash()}}return b.replace(J,"")},start:function(b){if(K.started){throw new Error("Backbone.history has already been started")}K.started=true;this.options=an.extend({},{root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var f=this.getFragment();var a=document.documentMode;var d=G.exec(navigator.userAgent.toLowerCase())&&(!a||a<=7);this.root=("/"+this.root+"/").replace(F,"/");if(d&&this._wantsHashChange){this.iframe=av.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(f)}if(this._hasPushState){av.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&"onhashchange" in window&&!d){av.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=f;var c=this.location;var g=c.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&g&&c.hash){this.fragment=this.getHash().replace(J,"");this.history.replaceState({},document.title,this.root+this.fragment+c.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){av.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);K.started=false},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe){b=this.getFragment(this.getHash(this.iframe))}if(b===this.fragment){return false}if(this.iframe){this.navigate(b)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(b){var c=this.fragment=this.getFragment(b);var a=an.any(this.handlers,function(d){if(d.route.test(c)){d.callback(c);return true}});return a},navigate:function(b,c){if(!K.started){return false}if(!c||c===true){c={trigger:c}}b=this.getFragment(b||"");if(this.fragment===b){return}this.fragment=b;var a=this.root+b;if(this._hasPushState){this.history[c.replace?"replaceState":"pushState"]({},document.title,a)}else{if(this._wantsHashChange){this._updateHash(this.location,b,c.replace);if(this.iframe&&b!==this.getFragment(this.getHash(this.iframe))){if(!c.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,b,c.replace)}}else{return this.location.assign(a)}}if(c.trigger){this.loadUrl(b)}},_updateHash:function(b,d,a){if(a){var c=b.href.replace(/(javascript:|#).*$/,"");b.replace(c+"#"+d)}else{b.hash="#"+d}}});av.history=new K;var al=function(b,f){var a=this;var d;if(b&&an.has(b,"constructor")){d=b.constructor}else{d=function(){return a.apply(this,arguments)}}an.extend(d,a,f);var c=function(){this.constructor=d};c.prototype=a.prototype;d.prototype=new c;if(b){an.extend(d.prototype,b)}d.__super__=a.prototype;return d};ar.extend=ao.extend=B.extend=au.extend=K.extend=al;var q=function(){throw new Error('A "url" property or function must be specified')};var D=function(b,c){var a=c.error;c.error=function(d){if(a){a(b,d,c)}b.trigger("error",b,d,c)}}}).call(this);
/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var b=function(){var d=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in c){if(d.style[f]!==undefined){return c[f]}}}();return b&&{end:b}}()})}(window.jQuery),!function(c){var a='[data-dismiss="alert"]',d=function(f){c(f).on("click",a,this.close)};d.prototype.close=function(g){function h(){f.trigger("closed").remove()}var k=c(this),j=k.attr("data-target"),f;j||(j=k.attr("href"),j=j&&j.replace(/.*(?=#[^\s]*$)/,"")),f=c(j),g&&g.preventDefault(),f.length||(f=k.hasClass("alert")?k:k.parent()),f.trigger(g=c.Event("close"));if(g.isDefaultPrevented()){return}f.removeClass("in"),c.support.transition&&f.hasClass("fade")?f.on(c.support.transition.end,h):h()};var b=c.fn.alert;c.fn.alert=function(f){return this.each(function(){var h=c(this),g=h.data("alert");g||h.data("alert",g=new d(this)),typeof f=="string"&&g[f].call(h)})},c.fn.alert.Constructor=d,c.fn.alert.noConflict=function(){return c.fn.alert=b,this},c(document).on("click.alert.data-api",a,d.prototype.close)}(window.jQuery),!function(b){var a=function(d,f){this.$element=b(d),this.options=b.extend({},b.fn.button.defaults,f)};a.prototype.setState=function(h){var f="disabled",j=this.$element,g=j.data(),d=j.is("input")?"val":"html";h+="Text",g.resetText||j.data("resetText",j[d]()),j[d](g[h]||this.options[h]),setTimeout(function(){h=="loadingText"?j.addClass(f).attr(f,f):j.removeClass(f).removeAttr(f)},0)},a.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=b.fn.button;b.fn.button=function(d){return this.each(function(){var h=b(this),f=h.data("button"),g=typeof d=="object"&&d;f||h.data("button",f=new a(this,g)),d=="toggle"?f.toggle():d&&f.setState(d)})},b.fn.button.defaults={loadingText:"loading..."},b.fn.button.Constructor=a,b.fn.button.noConflict=function(){return b.fn.button=c,this},b(document).on("click.button.data-api","[data-toggle^=button]",function(d){var f=b(d.target);f.hasClass("btn")||(f=f.closest(".btn")),f.button("toggle")})}(window.jQuery),!function(b){var a=function(d,f){this.$element=b(d),this.$indicators=this.$element.find(".carousel-indicators"),this.options=f,this.options.pause=="hover"&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this))};a.prototype={cycle:function(d){return d||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(d){var g=this.getActiveIndex(),f=this;if(d>this.$items.length-1||d<0){return}return this.sliding?this.$element.one("slid",function(){f.to(d)}):g==d?this.pause().cycle():this.slide(d>g?"next":"prev",b(this.$items[d]))},pause:function(d){return d||(this.paused=!0),this.$element.find(".next, .prev").length&&b.support.transition.end&&(this.$element.trigger(b.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(p,h){var d=this.$element.find(".item.active"),j=h||d[p](),q=this.interval,g=p=="next"?"left":"right",m=p=="next"?"first":"last",l=this,k;this.sliding=!0,q&&this.pause(),j=j.length?j:this.$element.find(".item")[m](),k=b.Event("slide",{relatedTarget:j[0],direction:g});if(j.hasClass("active")){return}this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var f=b(l.$indicators.children()[l.getActiveIndex()]);f&&f.addClass("active")}));if(b.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(k);if(k.isDefaultPrevented()){return}j.addClass(p),j[0].offsetWidth,d.addClass(g),j.addClass(g),this.$element.one(b.support.transition.end,function(){j.removeClass([p,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})}else{this.$element.trigger(k);if(k.isDefaultPrevented()){return}d.removeClass("active"),j.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return q&&this.cycle(),this}};var c=b.fn.carousel;b.fn.carousel=function(d){return this.each(function(){var h=b(this),f=h.data("carousel"),g=b.extend({},b.fn.carousel.defaults,typeof d=="object"&&d),j=typeof d=="string"?d:g.slide;f||h.data("carousel",f=new a(this,g)),typeof d=="number"?f.to(d):j?f[j]():g.interval&&f.pause().cycle()})},b.fn.carousel.defaults={interval:5000,pause:"hover"},b.fn.carousel.Constructor=a,b.fn.carousel.noConflict=function(){return b.fn.carousel=c,this},b(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(f){var k=b(this),h,d=b(k.attr("data-target")||(h=k.attr("href"))&&h.replace(/.*(?=#[^\s]+$)/,"")),g=b.extend({},d.data(),k.data()),j;d.carousel(g),(j=k.attr("data-slide-to"))&&d.data("carousel").pause().to(j).cycle(),f.preventDefault()})}(window.jQuery),!function(b){var a=function(d,f){this.$element=b(d),this.options=b.extend({},b.fn.collapse.defaults,f),this.options.parent&&(this.$parent=b(this.options.parent)),this.options.toggle&&this.toggle()};a.prototype={constructor:a,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var f,h,g,d;if(this.transitioning||this.$element.hasClass("in")){return}f=this.dimension(),h=b.camelCase(["scroll",f].join("-")),g=this.$parent&&this.$parent.find("> .accordion-group > .in");if(g&&g.length){d=g.data("collapse");if(d&&d.transitioning){return}g.collapse("hide"),d||g.data("collapse",null)}this.$element[f](0),this.transition("addClass",b.Event("show"),"shown"),b.support.transition&&this.$element[f](this.$element[0][h])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension(),this.reset(this.$element[d]()),this.transition("removeClass",b.Event("hide"),"hidden"),this.$element[d](0)},reset:function(f){var d=this.dimension();return this.$element.removeClass("collapse")[d](f||"auto")[0].offsetWidth,this.$element[f!==null?"addClass":"removeClass"]("collapse"),this},transition:function(f,j,h){var d=this,g=function(){j.type=="show"&&d.reset(),d.transitioning=0,d.$element.trigger(h)};this.$element.trigger(j);if(j.isDefaultPrevented()){return}this.transitioning=1,this.$element[f]("in"),b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,g):g()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var h=b(this),f=h.data("collapse"),g=b.extend({},b.fn.collapse.defaults,h.data(),typeof d=="object"&&d);f||h.data("collapse",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.collapse.defaults={toggle:!0},b.fn.collapse.Constructor=a,b.fn.collapse.noConflict=function(){return b.fn.collapse=c,this},b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(f){var j=b(this),h,d=j.attr("data-target")||f.preventDefault()||(h=j.attr("href"))&&h.replace(/.*(?=#[^\s]+$)/,""),g=b(d).data("collapse")?"toggle":j.data();j[b(d).hasClass("in")?"addClass":"removeClass"]("collapsed"),b(d).collapse(g)})}(window.jQuery),!function(f){function d(){f(a).each(function(){b(f(this)).removeClass("open")})}function b(h){var k=h.attr("data-target"),j;k||(k=h.attr("href"),k=k&&/#/.test(k)&&k.replace(/.*(?=#[^\s]*$)/,"")),j=k&&f(k);if(!j||!j.length){j=h.parent()}return j}var a="[data-toggle=dropdown]",g=function(h){var j=f(h).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){j.parent().removeClass("open")})};g.prototype={constructor:g,toggle:function(h){var l=f(this),j,k;if(l.is(".disabled, :disabled")){return}return j=b(l),k=j.hasClass("open"),d(),k||j.toggleClass("open"),l.focus(),!1},keydown:function(q){var l,k,p,j,h,m;if(!/(38|40|27)/.test(q.keyCode)){return}l=f(this),q.preventDefault(),q.stopPropagation();if(l.is(".disabled, :disabled")){return}j=b(l),h=j.hasClass("open");if(!h||h&&q.keyCode==27){return q.which==27&&j.find(a).focus(),l.click()}k=f("[role=menu] li:not(.divider):visible a",j);if(!k.length){return}m=k.index(k.filter(":focus")),q.keyCode==38&&m>0&&m--,q.keyCode==40&&m<k.length-1&&m++,~m||(m=0),k.eq(m).focus()}};var c=f.fn.dropdown;f.fn.dropdown=function(h){return this.each(function(){var k=f(this),j=k.data("dropdown");j||k.data("dropdown",j=new g(this)),typeof h=="string"&&j[h].call(k)})},f.fn.dropdown.Constructor=g,f.fn.dropdown.noConflict=function(){return f.fn.dropdown=c,this},f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(h){h.stopPropagation()}).on(".dropdown-menu",function(h){h.stopPropagation()}).on("click.dropdown.data-api",a,g.prototype.toggle).on("keydown.dropdown.data-api",a+", [role=menu]",g.prototype.keydown)}(window.jQuery),!function(b){var a=function(d,f){this.options=f,this.$element=b(d).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};a.prototype={constructor:a,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var d=this,f=b.Event("show");this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=!0,this.escape(),this.backdrop(function(){var g=b.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(document.body),d.$element.show(),g&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus(),g?d.$element.one(b.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(d){d&&d.preventDefault();var f=this;d=b.Event("hide"),this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=!1,this.escape(),b(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;b(document).on("focusin.modal",function(f){d.$element[0]!==f.target&&!d.$element.has(f.target).length&&d.$element.focus()})},escape:function(){var d=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(f){f.which==27&&d.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var d=this,f=setTimeout(function(){d.$element.off(b.support.transition.end),d.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(f),d.hideModal()})},hideModal:function(){var d=this;this.$element.hide(),this.backdrop(function(){d.removeBackdrop(),d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(f){var h=this,g=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&g;this.$backdrop=b('<div class="modal-backdrop '+g+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?b.proxy(this.$element[0].focus,this.$element[0]):b.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!f){return}d?this.$backdrop.one(b.support.transition.end,f):f()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,f):f()):f&&f()}}};var c=b.fn.modal;b.fn.modal=function(d){return this.each(function(){var h=b(this),f=h.data("modal"),g=b.extend({},b.fn.modal.defaults,h.data(),typeof d=="object"&&d);f||h.data("modal",f=new a(this,g)),typeof d=="string"?f[d]():g.show&&f.show()})},b.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},b.fn.modal.Constructor=a,b.fn.modal.noConflict=function(){return b.fn.modal=c,this},b(document).on("click.modal.data-api",'[data-toggle="modal"]',function(f){var j=b(this),h=j.attr("href"),d=b(j.attr("data-target")||h&&h.replace(/.*(?=#[^\s]+$)/,"")),g=d.data("modal")?"toggle":b.extend({remote:!/#/.test(h)&&h},d.data(),j.data());f.preventDefault(),d.modal(g).one("hide",function(){j.focus()})})}(window.jQuery),!function(b){var a=function(f,d){this.init("tooltip",f,d)};a.prototype={constructor:a,init:function(h,m,k){var g,j,l,f,d;this.type=h,this.$element=b(m),this.options=this.getOptions(k),this.enabled=!0,l=this.options.trigger.split(" ");for(d=l.length;d--;){f=l[d],f=="click"?this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this)):f!="manual"&&(g=f=="hover"?"mouseenter":"focus",j=f=="hover"?"mouseleave":"blur",this.$element.on(g+"."+this.type,this.options.selector,b.proxy(this.enter,this)),this.$element.on(j+"."+this.type,this.options.selector,b.proxy(this.leave,this)))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(d){return d=b.extend({},b.fn[this.type].defaults,this.$element.data(),d),d.delay&&typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),d},enter:function(d){var f=b(d.currentTarget)[this.type](this._options).data(this.type);if(!f.options.delay||!f.options.delay.show){return f.show()}clearTimeout(this.timeout),f.hoverState="in",this.timeout=setTimeout(function(){f.hoverState=="in"&&f.show()},f.options.delay.show)},leave:function(d){var f=b(d.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!f.options.delay||!f.options.delay.hide){return f.hide()}f.hoverState="out",this.timeout=setTimeout(function(){f.hoverState=="out"&&f.hide()},f.options.delay.hide)},show:function(){var g,l,j,f,h,k,d=b.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(d);if(d.isDefaultPrevented()){return}g=this.tip(),this.setContent(),this.options.animation&&g.addClass("fade"),h=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement,g.detach().css({top:0,left:0,display:"block"}),this.options.container?g.appendTo(this.options.container):g.insertAfter(this.$element),l=this.getPosition(),j=g[0].offsetWidth,f=g[0].offsetHeight;switch(h){case"bottom":k={top:l.top+l.height,left:l.left+l.width/2-j/2};break;case"top":k={top:l.top-f,left:l.left+l.width/2-j/2};break;case"left":k={top:l.top+l.height/2-f/2,left:l.left-j};break;case"right":k={top:l.top+l.height/2-f/2,left:l.left+l.width}}this.applyPlacement(k,h),this.$element.trigger("shown")}},applyPlacement:function(j,m){var g=this.tip(),d=g[0].offsetWidth,h=g[0].offsetHeight,p,f,l,k;g.offset(j).addClass(m).addClass("in"),p=g[0].offsetWidth,f=g[0].offsetHeight,m=="top"&&f!=h&&(j.top=j.top+h-f,k=!0),m=="bottom"||m=="top"?(l=0,j.left<0&&(l=j.left*-2,j.left=0,g.offset(j),p=g[0].offsetWidth,f=g[0].offsetHeight),this.replaceArrow(l-d+p,p,"left")):this.replaceArrow(f-h,f,"top"),k&&g.offset(j)},replaceArrow:function(f,d,g){this.arrow().css(g,f?50*(1-f/d)+"%":"")},setContent:function(){var f=this.tip(),d=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](d),f.removeClass("fade in top bottom left right")},hide:function(){function f(){var j=setTimeout(function(){h.off(b.support.transition.end).detach()},500);h.one(b.support.transition.end,function(){clearTimeout(j),h.detach()})}var d=this,h=this.tip(),g=b.Event("hide");this.$element.trigger(g);if(g.isDefaultPrevented()){return}return h.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?f():h.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var d=this.$element;(d.attr("title")||typeof d.attr("data-original-title")!="string")&&d.attr("data-original-title",d.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return b.extend({},typeof d.getBoundingClientRect=="function"?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,g=this.options;return f=d.attr("data-original-title")||(typeof g.title=="function"?g.title.call(d[0]):g.title),f},tip:function(){return this.$tip=this.$tip||b(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(d){var f=d?b(d.currentTarget)[this.type](this._options).data(this.type):this;f.tip().hasClass("in")?f.hide():f.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=b.fn.tooltip;b.fn.tooltip=function(d){return this.each(function(){var h=b(this),f=h.data("tooltip"),g=typeof d=="object"&&d;f||h.data("tooltip",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.tooltip.Constructor=a,b.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.fn.tooltip.noConflict=function(){return b.fn.tooltip=c,this}}(window.jQuery),!function(b){var a=function(f,d){this.init("popover",f,d)};a.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:a,setContent:function(){var f=this.tip(),d=this.getTitle(),g=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](d),f.find(".popover-content")[this.options.html?"html":"text"](g),f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var f,d=this.$element,g=this.options;return f=(typeof g.content=="function"?g.content.call(d[0]):g.content)||d.attr("data-content"),f},tip:function(){return this.$tip||(this.$tip=b(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=b.fn.popover;b.fn.popover=function(d){return this.each(function(){var h=b(this),f=h.data("popover"),g=typeof d=="object"&&d;f||h.data("popover",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.popover.Constructor=a,b.fn.popover.defaults=b.extend({},b.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.fn.popover.noConflict=function(){return b.fn.popover=c,this}}(window.jQuery),!function(b){function a(f,j){var h=b.proxy(this.process,this),d=b(f).is("body")?b(window):b(f),g;this.options=b.extend({},b.fn.scrollspy.defaults,j),this.$scrollElement=d.on("scroll.scroll-spy.data-api",h),this.selector=(this.options.target||(g=b(f).attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=b("body"),this.refresh(),this.process()}a.prototype={constructor:a,refresh:function(){var d=this,f;this.offsets=b([]),this.targets=b([]),f=this.$body.find(this.selector).map(function(){var j=b(this),h=j.data("target")||j.attr("href"),g=/^#\w/.test(h)&&b(h);return g&&g.length&&[[g.position().top+(!b.isWindow(d.$scrollElement.get(0))&&d.$scrollElement.scrollTop()),h]]||null}).sort(function(h,g){return h[0]-g[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},process:function(){var j=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,l=f-this.$scrollElement.height(),h=this.offsets,d=this.targets,g=this.activeTarget,k;if(j>=l){return g!=(k=d.last()[0])&&this.activate(k)}for(k=h.length;k--;){g!=d[k]&&j>=h[k]&&(!h[k+1]||j<=h[k+1])&&this.activate(d[k])}},activate:function(d){var g,f;this.activeTarget=d,b(this.selector).parent(".active").removeClass("active"),f=this.selector+'[data-target="'+d+'"],'+this.selector+'[href="'+d+'"]',g=b(f).parent("li").addClass("active"),g.parent(".dropdown-menu").length&&(g=g.closest("li.dropdown").addClass("active")),g.trigger("activate")}};var c=b.fn.scrollspy;b.fn.scrollspy=function(d){return this.each(function(){var h=b(this),f=h.data("scrollspy"),g=typeof d=="object"&&d;f||h.data("scrollspy",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.scrollspy.Constructor=a,b.fn.scrollspy.defaults={offset:10},b.fn.scrollspy.noConflict=function(){return b.fn.scrollspy=c,this},b(window).on("load",function(){b('[data-spy="scroll"]').each(function(){var d=b(this);d.scrollspy(d.data())})})}(window.jQuery),!function(b){var a=function(d){this.element=b(d)};a.prototype={constructor:a,show:function(){var f=this.element,k=f.closest("ul:not(.dropdown-menu)"),h=f.attr("data-target"),d,g,j;h||(h=f.attr("href"),h=h&&h.replace(/.*(?=#[^\s]*$)/,""));if(f.parent("li").hasClass("active")){return}d=k.find(".active:last a")[0],j=b.Event("show",{relatedTarget:d}),f.trigger(j);if(j.isDefaultPrevented()){return}g=b(h),this.activate(f.parent("li"),k),this.activate(g,g.parent(),function(){f.trigger({type:"shown",relatedTarget:d})})},activate:function(f,k,h){function j(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),f.addClass("active"),g?(f[0].offsetWidth,f.addClass("in")):f.removeClass("fade"),f.parent(".dropdown-menu")&&f.closest("li.dropdown").addClass("active"),h&&h()}var d=k.find("> .active"),g=h&&b.support.transition&&d.hasClass("fade");g?d.one(b.support.transition.end,j):j(),d.removeClass("in")}};var c=b.fn.tab;b.fn.tab=function(d){return this.each(function(){var g=b(this),f=g.data("tab");f||g.data("tab",f=new a(this)),typeof d=="string"&&f[d]()})},b.fn.tab.Constructor=a,b.fn.tab.noConflict=function(){return b.fn.tab=c,this},b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault(),b(this).tab("show")})}(window.jQuery),!function(b){var a=function(d,f){this.$element=b(d),this.options=b.extend({},b.fn.typeahead.defaults,f),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=b(this.options.menu),this.shown=!1,this.listen()};a.prototype={constructor:a,select:function(){var d=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(d)).change(),this.hide()},updater:function(d){return d},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(d){var f;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(f=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source,f?this.process(f):this)},process:function(d){var f=this;return d=b.grep(d,function(g){return f.matcher(g)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(h){var f=[],j=[],g=[],d;while(d=h.shift()){d.toLowerCase().indexOf(this.query.toLowerCase())?~d.indexOf(this.query)?j.push(d):g.push(d):f.push(d)}return f.concat(j,g)},highlighter:function(f){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return f.replace(new RegExp("("+d+")","ig"),function(h,g){return"<strong>"+g+"</strong>"})},render:function(d){var f=this;return d=b(d).map(function(g,h){return g=b(f.options.item).attr("data-value",h),g.find("a").html(f.highlighter(h)),g[0]}),d.first().addClass("active"),this.$menu.html(d),this},next:function(d){var g=this.$menu.find(".active").removeClass("active"),f=g.next();f.length||(f=b(this.$menu.find("li")[0])),f.addClass("active")},prev:function(f){var d=this.$menu.find(".active").removeClass("active"),g=d.prev();g.length||(g=this.$menu.find("li").last()),g.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",b.proxy(this.keydown,this)),this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},eventSupported:function(f){var d=f in this.$element;return d||(this.$element.setAttribute(f,"return;"),d=typeof this.$element[f]=="function"),d},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault(),this.prev();break;case 40:d.preventDefault(),this.next()}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]),this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(d){this.focused=!0},blur:function(d){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=b.fn.typeahead;b.fn.typeahead=function(d){return this.each(function(){var h=b(this),f=h.data("typeahead"),g=typeof d=="object"&&d;f||h.data("typeahead",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},b.fn.typeahead.Constructor=a,b.fn.typeahead.noConflict=function(){return b.fn.typeahead=c,this},b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var f=b(this);if(f.data("typeahead")){return}f.typeahead(f.data())})}(window.jQuery),!function(b){var a=function(d,f){this.options=b.extend({},b.fn.affix.defaults,f),this.$window=b(window).on("scroll.affix.data-api",b.proxy(this.checkPosition,this)).on("click.affix.data-api",b.proxy(function(){setTimeout(b.proxy(this.checkPosition,this),1)},this)),this.$element=b(d),this.checkPosition()};a.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var h=b(document).height(),m=this.$window.scrollTop(),k=this.$element.offset(),g=this.options.offset,j=g.bottom,l=g.top,f="affix affix-top affix-bottom",d;typeof g!="object"&&(j=l=g),typeof l=="function"&&(l=g.top()),typeof j=="function"&&(j=g.bottom()),d=this.unpin!=null&&m+this.unpin<=k.top?!1:j!=null&&k.top+this.$element.height()>=h-j?"bottom":l!=null&&m<=l?"top":!1;if(this.affixed===d){return}this.affixed=d,this.unpin=d=="bottom"?k.top-m:null,this.$element.removeClass(f).addClass("affix"+(d?"-"+d:""))};var c=b.fn.affix;b.fn.affix=function(d){return this.each(function(){var h=b(this),f=h.data("affix"),g=typeof d=="object"&&d;f||h.data("affix",f=new a(this,g)),typeof d=="string"&&f[d]()})},b.fn.affix.Constructor=a,b.fn.affix.defaults={offset:0},b.fn.affix.noConflict=function(){return b.fn.affix=c,this},b(window).on("load",function(){b('[data-spy="affix"]').each(function(){var d=b(this),f=d.data();f.offset=f.offset||{},f.offsetBottom&&(f.offset.bottom=f.offsetBottom),f.offsetTop&&(f.offset.top=f.offsetTop),d.affix(f)})})}(window.jQuery);(function(){var f;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){f=b[c];if(!a[f]){a[f]=d}}}());
/*! http://mths.be/placeholder v2.0.7 by @mathias */
(function(r,p,n){var w="placeholder" in p.createElement("input"),t="placeholder" in p.createElement("textarea"),o=n.fn,u=n.valHooks,l,m;if(w&&t){m=o.placeholder=function(){return this};m.input=m.textarea=true}else{m=o.placeholder=function(){var a=this;a.filter((w?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":v,"blur.placeholder":s}).data("placeholder-enabled",true).trigger("blur.placeholder");return a};m.input=w;m.textarea=t;l={get:function(a){var b=n(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,c){var b=n(a);if(!b.data("placeholder-enabled")){return a.value=c}if(c==""){a.value=c;if(a!=p.activeElement){s.call(a)}}else{if(b.hasClass("placeholder")){v.call(a,true,c)||(a.value=c)}else{a.value=c}}return b}};w||(u.input=l);t||(u.textarea=l);n(function(){n(p).delegate("form","submit.placeholder",function(){var a=n(".placeholder",this).each(v);setTimeout(function(){a.each(s)},10)})});n(r).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})})}function q(a){var b={},c=/^jQuery\d+$/;n.each(a.attributes,function(d,f){if(f.specified&&!c.test(f.name)){b[f.name]=f.value}});return b}function v(a,d){var b=this,c=n(b);if(b.value==c.attr("placeholder")&&c.hasClass("placeholder")){if(c.data("placeholder-password")){c=c.hide().next().show().attr("id",c.removeAttr("id").data("placeholder-id"));if(a===true){return c[0].value=d}c.focus()}else{b.value="";c.removeClass("placeholder");b==p.activeElement&&b.select()}}}function s(){var c,b=this,d=n(b),a=d,f=this.id;if(b.value==""){if(b.type=="password"){if(!d.data("placeholder-textinput")){try{c=d.clone().attr({type:"text"})}catch(g){c=n("<input>").attr(n.extend(q(this),{type:"text"}))}c.removeAttr("name").data({"placeholder-password":true,"placeholder-id":f}).bind("focus.placeholder",v);d.data({"placeholder-textinput":c,"placeholder-id":f}).before(c)}d=d.removeAttr("id").hide().prev().attr("id",f).show()}d.addClass("placeholder");d[0].value=d.attr("placeholder")}else{d.removeClass("placeholder")}}}(this,document,jQuery));!function(c){var d=function(b,g,a){if(a){a.stopPropagation();a.preventDefault()}this.$element=c(b);this.$newElement=null;this.button=null;this.options=c.extend({},c.fn.selectpicker.defaults,this.$element.data(),typeof g=="object"&&g);if(this.options.title==null){this.options.title=this.$element.attr("title")}this.val=d.prototype.val;this.render=d.prototype.render;this.refresh=d.prototype.refresh;this.selectAll=d.prototype.selectAll;this.deselectAll=d.prototype.deselectAll;this.init()};d.prototype={constructor:d,init:function(k){if(!this.options.container){this.$element.hide()}else{this.$element.css("visibility","hidden")}this.multiple=this.$element.prop("multiple");var j=this.$element.attr("class")!==undefined?this.$element.attr("class").split(/\s+/):"";var a=this.$element.attr("id");this.$element.after(this.createView());this.$newElement=this.$element.next(".bootstrap-select");if(this.options.container){this.selectPosition()}this.button=this.$newElement.find("> button");if(a!==undefined){var b=this;this.button.attr("data-id",a);c('label[for="'+a+'"]').click(function(){b.$newElement.find("button[data-id="+a+"]").focus()})}for(var l=0;l<j.length;l++){if(j[l]!="selectpicker"){this.$newElement.addClass(j[l])}}if(this.multiple){this.$newElement.addClass("show-tick")}this.button.addClass(this.options.style);this.checkDisabled();this.checkTabIndex();this.clickListener();this.render();this.setSize()},createDropdown:function(){var a="<div class='btn-group bootstrap-select'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><span class='filter-option pull-left'></span>&nbsp;<span class='caret'></span></button><ul class='dropdown-menu' role='menu'></ul></div>";return c(a)},createView:function(){var b=this.createDropdown();var a=this.createLi();b.find("ul").append(a);return b},reloadLi:function(){this.destroyLi();var a=this.createLi();this.$newElement.find("ul").append(a)},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var a=this;var k=[];var b=[];var m="";this.$element.find("option").each(function(){k.push(c(this).text())});this.$element.find("option").each(function(u){var t=c(this);var v=t.attr("class")!==undefined?t.attr("class"):"";var g=t.text();var r=t.data("subtext")!==undefined?'<small class="muted">'+t.data("subtext")+"</small>":"";var s=t.data("icon")!==undefined?'<i class="'+t.data("icon")+'"></i> ':"";if(t.is(":disabled")||t.parent().is(":disabled")){s="<span>"+s+"</span>"}g=s+'<span class="text">'+g+r+"</span>";if(a.options.hideDisabled&&(t.is(":disabled")||t.parent().is(":disabled"))){b.push('<a style="min-height: 0; padding: 0"></a>')}else{if(t.parent().is("optgroup")&&t.data("divider")!=true){if(t.index()==0){var h=t.parent().attr("label");var f=t.parent().data("subtext")!==undefined?'<small class="muted">'+t.parent().data("subtext")+"</small>":"";var w=t.parent().data("icon")?'<i class="'+t.parent().data("icon")+'"></i> ':"";h=w+'<span class="text">'+h+f+"</span>";if(t[0].index!=0){b.push('<div class="div-contain"><div class="divider"></div></div><dt>'+h+"</dt>"+a.createA(g,"opt "+v))}else{b.push("<dt>"+h+"</dt>"+a.createA(g,"opt "+v))}}else{b.push(a.createA(g,"opt "+v))}}else{if(t.data("divider")==true){b.push('<div class="div-contain"><div class="divider"></div></div>')}else{if(c(this).data("hidden")==true){b.push("")}else{b.push(a.createA(g,v))}}}}});if(k.length>0){for(var l=0;l<k.length;l++){var j=this.$element.find("option").eq(l);m+="<li rel="+l+">"+b[l]+"</li>"}}if(!this.multiple&&this.$element.find("option:selected").length==0&&!a.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return c(m)},createA:function(a,b){return'<a tabindex="0" class="'+b+'">'+a+'<i class="icon-ok check-mark"></i></a>'},render:function(){var a=this;this.$element.find("option").each(function(f){a.setDisabled(f,c(this).is(":disabled")||c(this).parent().is(":disabled"));a.setSelected(f,c(this).is(":selected"))});var b=this.$element.find("option:selected").map(function(h,f){var g;if(a.options.showSubtext&&c(this).attr("data-subtext")&&!a.multiple){g=' <small class="muted">'+c(this).data("subtext")+"</small>"}else{g=""}if(c(this).attr("title")!=undefined){return c(this).attr("title")}else{return c(this).text()+g}}).toArray();var j=!this.multiple?b[0]:b.join(", ");if(a.multiple&&a.options.selectedTextFormat.indexOf("count")>-1){var m=a.options.selectedTextFormat.split(">");var k=this.options.hideDisabled?":not([disabled])":"";if((m.length>1&&b.length>m[1])||(m.length==1&&b.length>=2)){j=b.length+" of "+this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+k).length+" selected"}}if(!j){j=a.options.title!=undefined?a.options.title:a.options.noneSelectedText}var l;if(this.options.showSubtext&&this.$element.find("option:selected").attr("data-subtext")){l=' <small class="muted">'+this.$element.find("option:selected").data("subtext")+"</small>"}else{l=""}a.$newElement.find(".filter-option").html(j+l)},setSize:function(){if(this.options.container){this.$newElement.toggle(this.$element.parent().is(":visible"))}var u=this;var z=this.$newElement.find(".dropdown-menu");var s=z.find("li > a");var b=this.$newElement.addClass("open").find(".dropdown-menu li > a").outerHeight();this.$newElement.removeClass("open");var w=z.find("li .divider").outerHeight(true);var x=this.$newElement.offset().top;var t=this.$newElement.outerHeight();var B=parseInt(z.css("padding-top"))+parseInt(z.css("padding-bottom"))+parseInt(z.css("border-top-width"))+parseInt(z.css("border-bottom-width"));var A=this.options.hideDisabled?":not(.disabled)":"";var y;if(this.options.size=="auto"){var a=function(){var k=x-c(window).scrollTop();var f=window.innerHeight;var j=B+parseInt(z.css("margin-top"))+parseInt(z.css("margin-bottom"))+2;var g=f-k-t-j;var h;y=g;if(u.$newElement.hasClass("dropup")){y=k-j}if((z.find("li").length+z.find("dt").length)>3){h=b*3+j-2}else{h=0}z.css({"max-height":y+"px","overflow-y":"auto","min-height":h+"px"})};a();c(window).resize(a);c(window).scroll(a)}else{if(this.options.size&&this.options.size!="auto"&&z.find("li"+A).length>this.options.size){var q=z.find("li"+A+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index();var r=z.find("li").slice(0,q+1).find(".div-contain").length;y=b*this.options.size+r*w+B;z.css({"max-height":y+"px","overflow-y":"auto"})}}if(this.options.width=="auto"){this.$newElement.find(".dropdown-menu").css("min-width","0");var v=this.$newElement.find(".dropdown-menu").css("width");this.$newElement.css("width",v);if(this.options.container){this.$element.css("width",v)}}else{if(this.options.width){if(this.options.container){this.$element.css("width",this.options.width);this.$newElement.width(this.$element.outerWidth())}else{this.$newElement.css("width",this.options.width)}}else{if(this.options.container){this.$newElement.width(this.$element.outerWidth())}}}},selectPosition:function(){var b=c(this.options.container).offset();var g=this.$element.offset();if(b&&g){var a=g.top-b.top;var h=g.left-b.left;this.$newElement.appendTo(this.options.container);this.$newElement.css({position:"absolute",top:a+"px",left:h+"px"})}},refresh:function(){this.reloadLi();this.render();this.setSize();this.checkDisabled();if(this.options.container){this.selectPosition()}},setSelected:function(b,a){if(a){this.$newElement.find("li").eq(b).addClass("selected")}else{this.$newElement.find("li").eq(b).removeClass("selected")}},setDisabled:function(b,a){if(a){this.$newElement.find("li").eq(b).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1)}else{this.$newElement.find("li").eq(b).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element.is(":disabled")||this.$element.attr("readonly")},checkDisabled:function(){if(this.isDisabled()){this.button.addClass("disabled");this.button.click(function(a){a.preventDefault()});this.button.attr("tabindex","-1")}else{if(!this.isDisabled()&&this.button.hasClass("disabled")){this.button.removeClass("disabled");this.button.click(function(){return true});this.button.removeAttr("tabindex")}}},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var a=this.$element.attr("tabindex");this.button.attr("tabindex",a)}},clickListener:function(){var a=this;c("body").on("touchstart.dropdown",".dropdown-menu",function(b){b.stopPropagation()});this.$newElement.on("click","li a",function(b){var m=c(this).parent().index(),k=c(this).parent(),o=k.parents(".bootstrap-select"),l=a.$element.val();if(a.multiple){b.stopPropagation()}b.preventDefault();if(a.$element.not(":disabled")&&!c(this).parent().hasClass("disabled")){if(!a.multiple){a.$element.find("option").prop("selected",false);a.$element.find("option").eq(m).prop("selected",true)}else{var n=a.$element.find("option").eq(m).prop("selected");if(n){a.$element.find("option").eq(m).prop("selected",false)}else{a.$element.find("option").eq(m).prop("selected",true)}}o.find(".filter-option").html(k.text());o.find("button").focus();if(l!=a.$element.val()){a.$element.trigger("change")}a.render()}});this.$newElement.on("click","li.disabled a, li dt, li .div-contain",function(b){b.preventDefault();b.stopPropagation();var g=c(this).parent().parents(".bootstrap-select");g.find("button").focus()});this.$element.on("change",function(b){a.render()})},val:function(a){if(a!=undefined){this.$element.val(a);this.$element.trigger("change");return this.$element}else{return this.$element.val()}},selectAll:function(){this.$element.find("option").prop("selected",true).attr("selected","selected");this.render()},deselectAll:function(){this.$element.find("option").prop("selected",false).removeAttr("selected");this.render()},keydown:function(s){var r,t,y,u,w,x,b,B,z;r=c(this);y=r.parent();t=c("[role=menu] li:not(.divider):visible a",y);if(!t.length){return}if(/(38|40)/.test(s.keyCode)){u=t.index(t.filter(":focus"));x=t.parent(":not(.disabled)").first().index();b=t.parent(":not(.disabled)").last().index();w=t.eq(u).parent().nextAll(":not(.disabled)").eq(0).index();B=t.eq(u).parent().prevAll(":not(.disabled)").eq(0).index();z=t.eq(w).parent().prevAll(":not(.disabled)").eq(0).index();if(s.keyCode==38){if(u!=z&&u>B){u=B}if(u<x){u=x}}if(s.keyCode==40){if(u!=z&&u<w){u=w}if(u>b){u=b}}t.eq(u).focus()}else{var A={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};var C=[];t.each(function(){if(c(this).parent().is(":not(.disabled)")){if(c.trim(c(this).text().toLowerCase()).substring(0,1)==A[s.keyCode]){C.push(c(this).parent().index())}}});var v=c(document).data("keycount");v++;c(document).data("keycount",v);var a=c.trim(c(":focus").text().toLowerCase()).substring(0,1);if(a!=A[s.keyCode]){v=1;c(document).data("keycount",v)}else{if(v>=C.length){c(document).data("keycount",0)}}t.eq(C[v-1]).focus()}if(/(13)/.test(s.keyCode)){c(":focus").click();y.addClass("open");c(document).data("keycount",0)}}};c.fn.selectpicker=function(h,b){var k=arguments;var a;var j=this.each(function(){if(c(this).is("select")){var f=c(this),g=f.data("selectpicker"),p=typeof h=="object"&&h;if(!g){f.data("selectpicker",(g=new d(this,p,b)))}else{if(p){for(var o in p){g.options[o]=p[o]}}}if(typeof h=="string"){var n=h;if(g[n] instanceof Function){[].shift.apply(k);a=g[n].apply(g,k)}else{a=g.options[n]}}}});if(a!=undefined){return a}else{return j}};c.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",width:null,container:false,hideDisabled:false,showSubtext:false};c(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",d.prototype.keydown)}(window.jQuery);(function(b){var a={};var c={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",responsive:true,touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4000,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};b.fn.bxSlider=function(t){if(this.length==0){return this}if(this.length>1){this.each(function(){b(this).bxSlider(t)});return this}var k={};var I=this;a.el=this;var K=b(window).width();var N=b(window).height();var D=function(){k.settings=b.extend({},c,t);k.settings.slideWidth=parseInt(k.settings.slideWidth);k.children=I.children(k.settings.slideSelector);if(k.children.length<k.settings.minSlides){k.settings.minSlides=k.children.length}if(k.children.length<k.settings.maxSlides){k.settings.maxSlides=k.children.length}if(k.settings.randomStart){k.settings.startSlide=Math.floor(Math.random()*k.children.length)}k.active={index:k.settings.startSlide};k.carousel=k.settings.minSlides>1||k.settings.maxSlides>1;if(k.carousel){k.settings.preloadImages="all"}k.minThreshold=(k.settings.minSlides*k.settings.slideWidth)+((k.settings.minSlides-1)*k.settings.slideMargin);k.maxThreshold=(k.settings.maxSlides*k.settings.slideWidth)+((k.settings.maxSlides-1)*k.settings.slideMargin);k.working=false;k.controls={};k.interval=null;k.animProp=k.settings.mode=="vertical"?"top":"left";k.usingCSS=k.settings.useCSS&&k.settings.mode!="fade"&&(function(){var U=document.createElement("div");var T=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var S in T){if(U.style[T[S]]!==undefined){k.cssPrefix=T[S].replace("Perspective","").toLowerCase();k.animProp="-"+k.cssPrefix+"-transform";return true}}return false}());if(k.settings.mode=="vertical"){k.settings.maxSlides=k.settings.minSlides}I.data("origStyle",I.attr("style"));I.children(k.settings.slideSelector).each(function(){b(this).data("origStyle",b(this).attr("style"))});n()};var n=function(){I.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');k.viewport=I.parent();k.loader=b('<div class="bx-loading" />');k.viewport.prepend(k.loader);I.css({width:k.settings.mode=="horizontal"?(k.children.length*100+215)+"%":"auto",position:"relative"});if(k.usingCSS&&k.settings.easing){I.css("-"+k.cssPrefix+"-transition-timing-function",k.settings.easing)}else{if(!k.settings.easing){k.settings.easing="swing"}}var S=B();k.viewport.css({width:"100%",overflow:"hidden",position:"relative"});k.viewport.parent().css({maxWidth:M()});if(!k.settings.pager){k.viewport.parent().css({margin:"0 auto 0px"})}k.children.css({"float":k.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"});k.children.css("width",E());if(k.settings.mode=="horizontal"&&k.settings.slideMargin>0){k.children.css("marginRight",k.settings.slideMargin)}if(k.settings.mode=="vertical"&&k.settings.slideMargin>0){k.children.css("marginBottom",k.settings.slideMargin)}if(k.settings.mode=="fade"){k.children.css({position:"absolute",zIndex:0,display:"none"});k.children.eq(k.settings.startSlide).css({zIndex:50,display:"block"})}k.controls.el=b('<div class="bx-controls" />');if(k.settings.captions){A()}k.active.last=k.settings.startSlide==w()-1;if(k.settings.video){I.fitVids()}var T=k.children.eq(k.settings.startSlide);if(k.settings.preloadImages=="all"){T=k.children}if(!k.settings.ticker){if(k.settings.pager){P()}if(k.settings.controls){l()}if(k.settings.auto&&k.settings.autoControls){L()}if(k.settings.controls||k.settings.autoControls||k.settings.pager){k.viewport.after(k.controls.el)}}else{k.settings.pager=false}d(T,u)};var d=function(S,V){var U=S.find("img, iframe").length;if(U==0){V();return}var T=0;S.find("img, iframe").each(function(){if(b(this).is("img")){b(this).attr("src",b(this).attr("src")+"?timestamp="+new Date().getTime())}b(this).load(function(){setTimeout(function(){if(++T==U){V()}},0)})})};var u=function(){if(k.settings.infiniteLoop&&k.settings.mode!="fade"&&!k.settings.ticker){var U=k.settings.mode=="vertical"?k.settings.minSlides:k.settings.maxSlides;var T=k.children.slice(0,U).clone().addClass("bx-clone");var S=k.children.slice(-U).clone().addClass("bx-clone");I.append(T).prepend(S)}k.loader.remove();j();if(k.settings.mode=="vertical"){k.settings.adaptiveHeight=true}k.viewport.height(p());I.redrawSlider();k.settings.onSliderLoad(k.active.index);k.initialized=true;if(k.settings.responsive){b(window).bind("resize",o)}if(k.settings.auto&&k.settings.autoStart){f()}if(k.settings.ticker){G()}if(k.settings.pager){R(k.settings.startSlide)}if(k.settings.controls){m()}if(k.settings.touchEnabled&&!k.settings.ticker){g()}};var p=function(){var S=0;var U=b();if(k.settings.mode!="vertical"&&!k.settings.adaptiveHeight){U=k.children}else{if(!k.carousel){U=k.children.eq(k.active.index)}else{var T=k.settings.moveSlides==1?k.active.index:k.active.index*r();U=k.children.eq(T);for(i=1;i<=k.settings.maxSlides-1;i++){if(T+i>=k.children.length){U=U.add(k.children.eq(i-1))}else{U=U.add(k.children.eq(T+i))}}}}if(k.settings.mode=="vertical"){U.each(function(V){S+=b(this).outerHeight()});if(k.settings.slideMargin>0){S+=k.settings.slideMargin*(k.settings.minSlides-1)}}else{S=Math.max.apply(Math,U.map(function(){return b(this).outerHeight(false)}).get())}return S};var M=function(){var S="100%";if(k.settings.slideWidth>0){if(k.settings.mode=="horizontal"){S=(k.settings.maxSlides*k.settings.slideWidth)+((k.settings.maxSlides-1)*k.settings.slideMargin)}else{S=k.settings.slideWidth}}return S};var E=function(){var T=k.settings.slideWidth;var S=k.viewport.width();if(k.settings.slideWidth==0||(k.settings.slideWidth>S&&!k.carousel)||k.settings.mode=="vertical"){T=S}else{if(k.settings.maxSlides>1&&k.settings.mode=="horizontal"){if(S>k.maxThreshold){}else{if(S<k.minThreshold){T=(S-(k.settings.slideMargin*(k.settings.minSlides-1)))/k.settings.minSlides}}}}return T};var B=function(){var T=1;if(k.settings.mode=="horizontal"&&k.settings.slideWidth>0){if(k.viewport.width()<k.minThreshold){T=k.settings.minSlides}else{if(k.viewport.width()>k.maxThreshold){T=k.settings.maxSlides}else{var S=k.children.first().width();T=Math.floor(k.viewport.width()/S)}}}else{if(k.settings.mode=="vertical"){T=k.settings.minSlides}}return T};var w=function(){var T=0;if(k.settings.moveSlides>0){if(k.settings.infiniteLoop){T=k.children.length/r()}else{var U=0;var S=0;while(U<k.children.length){++T;U=S+B();S+=k.settings.moveSlides<=B()?k.settings.moveSlides:B()}}}else{T=Math.ceil(k.children.length/B())}return T};var r=function(){if(k.settings.moveSlides>0&&k.settings.moveSlides<=B()){return k.settings.moveSlides}return B()};var j=function(){if(k.children.length>k.settings.maxSlides&&k.active.last&&!k.settings.infiniteLoop){if(k.settings.mode=="horizontal"){var U=k.children.last();var S=U.position();C(-(S.left-(k.viewport.width()-U.width())),"reset",0)}else{if(k.settings.mode=="vertical"){var T=k.children.length-k.settings.minSlides;var S=k.children.eq(T).position();C(-S.top,"reset",0)}}}else{var S=k.children.eq(k.active.index*r()).position();if(k.active.index==w()-1){k.active.last=true}if(S!=undefined){if(k.settings.mode=="horizontal"){C(-S.left,"reset",0)}else{if(k.settings.mode=="vertical"){C(-S.top,"reset",0)}}}}};var C=function(U,T,V,X){if(k.usingCSS){var W=k.settings.mode=="vertical"?"translate3d(0, "+U+"px, 0)":"translate3d("+U+"px, 0, 0)";I.css("-"+k.cssPrefix+"-transition-duration",V/1000+"s");if(T=="slide"){I.css(k.animProp,W);I.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){I.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");q()})}else{if(T=="reset"){I.css(k.animProp,W)}else{if(T=="ticker"){I.css("-"+k.cssPrefix+"-transition-timing-function","linear");I.css(k.animProp,W);I.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){I.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");C(X.resetValue,"reset",0);v()})}}}}else{var S={};S[k.animProp]=U;if(T=="slide"){I.animate(S,V,k.settings.easing,function(){q()})}else{if(T=="reset"){I.css(k.animProp,U)}else{if(T=="ticker"){I.animate(S,speed,"linear",function(){C(X.resetValue,"reset",0);v()})}}}}};var s=function(){var V="";var U=w();for(var T=0;T<U;T++){var S="";if(k.settings.buildPager&&b.isFunction(k.settings.buildPager)){S=k.settings.buildPager(T);k.pagerEl.addClass("bx-custom-pager")}else{S=T+1;k.pagerEl.addClass("bx-default-pager")}V+='<div class="bx-pager-item"><a href="" data-slide-index="'+T+'" class="bx-pager-link">'+S+"</a></div>"}k.pagerEl.html(V)};var P=function(){if(!k.settings.pagerCustom){k.pagerEl=b('<div class="bx-pager" />');if(k.settings.pagerSelector){b(k.settings.pagerSelector).html(k.pagerEl)}else{k.controls.el.addClass("bx-has-pager").append(k.pagerEl)}s()}else{k.pagerEl=b(k.settings.pagerCustom)}k.pagerEl.delegate("a","click",y)};var l=function(){k.controls.next=b('<a class="bx-next" href="">'+k.settings.nextText+"</a>");k.controls.prev=b('<a class="bx-prev" href="">'+k.settings.prevText+"</a>");k.controls.next.bind("click",h);k.controls.prev.bind("click",O);if(k.settings.nextSelector){b(k.settings.nextSelector).append(k.controls.next)}if(k.settings.prevSelector){b(k.settings.prevSelector).append(k.controls.prev)}if(!k.settings.nextSelector&&!k.settings.prevSelector){k.controls.directionEl=b('<div class="bx-controls-direction" />');k.controls.directionEl.append(k.controls.prev).append(k.controls.next);k.controls.el.addClass("bx-has-controls-direction").append(k.controls.directionEl)}};var L=function(){k.controls.start=b('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+k.settings.startText+"</a></div>");k.controls.stop=b('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+k.settings.stopText+"</a></div>");k.controls.autoEl=b('<div class="bx-controls-auto" />');k.controls.autoEl.delegate(".bx-start","click",x);k.controls.autoEl.delegate(".bx-stop","click",Q);if(k.settings.autoControlsCombine){k.controls.autoEl.append(k.controls.start)}else{k.controls.autoEl.append(k.controls.start).append(k.controls.stop)}if(k.settings.autoControlsSelector){b(k.settings.autoControlsSelector).html(k.controls.autoEl)}else{k.controls.el.addClass("bx-has-controls-auto").append(k.controls.autoEl)}H(k.settings.autoStart?"stop":"start")};var A=function(){k.children.each(function(S){var T=b(this).find("img:first").attr("title");if(T!=undefined&&(""+T).length){b(this).append('<div class="bx-caption"><span>'+T+"</span></div>")}})};var h=function(S){if(k.settings.auto){I.stopAuto()}I.goToNextSlide();S.preventDefault()};var O=function(S){if(k.settings.auto){I.stopAuto()}I.goToPrevSlide();S.preventDefault()};var x=function(S){I.startAuto();S.preventDefault()};var Q=function(S){I.stopAuto();S.preventDefault()};var y=function(U){if(k.settings.auto){I.stopAuto()}var T=b(U.currentTarget);var S=parseInt(T.attr("data-slide-index"));if(S!=k.active.index){I.goToSlide(S)}U.preventDefault()};var R=function(T){var S=k.children.length;if(k.settings.pagerType=="short"){if(k.settings.maxSlides>1){S=Math.ceil(k.children.length/k.settings.maxSlides)}k.pagerEl.html((T+1)+k.settings.pagerShortSeparator+S);return}k.pagerEl.find("a").removeClass("active");k.pagerEl.each(function(U,V){b(V).find("a").eq(T).addClass("active")})};var q=function(){if(k.settings.infiniteLoop){var S="";if(k.active.index==0){S=k.children.eq(0).position()}else{if(k.active.index==w()-1&&k.carousel){S=k.children.eq((w()-1)*r()).position()}else{if(k.active.index==k.children.length-1){S=k.children.eq(k.children.length-1).position()}}}if(k.settings.mode=="horizontal"){C(-S.left,"reset",0)}else{if(k.settings.mode=="vertical"){C(-S.top,"reset",0)}}}k.working=false;k.settings.onSlideAfter(k.children.eq(k.active.index),k.oldIndex,k.active.index)};var H=function(S){if(k.settings.autoControlsCombine){k.controls.autoEl.html(k.controls[S])}else{k.controls.autoEl.find("a").removeClass("active");k.controls.autoEl.find("a:not(.bx-"+S+")").addClass("active")}};var m=function(){if(w()==1){k.controls.prev.addClass("disabled");k.controls.next.addClass("disabled")}else{if(!k.settings.infiniteLoop&&k.settings.hideControlOnEnd){if(k.active.index==0){k.controls.prev.addClass("disabled");k.controls.next.removeClass("disabled")}else{if(k.active.index==w()-1){k.controls.next.addClass("disabled");k.controls.prev.removeClass("disabled")}else{k.controls.prev.removeClass("disabled");k.controls.next.removeClass("disabled")}}}}};var f=function(){if(k.settings.autoDelay>0){var S=setTimeout(I.startAuto,k.settings.autoDelay)}else{I.startAuto()}if(k.settings.autoHover){I.hover(function(){if(k.interval){I.stopAuto(true);k.autoPaused=true}},function(){if(k.autoPaused){I.startAuto(true);k.autoPaused=null}})}};var G=function(){var T=0;if(k.settings.autoDirection=="next"){I.append(k.children.clone().addClass("bx-clone"))}else{I.prepend(k.children.clone().addClass("bx-clone"));var S=k.children.first().position();T=k.settings.mode=="horizontal"?-S.left:-S.top}C(T,"reset",0);k.settings.pager=false;k.settings.controls=false;k.settings.autoControls=false;if(k.settings.tickerHover&&!k.usingCSS){k.viewport.hover(function(){I.stop()},function(){var X=0;k.children.each(function(Y){X+=k.settings.mode=="horizontal"?b(this).outerWidth(true):b(this).outerHeight(true)});var U=k.settings.speed/X;var V=k.settings.mode=="horizontal"?"left":"top";var W=U*(X-(Math.abs(parseInt(I.css(V)))));v(W)})}v()};var v=function(X){speed=X?X:k.settings.speed;var S={left:0,top:0};var V={left:0,top:0};if(k.settings.autoDirection=="next"){S=I.find(".bx-clone").first().position()}else{V=k.children.first().position()}var U=k.settings.mode=="horizontal"?-S.left:-S.top;var T=k.settings.mode=="horizontal"?-V.left:-V.top;var W={resetValue:T};C(U,"ticker",speed,W)};var g=function(){k.touch={start:{x:0,y:0},end:{x:0,y:0}};k.viewport.bind("touchstart",F)};var F=function(S){if(k.working){S.preventDefault()}else{k.touch.originalPos=I.position();var T=S.originalEvent;k.touch.start.x=T.changedTouches[0].pageX;k.touch.start.y=T.changedTouches[0].pageY;k.viewport.bind("touchmove",J);k.viewport.bind("touchend",z)}};var J=function(T){var X=T.originalEvent;var U=Math.abs(X.changedTouches[0].pageX-k.touch.start.x);var W=Math.abs(X.changedTouches[0].pageY-k.touch.start.y);if((U*3)>W&&k.settings.preventDefaultSwipeX){T.preventDefault()}else{if((W*3)>U&&k.settings.preventDefaultSwipeY){T.preventDefault()}}if(k.settings.mode!="fade"&&k.settings.oneToOneTouch){var S=0;if(k.settings.mode=="horizontal"){var V=X.changedTouches[0].pageX-k.touch.start.x;S=k.touch.originalPos.left+V}else{var V=X.changedTouches[0].pageY-k.touch.start.y;S=k.touch.originalPos.top+V}C(S,"reset",0)}};var z=function(T){k.viewport.unbind("touchmove",J);var V=T.originalEvent;var S=0;k.touch.end.x=V.changedTouches[0].pageX;k.touch.end.y=V.changedTouches[0].pageY;if(k.settings.mode=="fade"){var U=Math.abs(k.touch.start.x-k.touch.end.x);if(U>=k.settings.swipeThreshold){k.touch.start.x>k.touch.end.x?I.goToNextSlide():I.goToPrevSlide();I.stopAuto()}}else{var U=0;if(k.settings.mode=="horizontal"){U=k.touch.end.x-k.touch.start.x;S=k.touch.originalPos.left}else{U=k.touch.end.y-k.touch.start.y;S=k.touch.originalPos.top}if(!k.settings.infiniteLoop&&((k.active.index==0&&U>0)||(k.active.last&&U<0))){C(S,"reset",200)}else{if(Math.abs(U)>=k.settings.swipeThreshold){U<0?I.goToNextSlide():I.goToPrevSlide();I.stopAuto()}else{C(S,"reset",200)}}}k.viewport.unbind("touchend",z)};var o=function(T){var S=b(window).width();var U=b(window).height();if(K!=S||N!=U){K=S;N=U;I.redrawSlider()}};I.goToSlide=function(W,Y){if(k.working||k.active.index==W){return}k.working=true;k.oldIndex=k.active.index;if(W<0){k.active.index=w()-1}else{if(W>=w()){k.active.index=0}else{k.active.index=W}}k.settings.onSlideBefore(k.children.eq(k.active.index),k.oldIndex,k.active.index);if(Y=="next"){k.settings.onSlideNext(k.children.eq(k.active.index),k.oldIndex,k.active.index)}else{if(Y=="prev"){k.settings.onSlidePrev(k.children.eq(k.active.index),k.oldIndex,k.active.index)}}k.active.last=k.active.index>=w()-1;if(k.settings.pager){R(k.active.index)}if(k.settings.controls){m()}if(k.settings.mode=="fade"){if(k.settings.adaptiveHeight&&k.viewport.height()!=p()){k.viewport.animate({height:p()},k.settings.adaptiveHeightSpeed)}k.children.filter(":visible").fadeOut(k.settings.speed).css({zIndex:0});k.children.eq(k.active.index).css("zIndex",51).fadeIn(k.settings.speed,function(){b(this).css("zIndex",50);q()})}else{if(k.settings.adaptiveHeight&&k.viewport.height()!=p()){k.viewport.animate({height:p()},k.settings.adaptiveHeightSpeed)}var X=0;var V={left:0,top:0};if(!k.settings.infiniteLoop&&k.carousel&&k.active.last){if(k.settings.mode=="horizontal"){var S=k.children.eq(k.children.length-1);V=S.position();X=k.viewport.width()-S.outerWidth()}else{var U=k.children.length-k.settings.minSlides;V=k.children.eq(U).position()}}else{if(k.carousel&&k.active.last&&Y=="prev"){var aa=k.settings.moveSlides==1?k.settings.maxSlides-r():((w()-1)*r())-(k.children.length-k.settings.maxSlides);var S=I.children(".bx-clone").eq(aa);V=S.position()}else{if(Y=="next"&&k.active.index==0){V=I.find("> .bx-clone").eq(k.settings.maxSlides).position();k.active.last=false}else{if(W>=0){var T=W*r();V=k.children.eq(T).position()}}}}if("undefined"!==typeof(V)){var Z=k.settings.mode=="horizontal"?-(V.left-X):-V.top;C(Z,"slide",k.settings.speed)}}};I.goToNextSlide=function(){if(!k.settings.infiniteLoop&&k.active.last){return}var S=parseInt(k.active.index)+1;I.goToSlide(S,"next")};I.goToPrevSlide=function(){if(!k.settings.infiniteLoop&&k.active.index==0){return}var S=parseInt(k.active.index)-1;I.goToSlide(S,"prev")};I.startAuto=function(S){if(k.interval){return}k.interval=setInterval(function(){k.settings.autoDirection=="next"?I.goToNextSlide():I.goToPrevSlide()},k.settings.pause);if(k.settings.autoControls&&S!=true){H("stop")}};I.stopAuto=function(S){if(!k.interval){return}clearInterval(k.interval);k.interval=null;if(k.settings.autoControls&&S!=true){H("start")}};I.getCurrentSlide=function(){return k.active.index};I.getSlideCount=function(){return k.children.length};I.redrawSlider=function(){k.children.add(I.find(".bx-clone")).outerWidth(E());k.viewport.css("height",p());if(!k.settings.ticker){j()}if(k.active.last){k.active.index=w()-1}if(k.active.index>=w()){k.active.last=true}if(k.settings.pager&&!k.settings.pagerCustom){s();R(k.active.index)}};I.destroySlider=function(){if(!k.initialized){return}k.initialized=false;b(".bx-clone",this).remove();k.children.each(function(){b(this).data("origStyle")!=undefined?b(this).attr("style",b(this).data("origStyle")):b(this).removeAttr("style")});b(this).data("origStyle")!=undefined?this.attr("style",b(this).data("origStyle")):b(this).removeAttr("style");b(this).unwrap().unwrap();if(k.controls.el){k.controls.el.remove()}if(k.controls.next){k.controls.next.remove()}if(k.controls.prev){k.controls.prev.remove()}if(k.pagerEl){k.pagerEl.remove()}b(".bx-caption",this).remove();if(k.controls.autoEl){k.controls.autoEl.remove()}clearInterval(k.interval);if(k.settings.responsive){b(window).unbind("resize",o)}};I.reloadSlider=function(S){if(S!=undefined){t=S}I.destroySlider();D()};D();return this}})(jQuery);
/*!
 * jQuery imagesLoaded plugin v2.1.0
 * http://github.com/desandro/imagesloaded
 *
 * MIT License. by Paul Irish et al.
 */
(function(d,b){var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";d.fn.imagesLoaded=function(t){function l(){var f=d(q),g=d(r);v&&(r.length?v.reject(u,f,g):v.resolve(u));d.isFunction(t)&&t.call(s,u,f,g)}function p(f,g){f.src===a||-1!==d.inArray(f,n)||(n.push(f),g?r.push(f):q.push(f),d.data(f,"imagesLoaded",{isBroken:g,src:f.src}),c&&v.notifyWith(d(f),[g,u,d(q),d(r)]),u.length===n.length&&(setTimeout(l),u.unbind(".imagesLoaded")))}var s=this,v=d.isFunction(d.Deferred)?d.Deferred():0,c=d.isFunction(v.notify),u=s.find("img").add(s.filter("img")),n=[],q=[],r=[];d.isPlainObject(t)&&d.each(t,function(f,g){if("callback"===f){t=g}else{if(v){v[f](g)}}});u.length?u.bind("load.imagesLoaded error.imagesLoaded",function(f){p(f.target,"error"===f.type)}).each(function(f,g){var j=g.src,h=d.data(g,"imagesLoaded");if(h&&h.src===j){p(g,h.isBroken)}else{if(g.complete&&g.naturalWidth!==b){p(g,0===g.naturalWidth||0===g.naturalHeight)}else{if(g.readyState||g.complete){g.src=a,g.src=j}}}}):l();return v?v.promise(s):s}})(jQuery);jQuery(".DefaultLabel").each(function(){if(jQuery(this).val()==""){jQuery(this).siblings(".DefaultLabelContent").show()}else{jQuery(this).siblings(".DefaultLabelContent").hide()}jQuery(this).focus(function(){jQuery(this).siblings(".DefaultLabelContent").hide()}).blur(function(){if(jQuery(this).val()==""){jQuery(this).siblings(".DefaultLabelContent").show()}})});FileBrowseUIGroup=function(){this.FileBrowseUIGroup=getElementsByClassName(arguments[0]);for(var a=0;a<this.FileBrowseUIGroup.length;a++){new FileBrowseUI(this.FileBrowseUIGroup[a],arguments[1])}};FileBrowseUI=function(){this.options={browseButtonPos:arguments[1]&&arguments[1].browseButtonPos?arguments[1].browseButtonPos:"right",browseButtonClassName:arguments[1]&&arguments[1].browseButtonClassName?arguments[1].browseButtonClassName:"DefaultBrowseBtn",browseTextBoxClassName:arguments[1]&&arguments[1].browseTextBoxClassName?arguments[1].browseTextBoxClassName:"DefaultBrowseTextBox",breakline:arguments[1]&&arguments[1].breakline?arguments[1].breakline:false,browseButtonText:arguments[1].browseButtonText?arguments[1].browseButtonText:"Browse",browseTextBoxValue:arguments[1].browseTextBoxValue?arguments[1].browseTextBoxValue:""};var d=this.options.browseButtonPos.split(" ")[0];var b=this.options.browseButtonPos.split(" ")[1];this.originalFileBrowse=arguments[0];var g=document.createElement("div");this.originalFileBrowse.parentNode.insertBefore(g,this.originalFileBrowse);g.appendChild(this.originalFileBrowse);var a=document.createElement("div");this.fakeTextBoxInput=document.createElement("input");this.fakeTextBoxInput.id="fake_"+this.originalFileBrowse.id;this.fakeTextBoxInput.name="fake_"+this.originalFileBrowse.name;g.parentNode.insertBefore(a,g);a.appendChild(this.fakeTextBoxInput);var h=document.createElement("div");g.parentNode.insertBefore(h,g);if(typeof(b)=="undefined"||b=="bottom"){h.appendChild(a);h.appendChild(g)}else{h.appendChild(g);h.appendChild(a)}h.className=this.originalFileBrowse.className;h.style.overflow="hidden";g.style.position="relative";g.style.overflow="hidden";this.originalFileBrowse.style.fontSize="10em";this.originalFileBrowse.style.position="absolute";this.originalFileBrowse.style.Zindex="1";this.originalFileBrowse.style.top="0px";this.originalFileBrowse.style.right="0px";this.originalFileBrowse.className="";g.className+=this.options.browseButtonClassName;var f=document.createElement("div");g.appendChild(f);f.innerHTML=this.options.browseButtonText;g.onmousedown=function(){g.className+=" FileBrowseMouseDown"};g.onmouseout=function(){g.className=g.className.replace(/FileBrowseMouseDown/,"")};var j=document.all;if(j){g.style.styleFloat=d;this.originalFileBrowse.style.filter="alpha(opacity=0)"}else{g.style.cssFloat=d;this.originalFileBrowse.style.opacity=0;this.originalFileBrowse.style.MozOpacity=0}a.className+="TextBoxWrapper";this.fakeTextBoxInput.className+=this.options.browseTextBoxClassName;this.fakeTextBoxInput.style.margin="0px";this.fakeTextBoxInput.style.outline="none";this.fakeTextBoxInput.value=this.options.browseTextBoxValue;if(j){if(d=="left"){a.style.styleFloat="right"}else{a.style.styleFloat="left"}this.fakeTextBoxInput.style.marginTop="-1px"}else{if(d=="left"){a.style.cssFloat="right"}else{a.style.cssFloat="left"}a.style.width=this.fakeTextBoxInput.offsetWidth+"px"}h.style.width=this.options.breakline?this.fakeTextBoxInput.offsetWidth+"px":g.offsetWidth+this.fakeTextBoxInput.offsetWidth+6+"px";var c=this;this.originalFileBrowse.onchange=function(){c.updatedFileBrowseUI()};FileBrowseUI.prototype.updatedFileBrowseUI=function(){this.fakeTextBoxInput.value=this.originalFileBrowse.value}};function getElementsByClassName(d){var c=document.getElementsByTagName("*")||document.all;var f=new Array();for(var b=0;b<c.length;b++){var h=c[b];var g=h.className.split(" ");for(var a=0;a<g.length;a++){if(g[a]==d){f.push(h);break}}}return f}function stopEventBubling(a){if(!a){a=window.event}if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}function DOMStyle(a){parseString=a.split("-");a="";for(var b=1;b<parseString.length;b++){parseString[b]=parseString[b].replace(parseString[b].charAt(0),parseString[b].charAt(0).toUpperCase())}for(var b=0;b<parseString.length;b++){a+=parseString[b]}return a}function getStyle(b,a){if(b.currentStyle){a=DOMStyle(a);var c=b.currentStyle[a]}else{if(window.getComputedStyle){var c=document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}}return c}function findAbsPos(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}return{left:b,top:curtop}}var JQueryCheckboxController=function(a,f){var c={onChangedCallBack:undefined,activeClass:"Active"};var b=this;var g=function(j){var k=b.checkbox.get(0);d(k);if(typeof c.onChangedCallBack!="undefined"){c.onChangedCallBack(b.checkbox.get(0).checked,b.checkbox.val())}};var h=function(){$.extend(c,f);b.checkbox=a;b.label=a.next();if(b.checkbox.prop("checked")==true){b.label.addClass(c.activeClass)}else{b.label.removeClass(c.activeClass)}b.checkbox.unbind("change").bind("change",g)};var d=function(j){if(j.checked==true){b.label.addClass(c.activeClass)}else{b.label.removeClass(c.activeClass)}};this.getSelected=function(){return b.checkbox.get(0).checked};this.setSelected=function(j){b.checkbox.get(0).checked=j;d(b.checkbox.get(0))};h()};(function(h){var g=[];var c={changeHandler:function(k){},activeClass:"Active",bindreset:true};var j=function(){var m=h(this);var l=h(this).data("options");var k=h(m).parent().find("label[for="+h(m).attr("name")+"]");if(m.prop("checked")){k.addClass(l.activeClass)}else{k.removeClass(l.activeClass)}};var f=function(k){var m=h(this);var l=h(this).data("options");j.call(m);k.data=m.val();if(l.changeHandler!=undefined){l.changeHandler(k)}};var b=function(){var k=jQuery(this).parent();var m=null;var l=false;do{m=jQuery(k).get(0);if(m&&m.nodeName&&m.nodeName.toLowerCase()=="form"){break}l=(k.length>0);k=k.parent()}while(l);var n=function(){setTimeout(a,100)};jQuery(m).unbind("reset",n).bind("reset",n)};var a=function(){var l;for(var k in g){l=g[k];j.call(l)}};var d={init:function(k){return this.each(function(m){var l=h(this).data("options");if(!l){l={};h.extend(l,c);h(this).data("options",l)}h.extend(l,k);l.id=(new Date()).getTime();h(this).unbind("change",f).bind("change",f);j.call(h(this));if(c.bindreset){g[l.id]=this;b.call(this)}})},checked:function(){return h(this).prop("checked")},selectedValue:function(k){if(!k){return h(this).prop("checked")}else{h(this).prop("checked",value);j.call(h(this))}return},toggleCheck:function(l){var k=h(this).prop("checked");h(this).prop("checked",!k);j.call(h(this))},changeHandler:function(l){var k=h(this).data("options");k.changeHandler=l},destroy:function(){delete g[this];h(this).unbind("change",f)}};h.fn.checkbox=function(k){if(typeof k=="string"){return d[k].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof k==="object"||!k){return d.init.apply(this,arguments)}else{h.error("Method "+method+" does not exist on jQuery.checkbox")}}}})(jQuery);(function(g){var c=[];var f={changeHandler:function(j){},activeClass:"Active",bindreset:true};var h=function(){var k;var l;var j=g(this).parent().find("label[for='"+g(this).attr("id")+"']");l=g(this).attr("name");k=c[l].options;g(this).parent().find('input:radio[name="'+l+'"]').each(function(){if(g(this).prop("checked")==true){g(this).parent().find("label[for='"+g(this).attr("id")+"']").addClass(k.activeClass)}else{g(this).parent().find("label[for='"+g(this).attr("id")+"']").removeClass(k.activeClass)}})};var b=function(){var j=jQuery(this).parent();var l=null;var k=false;do{l=jQuery(j).get(0);if(l&&l.nodeName&&l.nodeName.toLowerCase()=="form"){break}k=(j.length>0);j=j.parent()}while(k);var m=function(){setTimeout(a,100)};jQuery(l).unbind("reset",m).bind("reset",m)};var a=function(){for(var j in c){var k=c[j].parent.find('input:radio[name="'+j+'"]').eq(0);h.call(k)}};var d={init:function(l){var k=g(this),j;var m=k.attr("name");if(m&&m!=""){if(!c[m]){c[m]={};c[m].options={}}g.extend(c[m].options,f);g.extend(c[m].options,l);k.data(m,c[m]);c[m].parent=k.parent()}j=k.parent().find("label[for='"+k.attr("id")+"']");k.parent().find('input:radio[name="'+m+'"]').unbind("change").bind("change",function(n){var o=c[g(this).attr("name")].options;h.call(this);n.data=g(this).val();o.changeHandler(n);n.stopPropagation()});h.call(this);if(c[m].options.bindreset){b.call(this)}return this.each(function(n){})},selectedValue:function(m){var l=g(this).attr("name");var j;var k;if(!m){j=g(this).parent().find("input[name="+l+"]:checked");k=j.val();return k}else{j=g(this).parent().find("input[value="+m+"]:radio");g(this).parent().find("input[name="+l+"]:radio").prop("checked",false);j.prop("checked",true);h.call(j)}return},changeHandler:function(k){var j=g(this).data("options");j.changeHandler=k}};g.fn.radioGroup=function(j){if(typeof j=="string"){return d[j].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof j==="object"||!j){return d.init.apply(this,arguments)}else{g.error("Method "+method+" does not exist on jQuery.radioGroup")}}}})(jQuery);function words(a){a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\s+/g," ");if(typeof a=="string"&&a!=""){return a.split(/\s+/)}return[]}function truncateText(g,f,b){if(!g.length||!f.length){return}var c=0,a=b||f.length,d="";for(;c<a;c++){d+=" "+f[c]}g.html(d+"...")}function truncateTextByLimitCharacter(d,b){if(typeof d!="string"||!d.length){return}if(d.length<=b){return d}var c=0,a=b||words.length,f="";for(;c<a;c++){f+=d[c]}f=f.trim();f+="...";return f}
/*!
	jQuery Colorbox v1.4.21 - 2013-06-06
	(c) 2013 Jack Moore - jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(O,n,ac){var P={transition:"elastic",speed:300,fadeOut:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,className:false,retinaImage:false,retinaUrl:false,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:false,returnFocus:true,trapFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},z="colorbox",X="cbox",t=X+"Element",ab=X+"_open",f=X+"_load",Z=X+"_complete",x=X+"_cleanup",ah=X+"_closed",k=X+"_purge",V,am,an,d,M,r,b,U,c,af,S,m,j,q,w,ad,v,W,B,D,K=O("<a/>"),ak,ao,o,h,a,y,N,p,F,ae,R,C,Q,aj="div",ai,I=0,ag;function L(ap,at,ar){var aq=n.createElement(ap);if(at){aq.id=X+at}if(ar){aq.style.cssText=ar}return O(aq)}function u(){return ac.innerHeight?ac.innerHeight:O(ac).height()}function H(aq){var ap=c.length,ar=(N+aq)%ap;return(ar<0)?ap+ar:ar}function T(ap,aq){return Math.round((/%/.test(ap)?((aq==="x"?af.width():u())/100):1)*parseInt(ap,10))}function E(aq,ap){return aq.photo||aq.photoRegex.test(ap)}function G(aq,ap){return aq.retinaUrl&&ac.devicePixelRatio>1?ap.replace(aq.photoRegex,aq.retinaSuffix):ap}function al(ap){if("contains" in am[0]&&!am[0].contains(ap.target)){ap.stopPropagation();am.focus()}}function Y(){var ap,aq=O.data(y,z);if(aq==null){ak=O.extend({},P);if(console&&console.log){console.log("Error: cboxElement missing settings object")}}else{ak=O.extend({},aq)}for(ap in ak){if(O.isFunction(ak[ap])&&ap.slice(0,2)!=="on"){ak[ap]=ak[ap].call(y)}}ak.rel=ak.rel||y.rel||O(y).data("rel")||"nofollow";ak.href=ak.href||O(y).attr("href");ak.title=ak.title||y.title;if(typeof ak.href==="string"){ak.href=O.trim(ak.href)}}function J(ap,aq){O(n).trigger(ap);K.trigger(ap);if(O.isFunction(aq)){aq.call(y)}}function A(){var aq,at=X+"Slideshow_",au="click."+X,ap,aw,av,ar;if(ak.slideshow&&c[1]){ap=function(){clearTimeout(aq)};aw=function(){if(ak.loop||c[N+1]){aq=setTimeout(Q.next,ak.slideshowSpeed)}};av=function(){ad.html(ak.slideshowStop).unbind(au).one(au,ar);K.bind(Z,aw).bind(f,ap).bind(x,ar);am.removeClass(at+"off").addClass(at+"on")};ar=function(){ap();K.unbind(Z,aw).unbind(f,ap).unbind(x,ar);ad.html(ak.slideshowStart).unbind(au).one(au,function(){Q.next();av()});am.removeClass(at+"on").addClass(at+"off")};if(ak.slideshowAuto){av()}else{ar()}}else{am.removeClass(at+"off "+at+"on")}}function g(ap){if(!R){y=ap;Y();c=O(y);N=0;if(ak.rel!=="nofollow"){c=O("."+t).filter(function(){var ar=O.data(this,z),aq;if(ar){aq=O(this).data("rel")||ar.rel||this.rel}return(aq===ak.rel)});N=c.index(y);if(N===-1){c=c.add(y);N=c.length-1}}V.css({opacity:parseFloat(ak.opacity),cursor:ak.overlayClose?"pointer":"auto",visibility:"visible"}).show();if(ai){am.add(V).removeClass(ai)}if(ak.className){am.add(V).addClass(ak.className)}ai=ak.className;B.html(ak.close).show();if(!F){F=ae=true;am.css({visibility:"hidden",display:"block"});S=L(aj,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(d);ao=M.height()+U.height()+d.outerHeight(true)-d.height();o=r.width()+b.width()+d.outerWidth(true)-d.width();h=S.outerHeight(true);a=S.outerWidth(true);ak.w=T(ak.initialWidth,"x");ak.h=T(ak.initialHeight,"y");Q.position();A();J(ab,ak.onOpen);D.add(q).hide();am.focus();if(ak.trapFocus){if(n.addEventListener){n.addEventListener("focus",al,true);K.one(ah,function(){n.removeEventListener("focus",al,true)})}}if(ak.returnFocus){K.one(ah,function(){O(y).focus()})}}aa()}}function s(){if(!am&&n.body){ag=false;af=O(ac);am=L(aj).attr({id:z,"class":O.support.opacity===false?X+"IE":"",role:"dialog",tabindex:"-1"}).hide();V=L(aj,"Overlay").hide();j=L(aj,"LoadingOverlay").add(L(aj,"LoadingGraphic"));an=L(aj,"Wrapper");d=L(aj,"Content").append(q=L(aj,"Title"),w=L(aj,"Current"),W=O('<button type="button"/>').attr({id:X+"Previous"}),v=O('<button type="button"/>').attr({id:X+"Next"}),ad=L("button","Slideshow"),j,B=O('<button type="button"/>').attr({id:X+"Close"}));an.append(L(aj).append(L(aj,"TopLeft"),M=L(aj,"TopCenter"),L(aj,"TopRight")),L(aj,false,"clear:left").append(r=L(aj,"MiddleLeft"),d,b=L(aj,"MiddleRight")),L(aj,false,"clear:left").append(L(aj,"BottomLeft"),U=L(aj,"BottomCenter"),L(aj,"BottomRight"))).find("div div").css({"float":"left"});m=L(aj,false,"position:absolute; width:9999px; visibility:hidden; display:none");D=v.add(W).add(w).add(ad);O(n.body).append(V,am.append(an,m))}}function l(){function ap(aq){if(!(aq.which>1||aq.shiftKey||aq.altKey||aq.metaKey||aq.ctrlKey)){aq.preventDefault();g(this)}}if(am){if(!ag){ag=true;v.click(function(){Q.next()});W.click(function(){Q.prev()});B.click(function(){Q.close()});V.click(function(){if(ak.overlayClose){Q.close()}});O(n).bind("keydown."+X,function(ar){var aq=ar.keyCode;if(F&&ak.escKey&&aq===27){ar.preventDefault();Q.close()}if(F&&ak.arrowKey&&c[1]&&!ar.altKey){if(aq===37){ar.preventDefault();W.click()}else{if(aq===39){ar.preventDefault();v.click()}}}});if(O.isFunction(O.fn.on)){O(n).on("click."+X,"."+t,ap)}else{O("."+t).live("click."+X,ap)}}return true}return false}if(O.colorbox){return}O(s);Q=O.fn[z]=O[z]=function(ap,ar){var aq=this;ap=ap||{};s();if(l()){if(O.isFunction(aq)){aq=O("<a/>");ap.open=true}else{if(!aq[0]){return aq}}if(ar){ap.onComplete=ar}aq.each(function(){O.data(this,z,O.extend({},O.data(this,z)||P,ap))}).addClass(t);if((O.isFunction(ap.open)&&ap.open.call(aq))||ap.open){g(aq[0])}}return aq};Q.position=function(ar,au){var aw,ay=0,aq=0,av=am.offset(),ap,at;af.unbind("resize."+X);am.css({top:-90000,left:-90000});ap=af.scrollTop();at=af.scrollLeft();if(ak.fixed){av.top-=ap;av.left-=at;am.css({position:"fixed"})}else{ay=ap;aq=at;am.css({position:"absolute"})}if(ak.right!==false){aq+=Math.max(af.width()-ak.w-a-o-T(ak.right,"x"),0)}else{if(ak.left!==false){aq+=T(ak.left,"x")}else{aq+=Math.round(Math.max(af.width()-ak.w-a-o,0)/2)}}if(ak.bottom!==false){ay+=Math.max(u()-ak.h-h-ao-T(ak.bottom,"y"),0)}else{if(ak.top!==false){ay+=T(ak.top,"y")}else{ay+=Math.round(Math.max(u()-ak.h-h-ao,0)/2)}}am.css({top:av.top,left:av.left,visibility:"visible"});ar=(am.width()===ak.w+a&&am.height()===ak.h+h)?0:ar||0;an[0].style.width=an[0].style.height="9999px";function ax(az){M[0].style.width=U[0].style.width=d[0].style.width=(parseInt(az.style.width,10)-o)+"px";d[0].style.height=r[0].style.height=b[0].style.height=(parseInt(az.style.height,10)-ao)+"px"}aw={width:ak.w+a+o,height:ak.h+h+ao,top:ay,left:aq};if(ar===0){am.css(aw)}am.dequeue().animate(aw,{duration:ar,complete:function(){ax(this);ae=false;an[0].style.width=(ak.w+a+o)+"px";an[0].style.height=(ak.h+h+ao)+"px";if(ak.reposition){setTimeout(function(){af.bind("resize."+X,Q.position)},1)}if(au){au()}},step:function(){ax(this)}})};Q.resize=function(aq){var ap;if(F){aq=aq||{};if(aq.width){ak.w=T(aq.width,"x")-a-o}if(aq.innerWidth){ak.w=T(aq.innerWidth,"x")}S.css({width:ak.w});if(aq.height){ak.h=T(aq.height,"y")-h-ao}if(aq.innerHeight){ak.h=T(aq.innerHeight,"y")}if(!aq.innerHeight&&!aq.height){ap=S.scrollTop();S.css({height:"auto"});ak.h=S.height()}S.css({height:ak.h});if(ap){S.scrollTop(ap)}Q.position(ak.transition==="none"?0:ak.speed)}};Q.prep=function(aq){if(!F){return}var au,ar=ak.transition==="none"?0:ak.speed;S.empty().remove();S=L(aj,"LoadedContent").append(aq);function ap(){ak.w=ak.w||S.width();ak.w=ak.mw&&ak.mw<ak.w?ak.mw:ak.w;return ak.w}function at(){ak.h=ak.h||S.height();ak.h=ak.mh&&ak.mh<ak.h?ak.mh:ak.h;return ak.h}S.hide().appendTo(m.show()).css({width:ap(),overflow:ak.scrolling?"auto":"hidden"}).css({height:at()}).prependTo(d);m.hide();O(p).css({"float":"none"});au=function(){var az=c.length,ax,ay="frameBorder",av="allowTransparency",aw;if(!F){return}function aA(){if(O.support.opacity===false){am[0].style.removeAttribute("filter")}}aw=function(){clearTimeout(C);j.hide();J(Z,ak.onComplete)};q.html(ak.title).add(S).show();if(az>1){if(typeof ak.current==="string"){w.html(ak.current.replace("{current}",N+1).replace("{total}",az)).show()}v[(ak.loop||N<az-1)?"show":"hide"]().html(ak.next);W[(ak.loop||N)?"show":"hide"]().html(ak.previous);if(ak.slideshow){ad.show()}if(ak.preloading){O.each([H(-1),H(1)],function(){var aE,aB,aC=c[this],aD=O.data(aC,z);if(aD&&aD.href){aE=aD.href;if(O.isFunction(aE)){aE=aE.call(aC)}}else{aE=O(aC).attr("href")}if(aE&&E(aD,aE)){aE=G(aD,aE);aB=n.createElement("img");aB.src=aE}})}}else{D.hide()}if(ak.iframe){ax=L("iframe")[0];if(ay in ax){ax[ay]=0}if(av in ax){ax[av]="true"}if(!ak.scrolling){ax.scrolling="no"}O(ax).attr({src:ak.href,name:(new Date()).getTime(),"class":X+"Iframe",allowFullScreen:true,webkitAllowFullScreen:true,mozallowfullscreen:true}).one("load",aw).appendTo(S);K.one(k,function(){ax.src="//about:blank"});if(ak.fastIframe){O(ax).trigger("load")}}else{aw()}if(ak.transition==="fade"){am.fadeTo(ar,1,aA)}else{aA()}};if(ak.transition==="fade"){am.fadeTo(ar,0,function(){Q.position(0,au)})}else{Q.position(ar,au)}};function aa(){var ar,at,aq=Q.prep,ap,au=++I;ae=true;p=false;y=c[N];Y();J(k);J(f,ak.onLoad);ak.h=ak.height?T(ak.height,"y")-h-ao:ak.innerHeight&&T(ak.innerHeight,"y");ak.w=ak.width?T(ak.width,"x")-a-o:ak.innerWidth&&T(ak.innerWidth,"x");ak.mw=ak.w;ak.mh=ak.h;if(ak.maxWidth){ak.mw=T(ak.maxWidth,"x")-a-o;ak.mw=ak.w&&ak.w<ak.mw?ak.w:ak.mw}if(ak.maxHeight){ak.mh=T(ak.maxHeight,"y")-h-ao;ak.mh=ak.h&&ak.h<ak.mh?ak.h:ak.mh}ar=ak.href;C=setTimeout(function(){j.show()},100);if(ak.inline){ap=L(aj).hide().insertBefore(O(ar)[0]);K.one(k,function(){ap.replaceWith(S.children())});aq(O(ar))}else{if(ak.iframe){aq(" ")}else{if(ak.html){aq(ak.html)}else{if(E(ak,ar)){ar=G(ak,ar);p=n.createElement("img");O(p).addClass(X+"Photo").bind("error",function(){ak.title=false;aq(L(aj,"Error").html(ak.imgError))}).one("load",function(){var av;if(au!==I){return}p.alt=O(y).attr("alt")||O(y).attr("data-alt")||"";if(ak.retinaImage&&ac.devicePixelRatio>1){p.height=p.height/ac.devicePixelRatio;p.width=p.width/ac.devicePixelRatio}if(ak.scalePhotos){at=function(){p.height-=p.height*av;p.width-=p.width*av};if(ak.mw&&p.width>ak.mw){av=(p.width-ak.mw)/p.width;at()}if(ak.mh&&p.height>ak.mh){av=(p.height-ak.mh)/p.height;at()}}if(ak.h){p.style.marginTop=Math.max(ak.mh-p.height,0)/2+"px"}if(c[1]&&(ak.loop||c[N+1])){p.style.cursor="pointer";p.onclick=function(){Q.next()}}p.style.width=p.width+"px";p.style.height=p.height+"px";setTimeout(function(){aq(p)},1)});setTimeout(function(){p.src=ar},1)}else{if(ar){m.load(ar,ak.data,function(aw,av){if(au===I){aq(av==="error"?L(aj,"Error").html(ak.xhrError):O(this).contents())}})}}}}}}Q.next=function(){if(!ae&&c[1]&&(ak.loop||c[N+1])){N=H(1);g(c[N])}};Q.prev=function(){if(!ae&&c[1]&&(ak.loop||N)){N=H(-1);g(c[N])}};Q.close=function(){if(F&&!R){R=true;F=false;J(x,ak.onCleanup);af.unbind("."+X);V.fadeTo(ak.fadeOut||0,0);am.stop().fadeTo(ak.fadeOut||0,0,function(){am.add(V).css({opacity:1,cursor:"auto"}).hide();J(k);S.empty().remove();setTimeout(function(){R=false},1)})}};Q.remove=function(){if(!am){return}am.stop();O.colorbox.close();am.stop().remove();V.remove();R=false;am=null;O("."+t).removeData(z).removeClass(t);O(n).unbind("click."+X)};Q.element=function(){return O(y)};Q.settings=P}(jQuery,document,window));
/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(k,G){var w=Math,p=G.createElement("div").style,B=(function(){var J="t,webkitT,MozT,msT,OT".split(","),I,H=0,m=J.length;for(;H<m;H++){I=J[H]+"ransform";if(I in p){return J[H].substr(0,J[H].length-1)}}return false})(),F=B?"-"+B.toLowerCase()+"-":"",o=u("transform"),z=u("transitionProperty"),n=u("transitionDuration"),q=u("transformOrigin"),D=u("transitionTimingFunction"),f=u("transitionDelay"),C=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),t=(/hp-tablet/gi).test(navigator.appVersion),l=u("perspective") in p,A="ontouchstart" in k&&!t,d=B!==false,g=u("transition") in p,h="onorientationchange" in k?"orientationchange":"resize",b=A?"touchstart":"mousedown",v=A?"touchmove":"mousemove",c=A?"touchend":"mouseup",y=A?"touchcancel":"mouseup",a=(function(){if(B===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[B]})(),s=(function(){return k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame||k.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),r=(function(){return k.cancelRequestAnimationFrame||k.webkitCancelAnimationFrame||k.webkitCancelRequestAnimationFrame||k.mozCancelRequestAnimationFrame||k.oCancelRequestAnimationFrame||k.msCancelRequestAnimationFrame||clearTimeout})(),E=l?" translateZ(0)":"",x=function(I,m){var J=this,H;J.wrapper=typeof I=="object"?I:G.getElementById(I);J.wrapper.style.overflow="hidden";J.scroller=J.wrapper.children[0];J.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:C,hideScrollbar:j,fadeScrollbar:j&&l,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(K){K.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(H in m){J.options[H]=m[H]}J.x=J.options.x;J.y=J.options.y;J.options.useTransform=d&&J.options.useTransform;J.options.hScrollbar=J.options.hScroll&&J.options.hScrollbar;J.options.vScrollbar=J.options.vScroll&&J.options.vScrollbar;J.options.zoom=J.options.useTransform&&J.options.zoom;J.options.useTransition=g&&J.options.useTransition;if(J.options.zoom&&C){E=""}J.scroller.style[z]=J.options.useTransform?F+"transform":"top left";J.scroller.style[n]="0";J.scroller.style[q]="0 0";if(J.options.useTransition){J.scroller.style[D]="cubic-bezier(0.33,0.66,0.66,1)"}if(J.options.useTransform){J.scroller.style[o]="translate("+J.x+"px,"+J.y+"px)"+E}else{J.scroller.style.cssText+=";position:absolute;top:"+J.y+"px;left:"+J.x+"px"}if(J.options.useTransition){J.options.fixedScrollbar=true}J.refresh();J._bind(h,k);J._bind(b);if(!A){if(J.options.wheelAction!="none"){J._bind("DOMMouseScroll");J._bind("mousewheel")}}if(J.options.checkDOMChanges){J.checkDOMTime=setInterval(function(){J._checkDOMChanges()},500)}};x.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(H){var m=this;switch(H.type){case b:if(!A&&H.button!==0){return}m._start(H);break;case v:m._move(H);break;case c:case y:m._end(H);break;case h:m._resize();break;case"DOMMouseScroll":case"mousewheel":m._wheel(H);break;case a:m._transitionEnd(H);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var I=this,H;if(!I[m+"Scrollbar"]){if(I[m+"ScrollbarWrapper"]){if(d){I[m+"ScrollbarIndicator"].style[o]=""}I[m+"ScrollbarWrapper"].parentNode.removeChild(I[m+"ScrollbarWrapper"]);I[m+"ScrollbarWrapper"]=null;I[m+"ScrollbarIndicator"]=null}return}if(!I[m+"ScrollbarWrapper"]){H=G.createElement("div");if(I.options.scrollbarClass){H.className=I.options.scrollbarClass+m.toUpperCase()}else{H.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(I.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(I.hScrollbar?"7":"2")+"px;top:2px;right:1px")}H.style.cssText+=";pointer-events:none;"+F+"transition-property:opacity;"+F+"transition-duration:"+(I.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(I.options.hideScrollbar?"0":"1");I.wrapper.appendChild(H);I[m+"ScrollbarWrapper"]=H;H=G.createElement("div");if(!I.options.scrollbarClass){H.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+F+"background-clip:padding-box;"+F+"box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";"+F+"border-radius:3px;border-radius:3px"}H.style.cssText+=";pointer-events:none;"+F+"transition-property:"+F+"transform;"+F+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+F+"transition-duration:0;"+F+"transform: translate(0,0)"+E;if(I.options.useTransition){H.style.cssText+=";"+F+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}I[m+"ScrollbarWrapper"].appendChild(H);I[m+"ScrollbarIndicator"]=H}if(m=="h"){I.hScrollbarSize=I.hScrollbarWrapper.clientWidth;I.hScrollbarIndicatorSize=w.max(w.round(I.hScrollbarSize*I.hScrollbarSize/I.scrollerW),8);I.hScrollbarIndicator.style.width=I.hScrollbarIndicatorSize+"px";I.hScrollbarMaxScroll=I.hScrollbarSize-I.hScrollbarIndicatorSize;I.hScrollbarProp=I.hScrollbarMaxScroll/I.maxScrollX}else{I.vScrollbarSize=I.vScrollbarWrapper.clientHeight;I.vScrollbarIndicatorSize=w.max(w.round(I.vScrollbarSize*I.vScrollbarSize/I.scrollerH),8);I.vScrollbarIndicator.style.height=I.vScrollbarIndicatorSize+"px";I.vScrollbarMaxScroll=I.vScrollbarSize-I.vScrollbarIndicatorSize;I.vScrollbarProp=I.vScrollbarMaxScroll/I.maxScrollY}I._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},C?200:0)},_pos:function(m,H){if(this.zoomed){return}m=this.hScroll?m:0;H=this.vScroll?H:0;if(this.options.useTransform){this.scroller.style[o]="translate("+m+"px,"+H+"px) scale("+this.scale+")"+E}else{m=w.round(m);H=w.round(H);this.scroller.style.left=m+"px";this.scroller.style.top=H+"px"}this.x=m;this.y=H;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,J){var I=this,K=m=="h"?I.x:I.y,H;if(!I[m+"Scrollbar"]){return}K=I[m+"ScrollbarProp"]*K;if(K<0){if(!I.options.fixedScrollbar){H=I[m+"ScrollbarIndicatorSize"]+w.round(K*3);if(H<8){H=8}I[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=H+"px"}K=0}else{if(K>I[m+"ScrollbarMaxScroll"]){if(!I.options.fixedScrollbar){H=I[m+"ScrollbarIndicatorSize"]-w.round((K-I[m+"ScrollbarMaxScroll"])*3);if(H<8){H=8}I[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=H+"px";K=I[m+"ScrollbarMaxScroll"]+(I[m+"ScrollbarIndicatorSize"]-H)}else{K=I[m+"ScrollbarMaxScroll"]}}}I[m+"ScrollbarWrapper"].style[f]="0";I[m+"ScrollbarWrapper"].style.opacity=J&&I.options.hideScrollbar?"0":"1";I[m+"ScrollbarIndicator"].style[o]="translate("+(m=="h"?K+"px,0)":"0,"+K+"px)")+E},_start:function(M){var L=this,H=A?M.touches[0]:M,I,m,N,K,J;if(!L.enabled){return}if(L.options.onBeforeScrollStart){L.options.onBeforeScrollStart.call(L,M)}if(L.options.useTransition||L.options.zoom){L._transitionTime(0)}L.moved=false;L.animating=false;L.zoomed=false;L.distX=0;L.distY=0;L.absDistX=0;L.absDistY=0;L.dirX=0;L.dirY=0;if(L.options.zoom&&A&&M.touches.length>1){K=w.abs(M.touches[0].pageX-M.touches[1].pageX);J=w.abs(M.touches[0].pageY-M.touches[1].pageY);L.touchesDistStart=w.sqrt(K*K+J*J);L.originX=w.abs(M.touches[0].pageX+M.touches[1].pageX-L.wrapperOffsetLeft*2)/2-L.x;L.originY=w.abs(M.touches[0].pageY+M.touches[1].pageY-L.wrapperOffsetTop*2)/2-L.y;if(L.options.onZoomStart){L.options.onZoomStart.call(L,M)}}if(L.options.momentum){if(L.options.useTransform){I=getComputedStyle(L.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(",");m=+(I[12]||I[4]);N=+(I[13]||I[5])}else{m=+getComputedStyle(L.scroller,null).left.replace(/[^0-9-]/g,"");N=+getComputedStyle(L.scroller,null).top.replace(/[^0-9-]/g,"")}if(m!=L.x||N!=L.y){if(L.options.useTransition){L._unbind(a)}else{r(L.aniTime)}L.steps=[];L._pos(m,N);if(L.options.onScrollEnd){L.options.onScrollEnd.call(L)}}}L.absStartX=L.x;L.absStartY=L.y;L.startX=L.x;L.startY=L.y;L.pointX=H.pageX;L.pointY=H.pageY;L.startTime=M.timeStamp||Date.now();if(L.options.onScrollStart){L.options.onScrollStart.call(L,M)}L._bind(v,k);L._bind(c,k);L._bind(y,k)},_move:function(O){var M=this,P=A?O.touches[0]:O,K=P.pageX-M.pointX,I=P.pageY-M.pointY,m=M.x+K,Q=M.y+I,L,J,H,N=O.timeStamp||Date.now();if(M.options.onBeforeScrollMove){M.options.onBeforeScrollMove.call(M,O)}if(M.options.zoom&&A&&O.touches.length>1){L=w.abs(O.touches[0].pageX-O.touches[1].pageX);J=w.abs(O.touches[0].pageY-O.touches[1].pageY);M.touchesDist=w.sqrt(L*L+J*J);M.zoomed=true;H=1/M.touchesDistStart*M.touchesDist*this.scale;if(H<M.options.zoomMin){H=0.5*M.options.zoomMin*Math.pow(2,H/M.options.zoomMin)}else{if(H>M.options.zoomMax){H=2*M.options.zoomMax*Math.pow(0.5,M.options.zoomMax/H)}}M.lastScale=H/this.scale;m=this.originX-this.originX*M.lastScale+this.x;Q=this.originY-this.originY*M.lastScale+this.y;this.scroller.style[o]="translate("+m+"px,"+Q+"px) scale("+H+")"+E;if(M.options.onZoom){M.options.onZoom.call(M,O)}return}M.pointX=P.pageX;M.pointY=P.pageY;if(m>0||m<M.maxScrollX){m=M.options.bounce?M.x+(K/2):m>=0||M.maxScrollX>=0?0:M.maxScrollX}if(Q>M.minScrollY||Q<M.maxScrollY){Q=M.options.bounce?M.y+(I/2):Q>=M.minScrollY||M.maxScrollY>=0?M.minScrollY:M.maxScrollY}M.distX+=K;M.distY+=I;M.absDistX=w.abs(M.distX);M.absDistY=w.abs(M.distY);if(M.absDistX<6&&M.absDistY<6){return}if(M.options.lockDirection){if(M.absDistX>M.absDistY+5){Q=M.y;I=0}else{if(M.absDistY>M.absDistX+5){m=M.x;K=0}}}M.moved=true;M._pos(m,Q);M.dirX=K>0?-1:K<0?1:0;M.dirY=I>0?-1:I<0?1:0;if(N-M.startTime>300){M.startTime=N;M.startX=M.x;M.startY=M.y}if(M.options.onScrollMove){M.options.onScrollMove.call(M,O)}},_end:function(O){if(A&&O.touches.length!==0){return}var M=this,U=A?O.changedTouches[0]:O,P,T,I={dist:0,time:0},m={dist:0,time:0},L=(O.timeStamp||Date.now())-M.startTime,Q=M.x,N=M.y,S,R,H,K,J;M._unbind(v,k);M._unbind(c,k);M._unbind(y,k);if(M.options.onBeforeScrollEnd){M.options.onBeforeScrollEnd.call(M,O)}if(M.zoomed){J=M.scale*M.lastScale;J=Math.max(M.options.zoomMin,J);J=Math.min(M.options.zoomMax,J);M.lastScale=J/M.scale;M.scale=J;M.x=M.originX-M.originX*M.lastScale+M.x;M.y=M.originY-M.originY*M.lastScale+M.y;M.scroller.style[n]="200ms";M.scroller.style[o]="translate("+M.x+"px,"+M.y+"px) scale("+M.scale+")"+E;M.zoomed=false;M.refresh();if(M.options.onZoomEnd){M.options.onZoomEnd.call(M,O)}return}if(!M.moved){if(A){if(M.doubleTapTimer&&M.options.zoom){clearTimeout(M.doubleTapTimer);M.doubleTapTimer=null;if(M.options.onZoomStart){M.options.onZoomStart.call(M,O)}M.zoom(M.pointX,M.pointY,M.scale==1?M.options.doubleTapZoom:1);if(M.options.onZoomEnd){setTimeout(function(){M.options.onZoomEnd.call(M,O)},200)}}else{if(this.options.handleClick){M.doubleTapTimer=setTimeout(function(){M.doubleTapTimer=null;P=U.target;while(P.nodeType!=1){P=P.parentNode}if(P.tagName!="SELECT"&&P.tagName!="INPUT"&&P.tagName!="TEXTAREA"){T=G.createEvent("MouseEvents");T.initMouseEvent("click",true,true,O.view,1,U.screenX,U.screenY,U.clientX,U.clientY,O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,0,null);T._fake=true;P.dispatchEvent(T)}},M.options.zoom?250:0)}}}M._resetPos(400);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}if(L<300&&M.options.momentum){I=Q?M._momentum(Q-M.startX,L,-M.x,M.scrollerW-M.wrapperW+M.x,M.options.bounce?M.wrapperW:0):I;m=N?M._momentum(N-M.startY,L,-M.y,(M.maxScrollY<0?M.scrollerH-M.wrapperH+M.y-M.minScrollY:0),M.options.bounce?M.wrapperH:0):m;Q=M.x+I.dist;N=M.y+m.dist;if((M.x>0&&Q>0)||(M.x<M.maxScrollX&&Q<M.maxScrollX)){I={dist:0,time:0}}if((M.y>M.minScrollY&&N>M.minScrollY)||(M.y<M.maxScrollY&&N<M.maxScrollY)){m={dist:0,time:0}}}if(I.dist||m.dist){H=w.max(w.max(I.time,m.time),10);if(M.options.snap){S=Q-M.absStartX;R=N-M.absStartY;if(w.abs(S)<M.options.snapThreshold&&w.abs(R)<M.options.snapThreshold){M.scrollTo(M.absStartX,M.absStartY,200)}else{K=M._snap(Q,N);Q=K.x;N=K.y;H=w.max(K.time,H)}}M.scrollTo(w.round(Q),w.round(N),H);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}if(M.options.snap){S=Q-M.absStartX;R=N-M.absStartY;if(w.abs(S)<M.options.snapThreshold&&w.abs(R)<M.options.snapThreshold){M.scrollTo(M.absStartX,M.absStartY,200)}else{K=M._snap(M.x,M.y);if(K.x!=M.x||K.y!=M.y){M.scrollTo(K.x,K.y,K.time)}}if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}M._resetPos(200);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}},_resetPos:function(I){var m=this,J=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,H=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(J==m.x&&H==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(B=="webkit"){m.hScrollbarWrapper.style[f]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(B=="webkit"){m.vScrollbarWrapper.style[f]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(J,H,I||0)},_wheel:function(L){var J=this,K,I,H,m,M;if("wheelDeltaX" in L){K=L.wheelDeltaX/12;I=L.wheelDeltaY/12}else{if("wheelDelta" in L){K=I=L.wheelDelta/12}else{if("detail" in L){K=I=-L.detail*3}else{return}}}if(J.options.wheelAction=="zoom"){M=J.scale*Math.pow(2,1/3*(I?I/Math.abs(I):0));if(M<J.options.zoomMin){M=J.options.zoomMin}if(M>J.options.zoomMax){M=J.options.zoomMax}if(M!=J.scale){if(!J.wheelZoomCount&&J.options.onZoomStart){J.options.onZoomStart.call(J,L)}J.wheelZoomCount++;J.zoom(L.pageX,L.pageY,M,400);setTimeout(function(){J.wheelZoomCount--;if(!J.wheelZoomCount&&J.options.onZoomEnd){J.options.onZoomEnd.call(J,L)}},400)}return}H=J.x+K;m=J.y+I;if(H>0){H=0}else{if(H<J.maxScrollX){H=J.maxScrollX}}if(m>J.minScrollY){m=J.minScrollY}else{if(m<J.maxScrollY){m=J.maxScrollY}}if(J.maxScrollY<0){J.scrollTo(H,m,0)}},_transitionEnd:function(H){var m=this;if(H.target!=m.scroller){return}m._unbind(a);m._startAni()},_startAni:function(){var M=this,H=M.x,m=M.y,K=Date.now(),L,J,I;if(M.animating){return}if(!M.steps.length){M._resetPos(400);return}L=M.steps.shift();if(L.x==H&&L.y==m){L.time=0}M.animating=true;M.moved=true;if(M.options.useTransition){M._transitionTime(L.time);M._pos(L.x,L.y);M.animating=false;if(L.time){M._bind(a)}else{M._resetPos(0)}return}I=function(){var N=Date.now(),P,O;if(N>=K+L.time){M._pos(L.x,L.y);M.animating=false;if(M.options.onAnimationEnd){M.options.onAnimationEnd.call(M)}M._startAni();return}N=(N-K)/L.time-1;J=w.sqrt(1-N*N);P=(L.x-H)*J+H;O=(L.y-m)*J+m;M._pos(P,O);if(M.animating){M.aniTime=s(I)}};I()},_transitionTime:function(m){m+="ms";this.scroller.style[n]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[n]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[n]=m}},_momentum:function(N,H,L,m,P){var M=0.0006,I=w.abs(N)/H,J=(I*I)/(2*M),O=0,K=0;if(N>0&&J>L){K=P/(6/(J/I*M));L=L+K;I=I*L/J;J=L}else{if(N<0&&J>m){K=P/(6/(J/I*M));m=m+K;I=I*m/J;J=m}}J=J*(N<0?-1:1);O=I/M;return{dist:J,time:w.round(O)}},_offset:function(m){var I=-m.offsetLeft,H=-m.offsetTop;while(m=m.offsetParent){I-=m.offsetLeft;H-=m.offsetTop}if(m!=this.wrapper){I*=this.scale;H*=this.scale}return{left:I,top:H}},_snap:function(O,N){var L=this,K,J,M,I,H,m;M=L.pagesX.length-1;for(K=0,J=L.pagesX.length;K<J;K++){if(O>=L.pagesX[K]){M=K;break}}if(M==L.currPageX&&M>0&&L.dirX<0){M--}O=L.pagesX[M];H=w.abs(O-L.pagesX[L.currPageX]);H=H?w.abs(L.x-O)/H*500:0;L.currPageX=M;M=L.pagesY.length-1;for(K=0;K<M;K++){if(N>=L.pagesY[K]){M=K;break}}if(M==L.currPageY&&M>0&&L.dirY<0){M--}N=L.pagesY[M];m=w.abs(N-L.pagesY[L.currPageY]);m=m?w.abs(L.y-N)/m*500:0;L.currPageY=M;I=w.round(w.max(H,m))||200;return{x:O,y:N,time:I}},_bind:function(I,H,m){(H||this.scroller).addEventListener(I,this,!!m)},_unbind:function(I,H,m){(H||this.scroller).removeEventListener(I,this,!!m)},destroy:function(){var m=this;m.scroller.style[o]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,k);m._unbind(b);m._unbind(v,k);m._unbind(c,k);m._unbind(y,k);if(!m.options.hasTouch){m._unbind("DOMMouseScroll");m._unbind("mousewheel")}if(m.options.useTransition){m._unbind(a)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var J=this,L,I,m,H,M=0,K=0;if(J.scale<J.options.zoomMin){J.scale=J.options.zoomMin}J.wrapperW=J.wrapper.clientWidth||1;J.wrapperH=J.wrapper.clientHeight||1;J.minScrollY=-J.options.topOffset||0;J.scrollerW=w.round(J.scroller.offsetWidth*J.scale);J.scrollerH=w.round((J.scroller.offsetHeight+J.minScrollY)*J.scale);J.maxScrollX=J.wrapperW-J.scrollerW;J.maxScrollY=J.wrapperH-J.scrollerH+J.minScrollY;J.dirX=0;J.dirY=0;if(J.options.onRefresh){J.options.onRefresh.call(J)}J.hScroll=J.options.hScroll&&J.maxScrollX<0;J.vScroll=J.options.vScroll&&(!J.options.bounceLock&&!J.hScroll||J.scrollerH>J.wrapperH);J.hScrollbar=J.hScroll&&J.options.hScrollbar;J.vScrollbar=J.vScroll&&J.options.vScrollbar&&J.scrollerH>J.wrapperH;L=J._offset(J.wrapper);J.wrapperOffsetLeft=-L.left;J.wrapperOffsetTop=-L.top;if(typeof J.options.snap=="string"){J.pagesX=[];J.pagesY=[];H=J.scroller.querySelectorAll(J.options.snap);for(I=0,m=H.length;I<m;I++){M=J._offset(H[I]);M.left+=J.wrapperOffsetLeft;M.top+=J.wrapperOffsetTop;J.pagesX[I]=M.left<J.maxScrollX?J.maxScrollX:M.left*J.scale;J.pagesY[I]=M.top<J.maxScrollY?J.maxScrollY:M.top*J.scale}}else{if(J.options.snap){J.pagesX=[];while(M>=J.maxScrollX){J.pagesX[K]=M;M=M-J.wrapperW;K++}if(J.maxScrollX%J.wrapperW){J.pagesX[J.pagesX.length]=J.maxScrollX-J.pagesX[J.pagesX.length-1]+J.pagesX[J.pagesX.length-1]}M=0;K=0;J.pagesY=[];while(M>=J.maxScrollY){J.pagesY[K]=M;M=M-J.wrapperH;K++}if(J.maxScrollY%J.wrapperH){J.pagesY[J.pagesY.length]=J.maxScrollY-J.pagesY[J.pagesY.length-1]+J.pagesY[J.pagesY.length-1]}}}J._scrollbar("h");J._scrollbar("v");if(!J.zoomed){J.scroller.style[n]="0";J._resetPos(400)}},scrollTo:function(m,N,M,L){var K=this,J=m,I,H;K.stop();if(!J.length){J=[{x:m,y:N,time:M,relative:L}]}for(I=0,H=J.length;I<H;I++){if(J[I].relative){J[I].x=K.x-J[I].x;J[I].y=K.y-J[I].y}K.steps.push({x:J[I].x,y:J[I].y,time:J[I].time||0})}K._startAni()},scrollToElement:function(m,I){var H=this,J;m=m.nodeType?m:H.scroller.querySelector(m);if(!m){return}J=H._offset(m);J.left+=H.wrapperOffsetLeft;J.top+=H.wrapperOffsetTop;J.left=J.left>0?0:J.left<H.maxScrollX?H.maxScrollX:J.left;J.top=J.top>H.minScrollY?H.minScrollY:J.top<H.maxScrollY?H.maxScrollY:J.top;I=I===undefined?w.max(w.abs(J.left)*2,w.abs(J.top)*2):I;H.scrollTo(J.left,J.top,I)},scrollToPage:function(I,H,K){var J=this,m,L;K=K===undefined?400:K;if(J.options.onScrollStart){J.options.onScrollStart.call(J)}if(J.options.snap){I=I=="next"?J.currPageX+1:I=="prev"?J.currPageX-1:I;H=H=="next"?J.currPageY+1:H=="prev"?J.currPageY-1:H;I=I<0?0:I>J.pagesX.length-1?J.pagesX.length-1:I;H=H<0?0:H>J.pagesY.length-1?J.pagesY.length-1:H;J.currPageX=I;J.currPageY=H;m=J.pagesX[I];L=J.pagesY[H]}else{m=-J.wrapperW*I;L=-J.wrapperH*H;if(m<J.maxScrollX){m=J.maxScrollX}if(L<J.maxScrollY){L=J.maxScrollY}}J.scrollTo(m,L,K)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(v,k);this._unbind(c,k);this._unbind(y,k)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(a)}else{r(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,L,K,J){var H=this,I=K/H.scale;if(!H.options.useTransform){return}H.zoomed=true;J=J===undefined?200:J;m=m-H.wrapperOffsetLeft-H.x;L=L-H.wrapperOffsetTop-H.y;H.x=m-m*I+H.x;H.y=L-L*I+H.y;H.scale=K;H.refresh();H.x=H.x>0?0:H.x<H.maxScrollX?H.maxScrollX:H.x;H.y=H.y>H.minScrollY?H.minScrollY:H.y<H.maxScrollY?H.maxScrollY:H.y;H.scroller.style[n]=J+"ms";H.scroller.style[o]="translate("+H.x+"px,"+H.y+"px) scale("+K+")"+E;H.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};function u(m){if(B===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return B+m}p=null;if(typeof exports!=="undefined"){exports.iScroll=x}else{k.iScroll=x}})(window,document);
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}if(a(d.target).attr("formnovalidate")!==undefined){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function f(){var g;if(c.settings.submitHandler){if(c.submitButton){g=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){g.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return f()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return f()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c=c&&b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(f,g){b[g]=c.attr(g);c.removeAttr(g)});return b},rules:function(f,b){var h=this[0];if(f){var d=a.data(h.form,"validator").settings;var k=d.rules;var l=a.validator.staticRules(h);switch(f){case"add":a.extend(l,a.validator.normalizeRule(b));delete l.messages;k[h.name]=l;if(b.messages){d.messages[h.name]=a.extend(d.messages[h.name],b.messages)}break;case"remove":if(!b){delete k[h.name];return l}var j={};a.each(b.split(/\s/),function(m,n){j[n]=l[n];delete l[n]});return j}}var g=a.validator.normalizeRules(a.extend({},a.validator.classRules(h),a.validator.attributeRules(h),a.validator.dataRules(h),a.validator.staticRules(h)),h);if(g.required){var c=g.required;delete g.required;g=a.extend({required:c},g)}return g}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!==Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!==Array){c=[c]}a.each(c,function(d,f){b=b.replace(new RegExp("\\{"+d+"\\}","g"),function(){return f})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(f,g){if(typeof g==="string"){g=g.split(/\s/)}a.each(g,function(j,h){b[h]=f})});var d=this.settings.rules;a.each(d,function(f,g){d[f]=a.validator.normalizeRule(g)});function c(h){var g=a.data(this[0].form,"validator"),f="on"+h.type.replace(/^validate/,"");if(g.settings[f]){g.settings[f].call(g,this[0],h)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c)!==false;if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(c){c=this.validationTargetFor(this.clean(c));var j=a(c).rules();var d=false;var h=this.elementValue(c);var b;for(var k in j){var g={method:k,parameters:j[k]};try{b=a.validator.methods[k].call(this,h,c,g.parameters);if(b==="dependency-mismatch"){d=true;continue}d=false;if(b==="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+c.id+", check the '"+g.method+"' method.",f)}throw f}}if(d){return}if(this.objectLength(j)){this.successList.push(c)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor===String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,f){var d=this.defaultMessage(c,f.method),b=/\$?\{(\d+)\}/g;if(typeof d==="function"){d=d.call(this,f.parameters,c)}else{if(b.test(d)){d=a.validator.format(d.replace(b,"{$1}"),f.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var c,d;for(c=0;this.errorList[c];c++){var b=this.errorList[c];if(this.settings.highlight){this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.html(d)}else{b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){if(this.settings.errorPlacement){this.settings.errorPlacement(b,a(c))}else{b.insertAfter(c)}}}if(!d&&this.settings.success){b.text("");if(typeof this.settings.success==="string"){b.addClass(this.settings.success)}else{this.settings.success(b,c)}}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var g={};var b=a(c);var d=b[0].getAttribute("type");for(var h in a.validator.methods){var f;if(h==="required"){f=b.get(0).getAttribute(h);if(f===""){f=true}f=!!f}else{f=b.attr(h)}if(/min|max/.test(h)&&(d===null||/number|range|text/.test(d))){f=Number(f)}if(f){g[h]=f}else{if(d===h&&d!=="range"){g[h]=true}}}if(g.maxlength&&/-1|2147483647|524288/.test(g.maxlength)){delete g.maxlength}return g},dataRules:function(c){var g,d,f={},b=a(c);for(g in a.validator.methods){d=b.data("rule-"+g.toLowerCase());if(d!==undefined){f[g]=d}}return f},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(g,f){if(f===false){delete c[g];return}if(f.param||f.depends){var d=true;switch(typeof f.depends){case"string":d=!!a(f.depends,b.form).length;break;case"function":d=f.depends.call(b,b);break}if(d){c[g]=f.param!==undefined?f.param:true}else{delete c[g]}}});a.each(c,function(d,f){c[d]=a.isFunction(f)?f(b):f});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(c){if(typeof c==="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!==undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,f){if(!this.depend(f,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(c,b)>0}return a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(g,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(g)){return false}var h=0,f=0,b=false;g=g.replace(/\D/g,"");for(var j=g.length-1;j>=0;j--){var d=g.charAt(j);f=parseInt(d,10);if(b){if((f*=2)>9){f-=9}}h+=f;b=!b}return(h%10)===0},minlength:function(d,b,f){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c>=f},maxlength:function(d,b,f){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c<=f},rangelength:function(d,b,f){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||(c>=f[0]&&c<=f[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},equalTo:function(c,b,f){var d=a(f);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return c===d.val()},remote:function(g,c,h){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;h=typeof h==="string"&&{url:h}||h;if(d.old===g){return d.valid}d.old=g;var b=this;this.startRequest(c);var f={};f[c.name]=g;a.ajax(a.extend(true,{url:h,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,success:function(k){b.settings.messages[c.name].remote=d.originalMessage;var m=k===true||k==="true";if(m){var j=b.formSubmitted;b.prepareElement(c);b.formSubmitted=j;b.successList.push(c);delete b.invalid[c.name];b.showErrors()}else{var n={};var l=k||b.defaultMessage(c,"remote");n[c.name]=d.message=a.isFunction(l)?l(g):l;b.invalid[c.name]=true;b.showErrors(n)}d.valid=m;b.stopRequest(c,m)}},h));return"pending"}}});a.format=a.validator.format}(jQuery));(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(g,f,h){var d=g.port;if(g.mode==="abort"){if(a[d]){a[d].abort()}a[d]=h}})}else{var b=c.ajax;c.ajax=function(f){var g=("mode" in f?f:c.ajaxSettings).mode,d=("port" in f?f:c.ajaxSettings).port;if(g==="abort"){if(a[d]){a[d].abort()}a[d]=b.apply(this,arguments);return a[d]}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(f){var g=a(f.target);if(g.is(d)){return b.apply(g,arguments)}})}})}(jQuery));(function(b,c){b.fn.truncate=function(f){var h=a(f);var j=this.html();var d=j.length;if(d>h.maxLength){var g=j.substring(0,h.maxLength);if(h.breakWord){g=g.replace(/ \w+$/,"")}this.html(g+h.afterText)}};var a=function(d){var f=b.extend({},b.fn.truncate.defaults,d||{});if(!b.isNumeric(f.maxLength)){f.maxLength=b.fn.truncate.defaults.maxLength}if(typeof f.afterText!="string"){f.afterText=b.fn.truncate.defaults.afterText}if(typeof f.breakWord!="boolean"){f.breakWord=false}return f};b.fn.truncate.defaults={maxLength:27,afterText:"...",breakWord:true}})(jQuery);(function(b){var m={},a,n,c=document,k=window,j=c.documentElement,l=b.expando;b.event.special.inview={add:function(d){m[d.guid+"-"+this[l]]={data:d,$element:b(this)}},remove:function(d){try{delete m[d.guid+"-"+this[l]]}catch(o){}}};function h(){var p,d,o={height:k.innerHeight,width:k.innerWidth};if(!o.height){p=c.compatMode;if(p||!b.support.boxModel){d=p==="CSS1Compat"?j:c.body;o={height:d.clientHeight,width:d.clientWidth}}}return o}function f(){return{top:k.pageYOffset||j.scrollTop||c.body.scrollTop,left:k.pageXOffset||j.scrollLeft||c.body.scrollLeft}}function g(){var q=b(),p,o=0;b.each(m,function(A,z){var x=z.data.selector,y=z.$element;q=q.add(x?y.find(x):y)});p=q.length;if(p){a=a||h();n=n||f();for(;o<p;o++){if(!b.contains(j,q[o])){continue}var v=b(q[o]),w={height:v.height(),width:v.width()},d=v.offset(),r=v.data("inview"),t,s,u;if(!n||!a){return}if(d.top+w.height>n.top&&d.top<n.top+a.height&&d.left+w.width>n.left&&d.left<n.left+a.width){t=(n.left>d.left?"right":(n.left+a.width)<(d.left+w.width)?"left":"both");s=(n.top>d.top?"bottom":(n.top+a.height)<(d.top+w.height)?"top":"both");u=t+"-"+s;if(!r||r!==u){v.data("inview",u).trigger("inview",[true,t,s])}}else{if(r){v.data("inview",false).trigger("inview",[false])}}}}}b(k).bind("scroll resize",function(){a=n=null});if(!j.addEventListener&&j.attachEvent){j.attachEvent("onfocusin",function(){n=null})}setInterval(g,250)})(jQuery);var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(){var v="0.4.3",l=window.jQuery||window.$||(window.$={}),g={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(H){return String(H).evalJSON()}||l.parseJSON||l.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||l.toJSON};if(!g.parse||!g.stringify){throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page")}var o={__jstorage_meta:{CRC32:{}}},c={jStorage:"{}"},A=null,q=0,k=false,m={},E=false,B=0,u={},z=+new Date(),C,D={isXML:function(I){var H=(I?I.ownerDocument||I:0).documentElement;return H?H.nodeName!=="HTML":false},encode:function(I){if(!this.isXML(I)){return false}try{return new XMLSerializer().serializeToString(I)}catch(H){try{return I.xml}catch(J){}}return false},decode:function(I){var H=("DOMParser" in window&&(new DOMParser()).parseFromString)||(window.ActiveXObject&&function(K){var L=new ActiveXObject("Microsoft.XMLDOM");L.async="false";L.loadXML(K);return L}),J;if(!H){return false}J=H.call("DOMParser" in window&&(new DOMParser())||window,I,"text/xml");return this.isXML(J)?J:false}};function s(){var H=false;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval");H=true;window.localStorage.removeItem("_tmptest")}catch(I){}}if(H){try{if(window.localStorage){c=window.localStorage;k="localStorage";B=c.jStorage_update}}catch(O){}}else{if("globalStorage" in window){try{if(window.globalStorage){if(window.location.hostname=="localhost"){c=window.globalStorage["localhost.localdomain"]}else{c=window.globalStorage[window.location.hostname]}k="globalStorage";B=c.jStorage_update}}catch(N){}}else{A=document.createElement("link");if(A.addBehavior){A.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(A);try{A.load("jStorage")}catch(M){A.setAttribute("jStorage","{}");A.save("jStorage");A.load("jStorage")}var L="{}";try{L=A.getAttribute("jStorage")}catch(K){}try{B=A.getAttribute("jStorage_update")}catch(J){}c.jStorage=L;k="userDataBehavior"}else{A=null;return}}}n();b();y();w();if("addEventListener" in window){window.addEventListener("pageshow",function(P){if(P.persisted){r()}},false)}}function f(){var J="{}";if(k=="userDataBehavior"){A.load("jStorage");try{J=A.getAttribute("jStorage")}catch(I){}try{B=A.getAttribute("jStorage_update")}catch(H){}c.jStorage=J}n();b();w()}function y(){if(k=="localStorage"||k=="globalStorage"){if("addEventListener" in window){window.addEventListener("storage",r,false)}else{document.attachEvent("onstorage",r)}}else{if(k=="userDataBehavior"){setInterval(r,1000)}}}function r(){var H;clearTimeout(E);E=setTimeout(function(){if(k=="localStorage"||k=="globalStorage"){H=c.jStorage_update}else{if(k=="userDataBehavior"){A.load("jStorage");try{H=A.getAttribute("jStorage_update")}catch(I){}}}if(H&&H!=B){B=H;j()}},25)}function j(){var H=g.parse(g.stringify(o.__jstorage_meta.CRC32)),L;f();L=g.parse(g.stringify(o.__jstorage_meta.CRC32));var J,I=[],K=[];for(J in H){if(H.hasOwnProperty(J)){if(!L[J]){K.push(J);continue}if(H[J]!=L[J]&&String(H[J]).substr(0,2)=="2."){I.push(J)}}}for(J in L){if(L.hasOwnProperty(J)){if(!H[J]){I.push(J)}}}G(I,"updated");G(K,"deleted")}function G(M,N){M=[].concat(M||[]);if(N=="flushed"){M=[];for(var L in m){if(m.hasOwnProperty(L)){M.push(L)}}N="deleted"}for(var K=0,H=M.length;K<H;K++){if(m[M[K]]){for(var J=0,I=m[M[K]].length;J<I;J++){m[M[K]][J](M[K],N)}}if(m["*"]){for(var J=0,I=m["*"].length;J<I;J++){m["*"][J](M[K],N)}}}}function p(){var H=(+new Date()).toString();if(k=="localStorage"||k=="globalStorage"){c.jStorage_update=H}else{if(k=="userDataBehavior"){A.setAttribute("jStorage_update",H);A.save("jStorage")}}r()}function n(){if(c.jStorage){try{o=g.parse(String(c.jStorage))}catch(H){c.jStorage="{}"}}else{c.jStorage="{}"}q=c.jStorage?String(c.jStorage).length:0;if(!o.__jstorage_meta){o.__jstorage_meta={}}if(!o.__jstorage_meta.CRC32){o.__jstorage_meta.CRC32={}}}function t(){a();try{c.jStorage=g.stringify(o);if(A){A.setAttribute("jStorage",c.jStorage);A.save("jStorage")}q=c.jStorage?String(c.jStorage).length:0}catch(H){}}function x(H){if(!H||(typeof H!="string"&&typeof H!="number")){throw new TypeError("Key name must be string or numeric")}if(H=="__jstorage_meta"){throw new TypeError("Reserved key name")}return true}function b(){var N,I,L,J,K=Infinity,M=false,H=[];clearTimeout(C);if(!o.__jstorage_meta||typeof o.__jstorage_meta.TTL!="object"){return}N=+new Date();L=o.__jstorage_meta.TTL;J=o.__jstorage_meta.CRC32;for(I in L){if(L.hasOwnProperty(I)){if(L[I]<=N){delete L[I];delete J[I];delete o[I];M=true;H.push(I)}else{if(L[I]<K){K=L[I]}}}}if(K!=Infinity){C=setTimeout(b,K-N)}if(M){t();p();G(H,"deleted")}}function w(){var K,I;if(!o.__jstorage_meta.PubSub){return}var H,J=z;for(K=I=o.__jstorage_meta.PubSub.length-1;K>=0;K--){H=o.__jstorage_meta.PubSub[K];if(H[0]>z){J=H[0];d(H[1],H[2])}}z=J}function d(J,K){if(u[J]){for(var I=0,H=u[J].length;I<H;I++){u[J][I](J,g.parse(g.stringify(K)))}}}function a(){if(!o.__jstorage_meta.PubSub){return}var J=+new Date()-2000;for(var I=0,H=o.__jstorage_meta.PubSub.length;I<H;I++){if(o.__jstorage_meta.PubSub[I][0]<=J){o.__jstorage_meta.PubSub.splice(I,o.__jstorage_meta.PubSub.length-I);break}}if(!o.__jstorage_meta.PubSub.length){delete o.__jstorage_meta.PubSub}}function h(H,I){if(!o.__jstorage_meta){o.__jstorage_meta={}}if(!o.__jstorage_meta.PubSub){o.__jstorage_meta.PubSub=[]}o.__jstorage_meta.PubSub.unshift([+new Date,H,I]);t();p()}function F(M,I){var H=M.length,L=I^H,K=0,J;while(H>=4){J=((M.charCodeAt(K)&255))|((M.charCodeAt(++K)&255)<<8)|((M.charCodeAt(++K)&255)<<16)|((M.charCodeAt(++K)&255)<<24);J=(((J&65535)*1540483477)+((((J>>>16)*1540483477)&65535)<<16));J^=J>>>24;J=(((J&65535)*1540483477)+((((J>>>16)*1540483477)&65535)<<16));L=(((L&65535)*1540483477)+((((L>>>16)*1540483477)&65535)<<16))^J;H-=4;++K}switch(H){case 3:L^=(M.charCodeAt(K+2)&255)<<16;case 2:L^=(M.charCodeAt(K+1)&255)<<8;case 1:L^=(M.charCodeAt(K)&255);L=(((L&65535)*1540483477)+((((L>>>16)*1540483477)&65535)<<16))}L^=L>>>13;L=(((L&65535)*1540483477)+((((L>>>16)*1540483477)&65535)<<16));L^=L>>>15;return L>>>0}l.jStorage={version:v,set:function(I,J,H){x(I);H=H||{};if(typeof J=="undefined"){this.deleteKey(I);return J}if(D.isXML(J)){J={_is_xml:true,xml:D.encode(J)}}else{if(typeof J=="function"){return undefined}else{if(J&&typeof J=="object"){J=g.parse(g.stringify(J))}}}o[I]=J;o.__jstorage_meta.CRC32[I]="2."+F(g.stringify(J),2538058380);this.setTTL(I,H.TTL||0);G(I,"updated");return J},get:function(H,I){x(H);if(H in o){if(o[H]&&typeof o[H]=="object"&&o[H]._is_xml){return D.decode(o[H].xml)}else{return o[H]}}return typeof(I)=="undefined"?null:I},deleteKey:function(H){x(H);if(H in o){delete o[H];if(typeof o.__jstorage_meta.TTL=="object"&&H in o.__jstorage_meta.TTL){delete o.__jstorage_meta.TTL[H]}delete o.__jstorage_meta.CRC32[H];t();p();G(H,"deleted");return true}return false},setTTL:function(I,H){var J=+new Date();x(I);H=Number(H)||0;if(I in o){if(!o.__jstorage_meta.TTL){o.__jstorage_meta.TTL={}}if(H>0){o.__jstorage_meta.TTL[I]=J+H}else{delete o.__jstorage_meta.TTL[I]}t();b();p();return true}return false},getTTL:function(I){var J=+new Date(),H;x(I);if(I in o&&o.__jstorage_meta.TTL&&o.__jstorage_meta.TTL[I]){H=o.__jstorage_meta.TTL[I]-J;return H||0}return 0},flush:function(){o={__jstorage_meta:{CRC32:{}}};t();p();G(null,"flushed");return true},storageObj:function(){function H(){}H.prototype=o;return new H()},index:function(){var H=[],I;for(I in o){if(o.hasOwnProperty(I)&&I!="__jstorage_meta"){H.push(I)}}return H},storageSize:function(){return q},currentBackend:function(){return k},storageAvailable:function(){return !!k},listenKeyChange:function(H,I){x(H);if(!m[H]){m[H]=[]}m[H].push(I)},stopListening:function(I,J){x(I);if(!m[I]){return}if(!J){delete m[I];return}for(var H=m[I].length-1;H>=0;H--){if(m[I][H]==J){m[I].splice(H,1)}}},subscribe:function(H,I){H=(H||"").toString();if(!H){throw new TypeError("Channel not defined")}if(!u[H]){u[H]=[]}u[H].push(I)},publish:function(H,I){H=(H||"").toString();if(!H){throw new TypeError("Channel not defined")}h(H,I)},reInit:function(){f()}};s()})();(function(a){a.fn.numeric=function(d,f){if(typeof d==="boolean"){d={decimal:d}}d=d||{};if(typeof d.negative=="undefined"){d.negative=true}var b=(d.decimal===false)?"":d.decimal||".";var c=(d.negative===true)?true:false;f=(typeof(f)=="function"?f:function(){});return this.data("numeric.decimal",b).data("numeric.negative",c).data("numeric.callback",f).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(h){var b=a.data(this,"numeric.decimal");var c=a.data(this,"numeric.negative");var d=h.charCode?h.charCode:h.keyCode?h.keyCode:0;if(d==13&&this.nodeName.toLowerCase()=="input"){return true}else{if(d==13){return false}}var f=false;if((h.ctrlKey&&d==97)||(h.ctrlKey&&d==65)){return true}if((h.ctrlKey&&d==120)||(h.ctrlKey&&d==88)){return true}if((h.ctrlKey&&d==99)||(h.ctrlKey&&d==67)){return true}if((h.ctrlKey&&d==122)||(h.ctrlKey&&d==90)){return true}if((h.ctrlKey&&d==118)||(h.ctrlKey&&d==86)||(h.shiftKey&&d==45)){return true}if(d<48||d>57){var g=a(this).val();if(g.indexOf("-")!==0&&c&&d==45&&(g.length===0||parseInt(a.fn.getSelectionStart(this),10)===0)){return true}if(b&&d==b.charCodeAt(0)&&g.indexOf(b)!=-1){f=false}if(d!=8&&d!=9&&d!=13&&d!=35&&d!=36&&d!=37&&d!=39&&d!=46){f=false}else{if(typeof h.charCode!="undefined"){if(h.keyCode==h.which&&h.which!==0){f=true;if(h.which==46){f=false}}else{if(h.keyCode!==0&&h.charCode===0&&h.which===0){f=true}}}}if(b&&d==b.charCodeAt(0)){if(g.indexOf(b)==-1){f=true}else{f=false}}}else{f=true}return f};a.fn.numeric.keyup=function(r){var l=a(this).val();if(l&&l.length>0){var f=a.fn.getSelectionStart(this);var u=a.fn.getSelectionEnd(this);var q=a.data(this,"numeric.decimal");var n=a.data(this,"numeric.negative");if(q!==""&&q!==null){var d=l.indexOf(q);if(d===0){this.value="0"+l}if(d==1&&l.charAt(0)=="-"){this.value="-0"+l.substring(1)}l=this.value}var c=[0,1,2,3,4,5,6,7,8,9,"-",q];var h=l.length;for(var p=h-1;p>=0;p--){var b=l.charAt(p);if(p!==0&&b=="-"){l=l.substring(0,p)+l.substring(p+1)}else{if(p===0&&!n&&b=="-"){l=l.substring(1)}}var g=false;for(var o=0;o<c.length;o++){if(b==c[o]){g=true;break}}if(!g||b==" "){l=l.substring(0,p)+l.substring(p+1)}}var s=l.indexOf(q);if(s>0){for(var m=h-1;m>s;m--){var t=l.charAt(m);if(t==q){l=l.substring(0,m)+l.substring(m+1)}}}this.value=l;a.fn.setSelection(this,[f,u])}};a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal");var f=a.data(this,"numeric.callback");var d=this.value;if(d!==""){var c=new RegExp("^\\d+$|^\\d*"+b+"\\d+$");if(!c.exec(d)){f.apply(this)}}};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(c){if(c.createTextRange){var b=document.selection.createRange().duplicate();b.moveEnd("character",c.value.length);if(b.text===""){return c.value.length}return c.value.lastIndexOf(b.text)}else{return c.selectionStart}};a.fn.getSelectionEnd=function(c){if(c.createTextRange){var b=document.selection.createRange().duplicate();b.moveStart("character",-c.value.length);return b.text.length}else{return c.selectionEnd}};a.fn.setSelection=function(d,c){if(typeof c=="number"){c=[c,c]}if(c&&c.constructor==Array&&c.length==2){if(d.createTextRange){var b=d.createTextRange();b.collapse(true);b.moveStart("character",c[0]);b.moveEnd("character",c[1]);b.select()}else{if(d.setSelectionRange){d.focus();d.setSelectionRange(c[0],c[1])}}}}})(jQuery);lpch={};lpch.BaseModel=Backbone.Model.extend({getSibling:function(a){if(this.collection){return isNaN(a)?collection.get(a):collection.at(a)}return null},bindCollection:function(a,b){if(!this._collectionBindings){this._collectionBindings={}}this._collectionBindings[a]=b},getID:function(b){var a=b?this.get(b):this;if(a){return a.get("id")}},getPosition:function(a){var c=!a?this.collection:(this.get(a) instanceof Backbone.Model?this.get(a).collection:this._collectionBindings[a]);if(c){var b=a?this.get(a):this;if(b){return c.indexOf(b)}}return -1},moveTo:function(b,c){var d=this._collectionBindings[b];if(d){var a=isNaN(c)?d.indexOf(d.get(c)):c;if(a>-1&&a<d.length){this.set(b,d.at(a))}}},movePrevious:function(a){var b=this._collectionBindings[a];if(b){this.moveTo(a,this.getPosition(a)-1)}},moveNext:function(a){var b=this._collectionBindings[a];if(b){this.moveTo(a,this.getPosition(a)+1)}}});lpch.DocumentModel=lpch.BaseModel.extend({defaults:{currentWidth:0,currentHeight:0,currentLayout:null,currentOrientation:null},initialize:function(){var a=this;this.layouts=new Backbone.Collection();this.layouts.model=lpch.Layout;this.layouts.add([new lpch.LayoutSmartphone(),new lpch.LayoutTablet(),new lpch.LayoutDesktop()]);this.zipcodes=new lpch.ZipCodeCollection();this.on("change:currentWidth",this.handleCurrentWidthChange,this);this.on("change:currentLayout",this.handleCurrentLayoutChange,this);this.templates=new Backbone.Collection();this.templates.model=lpch.BaseModel;$.get("../templates/lpch-templates.html",function(b){$(b).filter("script").each(function(c,d){a.templates.add({id:$(d).attr("id"),html:$(d).html()})});module.view.initializeComponents()})},getZipCodeGPSCoords:function(a){var b=this.zipcodes.find(function(c){return a==c.get("zip")});return b},getLayoutByWidth:function(a){var b=this.layouts.find(function(c){return a<=c.get("maximumWidth")});return b},handleCurrentWidthChange:function(a,b){this.set("currentLayout",this.getLayoutByWidth(b))},handleCurrentLayoutChange:function(a,b){this.set("currentOrientation",b.get("orientation"))}});lpch.Layout=lpch.BaseModel.extend({defaults:{minimumWidth:0,maximumWidth:Number.POSITIVE_INFINITY,orientation:null,swipeMinLength:0}});lpch.LayoutSmartphone=lpch.Layout.extend({defaults:{minimumWidth:320,maximumWidth:719,orientation:"smartphone",swipeMinLength:30}});lpch.LayoutTablet=lpch.Layout.extend({defaults:{minimumWidth:720,maximumWidth:979,orientation:"tablet",swipeMinLength:70}});lpch.LayoutDesktop=lpch.Layout.extend({defaults:{minimumWidth:980,maximumWidth:Number.POSITIVE_INFINITY,orientation:"desktop",swipeMinLength:70}});lpch.SearchClassRecordModel=Backbone.Model.extend({defaults:{"content-type":"class",description:"Friday and Saturday CB each class 8:30am-12:30pm","event-end-date":"Oct 06, 2013","event-end-time":"12:30 AM","event-start-date":"Oct 05, 2013","event-start-time":" 8:30 AM",id:"0x8680540001",name:"Test - Two Day Weekend Childbirth Prep Class",title:"Test - Two Day Weekend Childbirth Prep Class",url:"/en/classes/class-detail.page?evt=2dayCB&amp;uid=0x8680540001","image-small":"/web-resources/default/img/thumb-5.jpg","image-large":"/web-resources/default/img/thumb-5.jpg"}});lpch.SearchDoctorRecordModel=Backbone.Model.extend({defaults:{id:"abanti-chaudhuri",title:"Abanti Chaudhuri",path:"/templatedata/Entities/CareGiver/data/content-public/abanti-chaudhuri.xml","content-type":"caregiver",lang:"en_US",description:"",keywords:"",name:"Abanti Chaudhuri","mso-id":"41789",type:"Doctor","lang-spoken":"en",quote:"",introduction:"","manual-links":"","qualification-degrees":"","qualification-titles":"","qualification-specialities":"","qualification-schooling":"",address:"",telecom:"",hours:"",db_id:"41789",db_last_name:"Chaudhuri",db_first_name:"Abanti",db_middle_initial:"",db_suffix:"",db_degree:"MD",db_administrativetitle:"",db_academictitle:"Clinical Assistant Professor",db_subspecialty1:"",db_subspecialty2:"",db_subspecialty3:"",db_subspecialty4:"",db_date_on_staff:"2010-09-01 00:00:00.000",db_location1office_name:"Pediatric Nephrology Clinic",db_researchinterest1:"",db_researchinterest2:"",db_researchinterest3:"",db_researchinterest4:"",db_clinicalphone:"6507240353",db_physicianreferralphone:"8007565000",db_fax_number:"6507216685",db_faccode:"LPCH",db_practicelocation:"S",db_mailname:"Pediatric Nephrology",db_mailaddress1:"300 Pasteur Dr MC 5208",db_mailaddress2:"G306",db_mailcity:"Stanford",db_mailstate:"CA",db_mailzip:"94305",db_officephone:"6507237903",db_gender:"F",db_specialty:"Nephrology",db_location1address1:"770 Welch Rd Ste 300",db_location1address2:"",db_location1city:"Palo Alto",db_location1state:"CA",db_location1zip:"94304",db_specialtyid:["21","25"],db_modifier:["Pediatric","Pediatric"],db_searchSpecialty:["Kidney Transplantation","Nephrology (Kidney)"],db_location2address1:["Women & Children's Center"],db_location2address2:["3700 California Street, B555"],db_location2office_name:["California Pacific Medical Center"],db_location2city:["San Francisco"],db_location2state:["CA"],db_location2zip:["94118"],db_profEdu_universityName:["RG Kar Medical College, Calcutta University"],db_profEdu_universityCity:[""],db_profEdu_universityState:[""],db_profEdu_universityThruData:["02/1994"],db_residency_universityName:["Kaiser Foundation Hospital-Oakland","Manchester University - St Mary's Hospital"],db_residency_universityCity:["Oakland","Manchester"],db_residency_universityState:["CA",""],db_residency_universityThruData:["06/2007","08/2003"],db_fellowship_universityName:["Lucile Packard Children's Hospital"],db_fellowship_universityCity:["Palo Alto"],db_fellowship_universityState:["CA"],db_fellowship_universityThruData:["06/2010"],db_boardCert_specialtyName:["General Pediatrics"],db_boardCert_boardName:["American Board of Pediatrics"],db_boardCert_certifiedYear:["2007"],db_photo_fileName:["chaudhuriAbanti.jpg"],db_photo_associatedURL:["http://med.stanford.edu/profiles/Abanti_Chaudhuri/"],db_photo_fileExists:["1"],db_fellowship_type:["Fellowship"],db_fellowship_university_name:["Lucile Packard Children's Hospital"],db_fellowship_university_city:["Palo Alto"],db_fellowship_university_state:["CA"],db_fellowship_university_country:[""],db_fellowship_university_thru_date:["06/2010"],db_medical_education_type:["Medical Education"],db_medical_education_university_name:["RG Kar Medical College, Calcutta University"],db_medical_education_university_city:[""],db_medical_education_university_state:[""],db_medical_education_university_country:["India"],db_medical_education_university_thru_date:["02/1994"],db_residency_type:["Residency","Residency"],db_residency_university_name:["Kaiser Foundation Hospital-Oakland","Manchester University - St Mary's Hospital"],db_residency_university_city:["Oakland","Manchester"],db_residency_university_state:["CA",""],db_residency_university_country:["","United Kingdom"],db_residency_university_thru_date:["06/2007","08/2003"]},initialize:function(){if(this.get("lang-spoken")==""){this.set("lang-spoken","en")}this.getGPSLocation()},getGPSLocation:function(){var a=this;this.set("gpsLocation",module.view.model.getZipCodeGPSCoords(this.get("db_location1zip")));if(this.get("gpsLocation")==undefined){$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+this.get("db_location1zip")+"&sensor=false",function(b){a.set("gpsLocation",new Backbone.Model({zip:a.get("db_location1zip"),lat:b.results[0].geometry.location.lat,lng:b.results[0].geometry.location.lng}))})}},getDistance:function(g,f){var d=Math.PI;var c=this.get("gpsLocation").get("lat");var b=this.get("gpsLocation").get("lng");var a=Math.sin(g*d/180)*Math.sin(c*d/180)+Math.cos(g*d/180)*Math.cos(c*d/180)*Math.cos(Math.abs((b*d/180)-(f*d/180)));a=Math.atan((Math.sqrt(1-Math.pow(a,2)))/a);return(1.852*60*((a/d)*180))/1.609344}});lpch.SearchDocumentRecordModel=Backbone.Model.extend({defaults:{id:"Document1",category:"Documents","content-type":"webcrawl",url:"Classes",title:"",content:"",_version_:0,"image-small":"/web-resources/default/img/thumb-6.jpg","image-large":"/web-resources/default/img/thumb-6.jpg"}});lpch.SearchLocationRecordModel=Backbone.Model.extend({defaults:{id:"1000-welch-road-palo-alto-ca-94304",title:"1000-welch-road-palo-alto-ca-94304",path:"/templatedata/Entities/Location/data/content-public/1000-welch-road-palo-alto-ca-94304.xml","content-type":"location",lang:"en_US",description:"",keywords:"",name:"",type:"","services-glance":"","address-a":"1000 Welch Road","address-b":"","address-c":"",city:"Palo Alto",zip:"94304",state:"CA","long":"-122.1788401",lat:"37.4359791",telecom:"",hours:""}});lpch.SearchResultsCollection=Backbone.Collection.extend({initialize:function(){this.classCollection=[];this.serviceCollection=[];this.caregiverCollection=[];this.locationCollection=[];this.webcrawlCollection=[];this.defaultCollection=[]},model:function(b,a){var c;switch(b["content-type"]){case"class":c=new lpch.SearchClassRecordModel(b);a.collection.classCollection.push(c);break;case"location":c=new lpch.SearchLocationRecordModel(b);a.collection.locationCollection.push(c);break;case"service":c=new lpch.SearchServiceRecordModel(b);a.collection.serviceCollection.push(c);break;case"caregiver":c=new lpch.SearchDoctorRecordModel(b);a.collection.caregiverCollection.push(c);break;case"webcrawl":c=new lpch.SearchDocumentRecordModel(b);a.collection.webcrawlCollection.push(c);break;default:c=new lpch.SearchDocumentRecordModel(b);a.collection.defaultCollection.push(c);break}return c},parse:function(a){return a.response.docs},clean:function(){this.remove(this.defaultCollection)}});lpch.ZipCodeCollection=Backbone.Collection.extend({initialize:function(){this.model=lpch.BaseModel;this.add([{zip:"93901",lat:36.6623815,lng:-121.6454222},{zip:"94025",lat:37.4484914,lng:-122.1802812},{zip:"94028",lat:37.4251299,lng:-122.173041},{zip:"94034",lat:48.5881467,lng:13.4359544},{zip:"94035",lat:37.41752,lng:-122.0525},{zip:"94040",lat:37.3785351,lng:-122.086585},{zip:"94041",lat:37.386812,lng:-122.0751549},{zip:"94062",lat:37.41089270000001,lng:-122.2880726},{zip:"94063",lat:37.5021585,lng:-122.2086579},{zip:"94303",lat:37.4530553,lng:-122.1178261},{zip:"94304",lat:37.3813444,lng:-122.1802812},{zip:"94305",lat:37.4135757,lng:-122.1689284},{zip:"94403",lat:37.5349925,lng:-122.3050823},{zip:"94538",lat:37.5042267,lng:-121.9643745},{zip:"94609",lat:37.8321173,lng:-122.2625529},{zip:"94705",lat:37.8646149,lng:-122.2341905},{zip:"95032",lat:37.2260616,lng:-121.9302449},{zip:"95035",lat:37.4517015,lng:-121.8676464},{zip:"95065",lat:37.0353977,lng:-121.9871217},{zip:"95128-2604",lat:37.3189149,lng:-121.9416226},{zip:"95819",lat:38.5678631,lng:-121.4399041}])}});lpch.SearchServiceRecordModel=Backbone.Model.extend({defaults:{id:"adolescent-medicine",title:"Adolescent Medicine",path:"/templatedata/Entities/Service/data/content-public/adolescent-medicine.xml","content-type":"service",lang:"en_US",description:"",keywords:"","related-caregiver":["abanti-chaudhuri","adam-r-frymoyer","zina-zarshenas-payman"],"related-caregiver-path":["/templatedata/Entities/CareGiver/data/content-public/abanti-chaudhuri.xml","/templatedata/Entities/CareGiver/data/content-public/adam-r-frymoyer.xml","/templatedata/Entities/CareGiver/data/content-public/zina-zarshenas-payman.xml"],"related-caregiver-label":["Abanti Chaudhuri","Adam R Frymoyer","Zina Zarshenas-Payman"],"related-location":["2160-appian-way-pinole-ca-94564"],"related-location-path":[""],"related-location-label":["Bayside Pediatric Medical Group"],name:"Adolescent Medicine",type:"Service",introduction:"<p>...</p>",address:"<p>...</p>",contacts:"<p>...</p>",hours:"<p>...</p>"}});lpch.BaseView=Backbone.View.extend({_configure:function(a){if(this.modelClass){this.model=new this.modelClass();this.model.set("view",this)}Backbone.View.prototype._configure.call(this,a)},initialize:function(){module.on("layoutChange",this.handleLayoutChange,this);module.on("viewportChange",this.handleViewportChange,this)},load:function(b,f,d){this.$el.children().hide();var g=this,c='<div class="ajax-loader"></div>',a=$(c).appendTo(this.$el);$.getJSON(b,d).done(function(h){g.$el.children().show();a.remove();f(h)})},handleLayoutChange:function(a){}});lpch.Document=lpch.BaseView.extend({modelClass:lpch.DocumentModel,initialize:function(){var b=this;this.setElement(document);var a=navigator.userAgent.toLowerCase();if(a.match(/iphone/i)||a.match(/ipad/i)){jQuery("html").addClass("ios")}if((/android/).test(a)){jQuery("html").addClass("android")}if(a.match(/os 6/i)){jQuery("html").addClass("ios6")}if(a.indexOf("msie 8")!=-1){$("html").addClass("ie8")}if(a.indexOf("msie")!=-1){$("html").addClass("ie")}else{if((/chrome/).test(a)){jQuery("html").addClass("chrome")}else{if((/firefox/).test(a)){jQuery("html").addClass("firefox")}else{if((/safari/).test(a)){jQuery("html").addClass("safari")}}}}$(".ls-canvas").wrap('<div class="wrapper" />')},initializeComponents:function(){var b=this;this.$el.find("input, textarea").placeholder();if($("html").hasClass("ie8")){this.$el.find(".youtube").each(function(){var c=$(this).attr("href");$(this).attr("href",c.replace("/embed/","/v/"))})}this.$el.find(".youtube").click(function(c){b.trackEvent($(this).attr("title"))}).colorbox({iframe:true,innerWidth:620,innerHeight:404,fixed:true,onComplete:function(){var d=module.view.getCurrentOrientation();if(d=="smartphone"){var c=module.view.getViewportWidth()-40;var f=(module.view.getViewportWidth()-40)*0.6511612;$.colorbox.resize({innerWidth:c,innerHeight:f})}}});$(window).resize(function(){b.model.set("currentWidth",b.getViewportWidth());b.model.set("currentHeight",b.getViewportHeight())});this.model.on("change:currentWidth",this.handleViewportChange,this);this.model.on("change:currentHeight",this.handleViewportChange,this);this.model.on("change:currentLayout",this.handleLayoutChange,this);this.model.set("currentWidth",this.getViewportWidth());this.model.set("currentHeight",this.getViewportHeight());try{addthis.init()}catch(a){console.log(a.message)}$(window).trigger("initializeComponents")},getViewportWidth:function(){var a=$(window).innerWidth();return a},getViewportHeight:function(){var a=$(window).innerHeight();return a},getCurrentLayout:function(){return this.model.get("currentLayout")},getCurrentOrientation:function(){return this.model.get("currentOrientation")},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))},handleViewportChange:function(a){module.trigger("viewportChange",this.model.get("currentWidth"),this.model.get("currentHeight"))},handleLayoutChange:function(c,f){module.trigger("layoutChange",f);var b=f.get("orientation");if(b=="smartphone"){var a=module.view.getViewportWidth()-40;var d=(module.view.getViewportWidth()-40)*0.6511612;$.colorbox.resize({innerWidth:a,innerHeight:d})}else{$.colorbox.resize({innerWidth:620,innerHeight:404})}},trackEvent:function(b,d,c){if(c==null||c==""){c=$(".nav-item.current .dropdown-btn").text();if(c==""){c="Marketing"}}if(d==null||d==""){d=document.title}console.log("send","event",c,d,b);try{ga("send","event",c,d,b)}catch(a){console.log(a.message)}}});lpch.FilterView=lpch.BaseView.extend({filterEventName:"filter.default",events:{"submit form":"submitFilter"},initialize:function(a){_.extend(this,a);module.vent.on("updateAllCriteria",this.updateAllCriteria,this);this.render()},render:function(){var a=this;if(module.view.getParameterByName("search-term")==""){this.$el.find(".results-doctor").hide();this.$el.find(".search-doctor").addClass("pad")}else{this.$el.find("#frm-search-doctor-header").hide()}this.$el.find("#zipcode").numeric();this.$el.find(".selectpicker").bind("change.update",function(b){module.view.trackEvent($(b.currentTarget).next().find("button .filter-option").text(),"Filter","Search");if($(this).attr("id")!="slSpecialty"){a.updateAllCriteria()}}).selectpicker();this.$el.find(".toggle-filter").click(function(){var b=$(this);$(".filter-inner").stop(true,true).slideToggle(function(){b.toggleClass("expand").toggleClass("collapse")});return false});this.$el.find("input[name='db_location1zip']").blur(function(){a.updateAllCriteria()});this.$el.find(".doctor-search-btn .btn").click(function(d){d.preventDefault();var b=a.$el.find(".search-doctor form");var c=b.attr("action")+"?tab=doctors&search-term=";if(b.find(".doctor-name input").val()!=""){c+=b.find(".doctor-name input").val();window.location=c}else{if(b.find("#slSpecialty").val()!=""){c+=b.find("#slSpecialty").val();window.location=c}}});this.$el.find(".search-doctor form .doctor-name input").bind("keypress",function(b){if(b.keyCode==13){a.$el.find(".doctor-search-btn .btn").trigger("click")}});this.updateAllCriteria()},updateAllCriteria:function(){var d=this;var a=this.$el.find("form#frm-filter-doctor").serializeArray();var b={};$.each(a,function(f){b[a[f].name]=a[f].value});if(b.db_location1zip!=""){var c="http://maps.googleapis.com/maps/api/geocode/json?address="+b.db_location1zip+"&sensor=false";$.getJSON(c,function(f){b.lat=f.results[0].geometry.location.lat;b.lng=f.results[0].geometry.location.lng;module.vent.trigger(d.filterEventName,b)})}else{module.vent.trigger(this.filterEventName,b)}},submitFilter:function(a){a.preventDefault()}});$(window).bind("initializeComponents",function(){if($("#filter-doctor").length==0){return}new lpch.FilterView({el:"#filter-doctor",filterEventName:"filter.doctor",})});lpch.SearchAllItemView=lpch.BaseView.extend({tagName:"li",className:"row-fluid",initialize:function(){this.template=_.template(module.view.model.templates.get("allItemTemplate").get("html"));this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.SearchClassItemView=lpch.BaseView.extend({tagName:"li",className:"row-fluid",initialize:function(){this.template=_.template(module.view.model.templates.get("classItemTemplate").get("html"));this.render();this.model.on("hide",this.hide,this);this.model.on("show",this.hide,this)},hide:function(a){if(this.model.get("content-type")==a){this.$el.hide(0)}},show:function(a){if(this.model.get("content-type")==a){this.$el.show(0)}},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.SearchDoctorItemView=lpch.BaseView.extend({tagName:"li",className:"row-fluid",initialize:function(){this.template=_.template(module.view.model.templates.get("doctorItemTemplate").get("html"));this.model.on("hide",this.hide,this);this.model.on("show",this.show,this)},hide:function(a){if(this.model.get("content-type")==a){this.$el.hide(0)}},show:function(a){if(this.model.get("content-type")==a){this.$el.show(0)}},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.SearchItemListView=lpch.BaseView.extend({collection:null,sortedCollection:null,renderedCollection:null,itemViewClass:null,googleMap:null,criteria:undefined,category:"",filterEventName:null,templateID:"",numPages:null,currentPage:null,listID:null,resultsPerPage:12,resetPagination:false,events:{"click .type-switcher-wrap a":"switchType"},initialize:function(a){lpch.BaseView.prototype.initialize.call(this);_.extend(this,a);this.template=_.template(module.view.model.templates.get(this.templateID).get("html"));this.listID=this.$el.parent().attr("id");if(a.itemViewClass==null){throw new Error("Should have itemViewClass");return false}if(this.filterEventName!=""){module.vent.on(this.filterEventName,this.updateListView,this)}this.$el.html(this.template({}));if(this.category==""){this.sortedCollection=this.collection}else{this.sortedCollection=new Backbone.Collection(this.collection[this.category+"Collection"])}this.currentPage=1;if($.jStorage.get("lastSearchTab")&&$.jStorage.get("lastSearchTerm")==module.view.getParameterByName("search-term")){this.currentPage=$.jStorage.get(this.listID+"LastSearchPage")}$.jStorage.set(this.listID+"LastSearchPage",this.currentPage);this.numPages=Math.ceil(this.sortedCollection.models.length/this.resultsPerPage);this.updatePagination();this.updateListView(this.criteria);this.updateViewType("grid","list");module.on("showTab",this.handleShowTab,this);this.initUI()},initUI:function(){this.$el.find(".video").colorbox({iframe:true,innerWidth:620,innerHeight:404,onOpen:function(){module.view.trackEvent($(this).attr("title"))},onComplete:function(){var a=$("html").height();$("#cboxOverlay").height(a)}});$(".phone1").text(function(a,b){b=b.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");return b});if(module.view.getParameterByName("search-term")==""&&this.listID=="doctors"){this.$el.hide()}if(this.filterEventName){this.resetPagination=false;module.vent.trigger("updateAllCriteria")}},handleShowTab:function(a){if(this.el=="#locations-list"&&a=="#locations"){if(this.collection[this.category+"Collection"].length>0){this.$el.find(".results-body").show();if(!this.googleMap){this.googleMap=new lpch.GoogleMapSearchView({el:"#map-canvas"})}}else{this.$el.find(".results-body").hide()}}},addOne:function(d){var b=new this.itemViewClass({model:d});var c=this.$el.find(".results-body ul");var a=$(b.render().el);a.find(".avatar p").text(c.find("li").length+1);a.appendTo(c)},updateListView:function(c){_this=this;var a=0;var b=new Backbone.Collection();if(c!=undefined){this.$el.find(".results-body ul").empty();console.log(c);this.sortedCollection.each(function(f){var d=true;_.each(c,function(j,h){if(j==""){return}var g=f.get(h);if(h=="radius"&&!isNaN(c.lat)&&!isNaN(c.lng)&&c.radius!=""){var l=f.getDistance(c.lat,c.lng);if(l>Number(c.radius)){d=false;return false}}else{if(h=="lat"||h=="lng"){return false}else{if(h=="db_location1zip"&&c.radius!=""){return false}else{if(g!=j){d=false;return false}}}}},this);if(d){b.add(f);a++}},this);this.renderedCollection=b}else{if(this.category==""){if(a==0){a=this.collection.length}}else{if(a==0){a=this.collection[this.category+"Collection"].length}}this.renderedCollection=this.sortedCollection}if(this.resetPagination){this.currentPage=1;$.jStorage.set(this.listID+"LastSearchPage",this.currentPage)}this.resetPagination=true;this.numPages=Math.ceil(this.renderedCollection.models.length/this.resultsPerPage);this.updatePagination();this.render();this.addStyleForOddRow();this.$el.find(".result-count span").html(a);module.vent.trigger("updateTabLabelLength",{l:a,category:this.category==""?"all":this.category})},render:function(){this.$el.find(".results-body ul").empty();var c=(this.currentPage-1)*this.resultsPerPage;var a=this.currentPage*this.resultsPerPage;var b=new Backbone.Collection(this.renderedCollection.models.slice(c,a));b.each(this.addOne,this);return this},switchType:function(b){if(!$(b.target).hasClass("active")){var a=$(b.target).siblings().removeClass("active").end().addClass("active").attr("data-view-type");this.updateViewType(a=="grid"?"list":"grid",a)}return false},updatePagination:function(){var c=this;this.$el.find(".pagination ul").empty();var b='<li class="prev"><a href="#">previous</a></li>';for(var a=1;a<=this.numPages;a++){b+='<li><a href="#">'+a+"</a></li>"}b+='<li class="next"><a href="#">next</a></li>';this.$el.find(".pagination ul").append(b).find("li").not(".prev, .next").find("a").click(function(d){d.preventDefault();c.$el.find(".pagination ul li").removeClass("active");$(this).parent().addClass("active");c.currentPage=Number($(this).text());$.jStorage.set(c.listID+"LastSearchPage",c.currentPage);c.render();$(window).scrollTop(0)});this.$el.find(".pagination ul li.prev, .pagination ul li.next").find("a").click(function(d){d.preventDefault();if($(this).parent().hasClass("prev")){if(c.currentPage>1){c.currentPage--;$.jStorage.set(c.listID+"LastSearchPage",c.currentPage);c.render();$(window).scrollTop(0)}}else{if(c.currentPage<c.numPages){c.currentPage++;$.jStorage.set(c.listID+"LastSearchPage",c.currentPage);c.render();$(window).scrollTop(0)}}c.$el.find(".pagination ul li").removeClass("active");$(c.$el.find(".pagination ul li").not(".prev, .next")[c.currentPage-1]).addClass("active")});$(this.$el.find(".pagination ul li").not(".prev, .next")[this.currentPage-1]).addClass("active");if(this.numPages<=1){this.$el.find(".pagination").hide()}else{this.$el.find(".pagination").show()}},updateViewType:function(a,b){this.$el.find(".list-wrap").removeClass(a).addClass(b)},handleLayoutChange:function(a){if(a.get("orientation")=="smartphone"){this.updateViewType("grid","list")}else{if(this.$el.find(".type-switcher.active").attr("data-view-type")!="list"){this.updateViewType("list","grid")}}},handleViewportChange:function(){},addStyleForOddRow:function(){this.$("ul li").removeClass("odd").filter(function(){return $(this).css("display")!="none"}).filter(function(a){return a%2==0}).addClass("odd")}});lpch.SearchLocationItemView=lpch.BaseView.extend({tagName:"li",className:"row-fluid",initialize:function(){this.template=_.template(module.view.model.templates.get("locationItemTemplate").get("html"));this.render();this.model.on("hide",this.hide,this);this.model.on("show",this.hide,this)},hide:function(a){if(this.model.get("content-type")==a){this.$el.hide(0)}},show:function(a){if(this.model.get("content-type")==a){this.$el.show(0)}},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.SearchServiceItemView=lpch.BaseView.extend({tagName:"li",className:"row-fluid",initialize:function(){this.template=_.template(module.view.model.templates.get("serviceItemTemplate").get("html"));this.render();this.model.on("hide",this.hide,this);this.model.on("show",this.hide,this)},hide:function(a){if(this.model.get("content-type")==a){this.$el.hide(0)}},show:function(a){if(this.model.get("content-type")==a){this.$el.show(0)}},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.Accordion=lpch.BaseView.extend({initialize:function(){var d=this;this.$el.find(".mktgaccord-item-main-content ul:first-of-type, .mktgaccord-item-sidebar ul:first-of-type").addClass("first-of-type");this.$el.find(".mktgaccord-item-main-content .p50:first-of-type").addClass("first-of-type");this.$el.find(".accordion-nav li a").first().addClass("active").next().addClass("open");this.$el.find(".mktgaccord-item-container div:first-child").addClass("open");this.$el.find(".accordion-btn").click(function(f){if($(this).hasClass("no-action")){return false}f.preventDefault();if(!$(this).hasClass("active")){d.$el.find(".open").removeClass("open");d.$el.find("#"+$(this).attr("data-rel")).addClass("open");d.$el.find(".active").removeClass("active");$(this).addClass("active");module.view.trackEvent($(this).attr("title")||$(this).text())}});var c=$(".mktgaccord-component").first();var a=$(".mktgaccord-component").last();c.find(".accordion-title .arrow").addClass("bottom");a.find(".accordion-title .arrow").addClass("top");a.addClass("last-child");this.$el.find(".bottom").click(function(){$("html, body").stop().animate({scrollTop:a.offset().top},600)});this.$el.find(".top").click(function(){$("html, body").stop().animate({scrollTop:c.offset().top-c.find(".tabs-title").height()-15},600)});this.$el.find(".mktgaccord-item a").not(".youtube").click(function(f){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});var b=module.view.getCurrentOrientation();if(b=="smartphone"){this.$el.find(".accordion-title").unbind("click",this.toggleAccordion).bind("click",this.toggleAccordion).removeClass("down").addClass("up");this.$el.find(".accordion-title").next().hide();this.setHeightForSubNav();this.$el.find(".bottom").unbind("click");this.$el.find(".top").unbind("click")}lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){this.$el.find(".accordion-title").unbind("click",this.toggleAccordion).bind("click",this.toggleAccordion);this.$el.find(".accordion-title").removeClass("up").addClass("down");this.$el.find(".bottom").unbind("click");this.$el.find(".top").unbind("click")}else{this.$el.find(".accordion-title").unbind("click",this.toggleAccordion);this.$el.find(".accordion-wrapper").removeAttr("style");this.$(".accordion-item a").removeAttr("style")}},handleViewportChange:function(c,a){var b=module.view.getCurrentOrientation();if(b=="smartphone"){this.setHeightForSubNav()}},toggleAccordion:function(){var a=$(this);if(a.hasClass("down")){a.removeClass("down").addClass("up")}else{a.removeClass("up").addClass("down")}a.next().toggle()},setHeightForSubNav:function(){var a=module.view.getCurrentOrientation();if(a=="smartphone"){this.$(".accordion-item a").removeAttr("style");var b=this.getMaxHeightForSubNav();this.$(".accordion-item a").height(b)}},getMaxHeightForSubNav:function(){var a=this.$(".accordion-item a").eq(0).height();this.$(".accordion-item a").each(function(b){if($(this).height()>a){a=$(this).height()}});return a}});$(window).bind("initializeComponents",function(){$(".mktgaccord-component").each(function(a){new lpch.Accordion({el:this})})});lpch.ArticleContent=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.find("a").not(".youtube").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".article-content").each(function(a){new lpch.ArticleContent({el:this})})});lpch.BackToTop=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.find(".link-back-to-top").click(a.backToTop);lpch.BaseView.prototype.initialize.call(this)},backToTop:function(a){module.view.trackEvent($(this).attr("title")||$(this).text());$("html, body").animate({scrollTop:0},300);a.preventDefault()}});$(window).bind("initializeComponents",function(){$(".back-to-top").each(function(a){new lpch.BackToTop({el:this})})});lpch.Breadcrumb=lpch.BaseView.extend({scroller:null,initialize:function(){var a=this;this.$el.find(".dropdown-breadcrumb").bind("click",function(b){a.openBreadcrumb(b)});this.$el.find(".list-breadcrumb a").bind("click",function(b){module.view.trackEvent($(this).attr("title")||$(this).text())});$(document).bind("click touchstart",function(c){var b=module.view.getCurrentOrientation();if(b!="desktop"){if(!$(c.target).parents().is(a.$el)){a.closeBreadcrumb()}}});lpch.BaseView.prototype.initialize.call(this)},openBreadcrumb:function(b){b.preventDefault();b.stopPropagation();$(".list-breadcrumb").show();var a=this.$el.find(".list-breadcrumb")[0];this.scroller=new iScroll(a,{bounce:false})},closeBreadcrumb:function(a){$(".list-breadcrumb").hide();this.scroller=null},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="desktop"){$(".list-breadcrumb").show()}else{$(".list-breadcrumb").hide()}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".breadcrumb").each(function(a){new lpch.Breadcrumb({el:this})})});lpch.Calendar=lpch.BaseView.extend({lang:null,jsonObj:{},initialize:function(){var b=this;b.$el.find(".section-navigation a").bind("click",function(d){d.preventDefault();b.filterEvents(this);var c=module.view.getCurrentOrientation();if(c=="smartphone"){b.$el.find(".section-navigation h2").text($(this).text());$(this).trigger("itemClicked")}});var a=window.location.pathname.split("/");b.lang="en";if(a[1]==="es"){b.lang="es"}$.ajax({type:"GET",url:"/config-public/events/index.xml",dataType:"xml",success:function(c){b.jsonObj=b.xmlToJson(c);b.parseData("ALL")}});lpch.BaseView.prototype.initialize.call(this)},parseData:function(a){var g=this;if(a==="ALL"){a=""}var d="",b=0,f=[],c=[];g.$el.find(".noevents").hide();$.each(g.jsonObj.result.dataset.record,function(h,j){if(j.txtEvtEstName){if(!Array.indexOf){Array.prototype.indexOf=function(l){for(var k=0;k<this.length;k++){if(this[k]==l){return k}}return -1}}if(j.txtEvtAnsField02["#text"]&&j.txtEvtAnsField02["#text"].indexOf(a)!==-1){if(c.indexOf(j.txtEvtAnsField01["#text"])===-1){c.push(j.txtEvtAnsField01["#text"]);d+='<li class="event evt_'+j.txtEvtCode["#text"]+'" data-rel="'+j.txtEvtAnsField01["#text"]+'">';d+='<div class="event-name">';d+='<a href="/'+g.lang+"/classes/class-detail.page?evt="+j.txtEvtAnsField01["#text"]+'">';if(g.lang==="es"){if(typeof j.txtEvtAnsField05["#text"]!=="undefined"){d+=j.txtEvtAnsField05["#text"]}else{d+=j.txtEvtName["#text"]}}else{d+=j.txtEvtName["#text"]}d+="</a>";d+="</div>";d+='<div class="event-description">';if(g.lang==="es"){if(typeof j.txtEvtAnsField06["#text"]!=="undefined"){d+=j.txtEvtAnsField06["#text"]}else{if(j.txtEvtNotes["#text"]!=="undefined"){d+=j.txtEvtNotes["#text"]}}}else{if(j.txtEvtNotes["#text"]!=="undefined"){d+=j.txtEvtNotes["#text"]}}d+="</div>";d+='<div class="event-data">';d+='<span class="time">'+j.dteEvtStartTime["#text"]+" - "+j.dteEvtEndTime["#text"]+"</span>";if(Number(j.txtEvtAnsField08["#text"])==0){d+='<span class="time">Free</span>'}else{d+='<span class="time">$'+j.txtEvtAnsField08["#text"]+"</span>"}d+='<span class="details"><a href="/'+g.lang+"/classes/class-detail.page?evt="+j.txtEvtAnsField01["#text"]+'">Details</a></span>';d+="</div></li>";b++}else{if(f.indexOf(j.txtEvtAnsField01["#text"])===-1){f.push(j.txtEvtAnsField01["#text"])}}}}});if(b===0){g.$el.find(".noevents").show()}else{g.$el.find(".eventlist").html(d)}$.each(c,function(h,j){if(f.indexOf(j)===-1){g.$el.find('.eventlist .event[data-rel="'+j+'"] span.frequency').remove()}})},filterEvents:function(a){var c=this;var b=$(a).attr("class");if(!$(a).parent().hasClass("active")){c.$el.find(".active").removeClass("active");c.$el.find(a).parent().addClass("active");c.$el.find(".eventlist li").addClass("previous");c.$el.find(".events").fadeOut(function(){c.parseData(b);c.$el.find(".eventlist li.previous").remove();c.$el.find(".events").fadeIn()})}},xmlToJson:function(c){var h={};if(c.nodeType===1){if(c.attributes.length>0){h["@attributes"]={};for(var b=0;b<c.attributes.length;b++){var g=c.attributes.item(b);h["@attributes"][g.nodeName]=g.nodeValue}}}else{if(c.nodeType===3){h=c.nodeValue}}if(c.hasChildNodes()){for(var d=0;d<c.childNodes.length;d++){var f=c.childNodes.item(d);var k=f.nodeName;if(typeof(h[k])==="undefined"){h[k]=this.xmlToJson(f)}else{if(typeof(h[k].push)==="undefined"){var a=h[k];h[k]=[];h[k].push(a)}h[k].push(this.xmlToJson(f))}}}return h}});$(window).bind("initializeComponents",function(){$(".calendar.list").each(function(a){new lpch.Calendar({el:this})})});lpch.ContactForm=lpch.BaseView.extend({initialize:function(){var a=this;this.initSelect(this.$el);this.validate(this.$el);this.pageSuccess();this.$el.find('input[type="submit"]').click(function(b){module.view.trackEvent($(this).val())});lpch.BaseView.prototype.initialize.call(this)},handleViewportChange:function(b,a){},handleLayoutChange:function(b){var a=b.get("orientation");if($("#colorbox").hasClass("layer-success-form-template")){clearTimeout(this.timer);this.timer=setTimeout(function(){if(a=="smartphone"){$.colorbox.resize({innerWidth:320,innerHeight:380})}else{if(a=="tablet"){$.colorbox.resize({innerWidth:508,innerHeight:300})}else{$.colorbox.resize({innerWidth:564,innerHeight:273})}}},200)}},initSelect:function(){var a=this.$el.find(".selectpicker");a.selectpicker();a.change(function(){var c=$(this);var b=c.prev(".error");(c.val()!="")&&b.length&&b.hide()})},validate:function(a){var b=this;a.validate({ignore:"",errorPlacement:function(c,d){c.addClass("error-text-right");if(d.next().is(".add-on")){c.addClass("add-on").insertBefore(d.next(".add-on"))}else{c.insertBefore(d)}},rules:{fullname:"required",email:{required:true,email:true},inquiry:{required:true},message:"required"},messages:{fullname:"* Required Field",email:{required:"* Required Field",email:"* Invalid Email"},inquiry:"* Required Field",message:"* Required Field"}})},templateSuccess:function(){return'<div class="layout-success-container"><div class="content"><h3 class="heading">Thank You!</h3><p class="description">Est ma comnienis mos ex erferum rerereped quia si reperfe rnates eatibust, excerspid quunt, quas is ipsusciuntes aut eatusamus veliquat imint alit et quidign imoluptatur aceruptatur repudantet quia nulpa plaborepudis re ame imi, es simi, quat autem que Cuptaqu aepernatquis aut am volest, temolorest, consed magnam quat eum int quatur aut que parchit laut la sitias idit omnit ent maiorro.</p></div><p class="controls"><button class="btn btn-danger" type="button">Return to page</button></p></div>'},pageSuccess:function(){if(module.view.getParameterByName("success")=="true"){var a=this.templateSuccess();$.colorbox({html:a,innerWidth:564,innerHeight:273,onComplete:function(){var b=module.view.getCurrentOrientation();if(b=="smartphone"){$.colorbox.resize({innerWidth:320,innerHeight:400})}else{if(b=="tablet"){$.colorbox.resize({innerWidth:508,innerHeight:300})}}},onOpen:function(){$("#colorbox").addClass("layer-success-form-template")},onClosed:function(){$("#colorbox").removeClass("layer-success-form-template")}})}}});$(window).bind("initializeComponents",function(){new lpch.ContactForm({el:".contact-form"})});lpch.DoctorDetailTab=lpch.BaseView.extend({NAME:"Doctor Profile",pictureProfile:null,initialize:function(){var b=this;var a=module.view.getCurrentOrientation();b.$("#doctor-detail-tab a").click(function(c){c.preventDefault();b.showTab(c)});if(a!="smartphone"){$(".pull-right").find(".health-wellness-topic").prependTo(".health-wellness-topic-prepend")}else{$(".health-wellness-topic-prepend").find(".health-wellness-topic").appendTo(".health-wellness-topic-append")}b.showAutoTab();b.$(".introduction-sort .read-more").click(this.showIntroductionFull);this.$el.find(".tab-content a").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},showTab:function(b){var a=$(b.currentTarget);module.view.trackEvent($(a).find(".inner").text());a.tab("show")},handleLayoutChange:function(b){var a=b.get("orientation");var c=this;if(a!="smartphone"){$(".pull-right").find(".health-wellness-topic").prependTo(".health-wellness-topic-prepend");c.$(".introduction-sort .read-more").trigger("click")}else{$(".health-wellness-topic-prepend").find(".health-wellness-topic").appendTo(".health-wellness-topic-append");c.hideIntroductionFull()}c.showAutoTab()},showAutoTab:function(){var a=this.$el.find(".doctor-detail-tab-nav li");var b=a.length;var c=100/b;a.css("width",c+"%")},showIntroductionFull:function(a){a.preventDefault();$(".introduction-sort").hide();$(".introduction-full").show()},hideIntroductionFull:function(a){$(".introduction-sort").show();$(".introduction-full").hide()},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".doctor-detail-tab").each(function(a){new lpch.DoctorDetailTab({el:this})})});lpch.DoctorIntro=lpch.BaseView.extend({quoteSlider:null,initialize:function(){var a=this;this.$el.find("li").wrapInner("<div />");this.initSlider();lpch.BaseView.prototype.initialize.call(this)},initSlider:function(){this.quoteSlider=this.$el.find("ul").bxSlider({auto:false,minSlides:1,maxSlides:1,controls:true,useCSS:true,pager:false,startSlide:0,hideControlOnEnd:true,infiniteLoop:false,pause:6000,autoHover:true})},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".doctor-profile .span8 .doctor-intro").clone().prependTo(".doctor-profile .span4 .doctor-intro-wrap").addClass("visible-phone");$(".doctor-intro").each(function(a){new lpch.DoctorIntro({el:this})})});lpch.DoctorPicture=lpch.BaseView.extend({pictureProfile:null,initialize:function(){var b=this;var a=module.view.getCurrentOrientation();if(a=="smartphone"){b.initPictureProfilePhone()}else{b.initPictureProfileDesktop()}lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var c=this;var a=b.get("orientation");if(a!="smartphone"){c.reInitPictureProfileDesktop()}},initPictureProfilePhone:function(){this.pictureProfile=this.$el.find("#picture-profile").bxSlider({auto:false,minSlides:1,maxSlides:1,controls:true,useCSS:false,pager:false,startSlide:0,hideControlOnEnd:true,infiniteLoop:false,pause:6000,autoHover:true,mode:"fade",onSliderLoad:function(){}})},initPictureProfileDesktop:function(){var a=this.$el.find("#picture-profile");var b=$('<div class="thumb-picture-profile" id="bx-pager-custom"></div>');b.insertAfter(a);$(">li",a).each(function(){var d=$(this).index();var f=$(this).attr("data-img");var c=$('<a class="item-thumb" data-slide-index="'+d+'" href=""><img src="'+f+'" alt="Doctor Picture" /></a>');c.appendTo(b)});this.pictureProfile=this.$el.find("#picture-profile").bxSlider({pagerCustom:"#bx-pager-custom"});this.$el.find(".item-thumb").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))})},reInitPictureProfileDesktop:function(){$("#bx-pager-custom").remove();this.pictureProfile.destroySlider();this.initPictureProfileDesktop()},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".doctor-picture").each(function(a){new lpch.DoctorPicture({el:this})})});lpch.DoctorProfile=lpch.BaseView.extend({NAME:"Doctor Profile",initialize:function(){var b=this;var a=module.view.getCurrentOrientation();if(a=="desktop"){$(".span12").find(".related-locations").prependTo(".span8 .related-locations-wrap")}else{$(".span8").find(".related-locations").prependTo(".span12 .related-locations-wrap")}if(a=="tablet"){$(".span12").find(".doctor-profile-title").prependTo(".span8 .doctor-profile-title-wrap")}else{$(".span8").find(".doctor-profile-title").prependTo(".span12 .doctor-profile-title-wrap")}this.$el.find(".list-link-top a, .arrow-add, .btn-make, .btn-directions").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){if(orientation=="desktop"){$(".span12").find(".related-locations").prependTo(".span8 .related-locations-wrap")}else{$(".span8").find(".related-locations").prependTo(".span12 .related-locations-wrap")}if(orientation=="tablet"){$(".span12").find(".doctor-profile-title").prependTo(".span8 .doctor-profile-title-wrap")}else{$(".span8").find(".doctor-profile-title").prependTo(".span12 .doctor-profile-title-wrap")}$(".related-locations").each(function(b){new lpch.Location({el:this})})},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".doctor-profile").each(function(a){new lpch.DoctorProfile({el:this})})});lpch.Engagement=lpch.BaseView.extend({slide:null,initialize:function(){var a=this;this.$el.find(".item").last().addClass("last");this.$el.find(".engagement-item a").not(".youtube").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".engagement").each(function(a){new lpch.Engagement({el:this})})});lpch.EventDetail=lpch.BaseView.extend({lang:null,jsonObj:{},initialize:function(){var c=this;var b=window.location.pathname.split("/");var a=location.search.replace("?","").split("=");a=a[1];c.lang="en";if(b[1]==="es"){c.lang="es"}$.ajax({type:"GET",url:"/config-public/events/index.xml",dataType:"xml",success:function(d){c.jsonObj=c.xmlToJson(d);c.parseData(a)}});lpch.BaseView.prototype.initialize.call(this)},initMap:function(c){var b=null,a=null;b=new google.maps.Geocoder();b.geocode({address:c},function(h,f){if(f===google.maps.GeocoderStatus.OK){var g={zoom:14,center:h[0].geometry.location,disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP};a=new google.maps.Map(document.getElementById("map-canvas"),g);var d=new google.maps.Marker({map:a,position:h[0].geometry.location})}})},parseData:function(a){var d=this;if(a==="ALL"){a=""}var b="",c=false;$.each(d.jsonObj.result.dataset.record,function(o,j){if(typeof j.txtEvtAnsField01["#text"]!=="undefined"){if(j.txtEvtEstName){if(!Array.indexOf){Array.prototype.indexOf=function(q){for(var p=0;p<this.length;p++){if(this[p]==q){return p}}return -1}}if(j.txtEvtAnsField01["#text"].indexOf(a)!==-1){if(typeof j.txtEvtAnsField04["#text"]!=="undefined"){d.$el.find(".event-image img").attr("src",j.txtEvtAnsField04["#text"])}else{d.$el.find(".event-image img").attr("src","/web-resources/default/img/event-img-BFS.jpg")}var m;if(c===false){m=j.txtLocAdrLine1["#text"]+"+"+j.txtLocAdrCity["#text"]+",+"+j.txtLocAdrState["#text"];m=m.split(" ").join("+");d.initMap(m);d.$el.find(".event-info, .event-info .event-description").addClass(j.txtEvtAnsField01["#text"]);var g=j.txtEvtName["#text"];var f=j.txtEvtNotes["#text"];if(d.lang==="es"){if(typeof j.txtEvtAnsField05["#text"]!=="undefined"){g=j.txtEvtAnsField05["#text"];f=j.txtEvtAnsField06["#text"]}}d.$el.find(".event-info .event-title").html("<h2>"+g+"</h2>");d.$el.find(".event-info .event-description").html(f);var n="";n+="<strong>"+j.txtLocName["#text"]+"</strong><br>";n+=j.txtLocAdrLine1["#text"]+"<br>";n+=j.txtLocAdrCity["#text"]+", "+j.txtLocAdrState["#text"]+" "+j.txtLocAdrPostalCode["#text"]+"<br>";n+='<div class="map-link"><a href="https://maps.google.com/maps?q='+m+'" target="_blank">Maps &amp; directions...</a></div>';d.$el.find(".event-info .event-location").append(n);c=true}b+='<div class="event e_'+j.evtEncodedId["#text"]+'">';b+='<div class="event-date">';b+='<div class="event-day">'+j.dteEvtStartDate["#text"]+"</div>";b+='<div class="event-time">'+j.dteEvtStartTime["#text"]+" - "+j.dteEvtEndTime["#text"]+"</div>";b+="</div>";b+='<div class="event-location">';b+='<div class="location-name">'+j.txtLocName["#text"]+"</div>";b+='<div class="location-address">'+j.txtLocAdrLine1["#text"]+"</div>";b+='<div class="location-city">'+j.txtLocAdrCity["#text"]+", "+j.txtLocAdrState["#text"]+" "+j.txtLocAdrPostalCode["#text"]+"</div>";m=j.txtLocAdrLine1["#text"]+"+"+j.txtLocAdrCity["#text"]+"+"+j.txtLocAdrState["#text"]+"+"+j.txtLocAdrPostalCode["#text"];m=m.split(" ").join("+");b+='<div class="location-map"><a href="https://maps.google.com/maps?q='+m+'" target="_blank">Maps &amp; directions...</a></div>';b+="</div>";b+='<div class="event-cost">';var k=j.txtEvtAnsField03["#text"]-j.intEvtNumberRegistered["#text"];var h="seats";if(k===1){h="seat"}if(k<=0){b+='<div class="event-price">CLASS<br>FILLED</div>'}else{b+='<div class="event-remaining">'+k+" "+h+" remaining</div>";var l="$"+j.txtEvtAnsField08["#text"];if(l==="$0"){l="Free"}b+='<div class="event-price">'+l+"</div>"}b+="</div>";if(j.txtEvtAnsField09["#text"]===undefined||j.txtEvtAnsField09["#text"]==""||j.txtEvtAnsField09["#text"].toLowerCase()=="yes"){b+='<div class="event-register">';if(k<=0){b+='<div class="register-btn"><a href="#" class="btn disabled">Register</a></div>'}else{b+='<div class="register-btn"><a href="'+j.txtEvtPrimaryFormURL["#text"]+'" class="btn">Register</a></div>'}b+="</div>"}b+="</div>"}}}});d.$el.find(".eventlist").html(b)},xmlToJson:function(c){var h={};if(c.nodeType===1){if(c.attributes.length>0){h["@attributes"]={};for(var b=0;b<c.attributes.length;b++){var g=c.attributes.item(b);h["@attributes"][g.nodeName]=g.nodeValue}}}else{if(c.nodeType===3){h=c.nodeValue}}if(c.hasChildNodes()){for(var d=0;d<c.childNodes.length;d++){var f=c.childNodes.item(d);var k=f.nodeName;if(typeof(h[k])==="undefined"){h[k]=this.xmlToJson(f)}else{if(typeof(h[k].push)==="undefined"){var a=h[k];h[k]=[];h[k].push(a)}h[k].push(this.xmlToJson(f))}}}return h}});$(window).bind("initializeComponents",function(){new lpch.EventDetail({el:".event-detail"})});lpch.FBLikeBox=lpch.BaseView.extend({initialize:function(){var a=this;this.$el=$(".facebook-body");lpch.BaseView.prototype.initialize.call(this);FB.Event.subscribe("xfbml.render",function(){var b=setInterval(function(){if(a.$el.find("iframe").length!=0){a.$el.find("iframe").removeAttr("width").css({width:a.$el.width()});clearInterval(b)}},500)})},handleViewportChange:function(){console.log("asdasd");this.$el.find("iframe").removeAttr("width").css({width:this.$el.width()})}});$(window).bind("initializeComponents",function(){$(".social-youtube-videos").each(function(a){new lpch.FBLikeBox()})});lpch.Footer=lpch.BaseView.extend({NAME:"Footer",initialize:function(){var a=this;this.$el.find("a").click(function(b){module.view.trackEvent($(this).text(),$(this).parent().parent().parent().find("> h3").text(),a.NAME)});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".footer").each(function(a){new lpch.Footer({el:this})})});lpch.Feature=lpch.BaseView.extend({initialize:function(){var b=this;var a=module.view.getCurrentOrientation();if(a!="smartphone"){$(".img-top-text-bottom").find(".pull-right").prependTo(".img-top-text-bottom")}lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){$(".img-top-text-bottom").find(".pull-right").appendTo(".img-top-text-bottom")}else{$(".img-top-text-bottom").find(".pull-right").prependTo(".img-top-text-bottom")}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".feature-story").each(function(a){new lpch.Feature({el:this})})});lpch.GlobalCarousel=lpch.BaseView.extend({slide:null,initialize:function(){var a=this;lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){var b=this},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".global-carousel").each(function(a){new lpch.GlobalCarousel({el:this})})});lpch.GoogleMapSearchView=lpch.BaseView.extend({initialize:function(){var a=this;a.initMap();lpch.BaseView.prototype.initialize.call(this)},initMap:function(){var b=[];var f=searchResults.response.docs;var d=[];if(f.length>0){var c=0;$.each(f,function(m){if(f[m]["content-type"]=="location"){d[c]={id:f[m].id,title:f[m].title,name:f[m].name,description:f[m].description,keywords:f[m].keywords,"content-path":f[m]["path"],address:f[m]["address-a"],"address-city":f[m]["city"],"address-zip":f[m]["zip"],"address-state":f[m]["state"],"location-phone":f[m]["telecom"],latitude:f[m]["lat"],longitude:f[m]["long"],"location-map-image-small":f[m]["location-map-image-small"],"location-map-image-large":f[m]["location-map-image-large"],doctor:f[m].doctor};c++}})}var j=Number(d[0]["latitude"]);var l=Number(d[0]["longitude"]);var k=new google.maps.LatLng(j,l);var h="/web-resources/default/img/ico-point.png";map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:8,center:k,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:true,mapTypeId:google.maps.MapTypeId.ROADMAP});var g;var a=function(){if(g){g.setZIndex()}g=this;this.setZIndex(google.maps.Marker.MAX_ZINDEX+1)};$.each(d,function(n){var o=h;j=Number(d[n]["latitude"]);l=Number(d[n]["longitude"]);var m=new MarkerWithLabel({position:new google.maps.LatLng(j,l),draggable:false,clickable:true,map:map,labelContent:n+1,icon:o,title:d[n].name,labelAnchor:new google.maps.Point(20,50),labelClass:"markerwithlabel",});google.maps.event.addListener(m,"click",a)})},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});lpch.GoogleMapView=lpch.BaseView.extend({initialize:function(){var a=this;a.initMap();lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation");if(this.infoBubble){if(a=="tablet"||a=="smartphone"){this.infoBubble.setMinWidth(255)}else{if(a=="desktop"){this.infoBubble.setMinWidth(400)}}}},handleViewportChange:function(b,a){},initMap:function(){var g=window.defaultLocation.lat;var b=window.defaultLocation["long"];var d=new google.maps.LatLng(g,b);map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:12,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP});var f="/web-resources/default/img/map-maker-icon.png";var a=new google.maps.Marker({map:map,position:d,draggable:false,icon:f});var h=window.defaultLocation.content;var c="#fff";if(Modernizr.rgba){c="rgba(255,255,255,0.8)"}var j=new InfoBubble({minWidth:255,minHeight:110,borderRadius:0,padding:20,arrowSize:10,borderWidth:0,borderColor:c,backgroundColor:c,content:h,backgroundClassName:"mapBG",hideCloseButton:true,shadowStyle:1,arrowSize:20});j.open(map,a);google.maps.event.addListener(a,"click",function(k){j.open(map,a)});google.maps.event.addListenerOnce(map,"idle",function(){google.maps.event.trigger(a,"click")})}});$(window).bind("initializeComponents",function(){$(".google-map").each(function(){if(!google){return}setTimeout(function(){new lpch.GoogleMapView({el:this})},1300)})});lpch.Header=lpch.BaseView.extend({initialize:function(){var a=this;if($("html").hasClass("android")&&!$("html").hasClass("chrome")){this.$el.addClass("android-browser")}this.$el.find(".nav-btn").click(function(b){b.preventDefault();$(".ls-canvas").toggleClass("active");$("body").toggleClass("no-scroll");$("#mobile-content-overlay").toggle();module.trigger("toggleNav")});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){if(a.get("orientation")=="desktop"){if($(".ls-canvas").hasClass("active")){this.$el.find(".nav-btn").trigger("click")}}else{}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){new lpch.Header({el:"#header"})});lpch.HeroBanner=lpch.BaseView.extend({NAME:"Hero Banner",heroSlide:null,initialize:function(){var b=this;var a=(b.$el.find("#hero_banner li").length>1);this.heroSlide=this.$el.find("#hero_banner").bxSlider({auto:true,minSlides:1,maxSlides:1,controls:true,useCSS:false,pager:a,startSlide:0,hideControlOnEnd:true,infiniteLoop:false,pause:6000,autoHover:true,onSliderLoad:function(){$(".slide-content").removeClass("slide-content--fix-height-mobile");$(b.$el.find(".information .item")[0]).show()},onSlideBefore:function(f,d,c){$(b.$el.find(".information .item")[d]).hide();$(b.$el.find(".information .item")[c]).fadeIn()}});$.each(this.$el.find(".information .item"),function(c,d){if(b.heroSlide.getCurrentSlide()==c){$(d).show()}else{$(d).hide()}});this.$el.find(".information .item a").click(function(c){module.view.trackEvent($(this).text())});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){var b=this;$.each(this.$el.find(".information .item"),function(c,d){if(b.heroSlide.getCurrentSlide()==c){$(d).show()}else{$(d).hide()}})},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".hero-banner").each(function(a){new lpch.HeroBanner({el:this})})});lpch.HomeSlider=lpch.BaseView.extend({slider:null,initialize:function(){var a=this;if(module.view.getCurrentOrientation()!="smartphone"){this.initSlider()}$(".generic").addClass("nopad");this.$el.find("a").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},initSlider:function(){var c=this;if(this.slider){return}var a=(this.$el.find(".bxslider > li").length>1);if(a){var b=$(this.$el.find(".bxslider > li")[1]).attr("data-title");this.slider=this.$el.find(".bxslider").bxSlider({nextText:b,auto:false,minSlides:1,maxSlides:1,controls:true,useCSS:true,pager:false,startSlide:0,infiniteLoop:false,hideControlOnEnd:true,onSlideNext:function(d,j,f){var g=$(c.$el.find(".bxslider > li")[f+1]).attr("data-title");var h=$(c.$el.find(".bxslider > li")[j]).attr("data-title");c.$el.find(".bx-controls .bx-prev").text(h);c.$el.find(".bx-controls .bx-next").text(g)},onSlidePrev:function(d,j,f){var g=$(c.$el.find(".bxslider > li")[f+1]).attr("data-title");var h=$(c.$el.find(".bxslider > li")[f-1]).attr("data-title");c.$el.find(".bx-controls .bx-prev").text(h);c.$el.find(".bx-controls .bx-next").text(g)}})}},destroySlider:function(){if(!this.slider){return}this.slider.destroySlider();this.slider=null},handleLayoutChange:function(a){if(a.get("orientation")=="smartphone"){this.destroySlider()}else{this.initSlider()}},handleViewportChange:function(a){}});$(window).bind("initializeComponents",function(){$(".home-slider").each(function(a){new lpch.HomeSlider({el:this})})});lpch.HomeSliderIndicators=lpch.BaseView.extend({topArr:[],initialize:function(){var c=this;var a=module.view.getCurrentOrientation();var b=(a=="desktop")?75:110;$("body").scrollspy({target:".home-slider-indicators"});if(!Modernizr.touch){this.$el.find("li a").addClass("no-touch")}$(window).bind("scroll",function(){if($(this).scrollTop()<$(".home-slider").first().offset().top){c.$el.find("li").removeClass("active");c.$el.find("li").first().addClass("active")}});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(a){}});$(window).bind("initializeComponents",function(){$(".home-slider-indicators").each(function(a){new lpch.HomeSliderIndicators({el:this})})});lpch.ImageText=lpch.BaseView.extend({maxHeight:null,initialize:function(){var b=this;var a=module.view.getCurrentOrientation();b.changeHeight();this.$el.find("a").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});lpch.BaseView.prototype.initialize.call(this)},changeHeight:function(){var b=module.view.getCurrentOrientation();var a=$(".image-text-extra-component");var d=$(".image-text-second");var c=d.outerHeight();var f=this;this.maxHeight=0;a.each(function(){var g=$(".image-text-second",this).outerHeight();if(f.maxHeight<g){f.maxHeight=g}});if(b!="smartphone"){a.css({"min-height":this.maxHeight})}},handleLayoutChange:function(b){var a=b.get("orientation")},handleViewportChange:function(b,a){this.changeHeight()}});$(window).bind("initializeComponents",function(){$(".image-text-extra-component").each(function(a){new lpch.ImageText({el:this})})});lpch.LightSidebar=lpch.BaseView.extend({$searchInput:null,$cancelButton:null,$clearTextButton:null,$resultsContainer:null,isIE8:false,scrollResultList:null,searchResultsListView:null,SHOW:"show",HAS_RESULT:"has-result",IS_LOADING:"is-loading",URL:"/en/search/widget.page?search-term=",initialize:function(b){var c=this;var a=module.view.getCurrentOrientation();this.isIE8=$("html").hasClass("ie8");this.$clearTextButton=this.$(".icon.clear");this.$cancelButton=this.$(".button-cancel");this.$searchInput=this.$("#lightSideBarSearch");this.$resultsContainer=this.$(".light-sidebar-results");this.bind("show",this.setupIscroll);this.$searchInput.bind("keyup",c,c.loadResults);this.$cancelButton.bind("click",c,c.hide);this.$clearTextButton.bind("click",c,c.clearText);b.originalSearchTextBox.bind("focus",c,c.show);this.searchResultsListView=new lpch.LightSidebarResultsListView({el:this.$(".results-list")});this.searchResultsListView.bind(c.HAS_RESULT,c.hasResults,c);this.searchResultsListView.bind("need-refresh-iscroll",c.refreshIscroll,c);lpch.BaseView.prototype.initialize.call(this)},setupIscroll:function(){var b=this;var a=module.view.getCurrentOrientation();if(a!="desktop"&&this.scrollResultList==null){this.$resultsContainer.height(this.getResultsContainerHeight());if(!b.isIE8){this.scrollResultList=new iScroll("light_sidebar_results")}else{this.scrollResultList=0}}},refreshIscroll:function(){var b=this;var a=module.view.getCurrentOrientation();if(a!="desktop"&&b.scrollResultList!=null){b.$resultsContainer.height(b.getResultsContainerHeight());if(!b.isIE8){b.scrollResultList.refresh()}}},handleLayoutChange:function(b){var a=module.view.getCurrentOrientation();var c=this;if(a=="desktop"){if(c.scrollResultList!=null){c.scrollResultList.destroy();c.scrollResultList=null}c.$resultsContainer.removeAttr("style");c.hide()}},handleViewportChange:function(b,a){this.refreshIscroll()},show:function(a){var b=null;if(a){a.stopPropagation();b=a.data}else{b=this}b.$el.addClass(b.SHOW);b.$searchInput.focus();b.trigger("show");$(document).bind("click touchstart",b,b.hide);b.$el.on("click touchstart","*",function(c){c.stopPropagation()});b.options.originalSearchTextBox.on("click",function(c){c.stopPropagation()})},hide:function(a){var b=null;if(a){b=a.data;a.preventDefault()}else{b=this}b.$el.removeClass(b.SHOW);b.clearText();b.$resultsContainer.removeClass(b.IS_LOADING);$(document).unbind("click touchstart",b.hide)},clearText:function(b){var c=null;var a=module.view.getCurrentOrientation();if(b){c=b.data}else{c=this}c.$searchInput.val("");c.$resultsContainer.removeClass(c.HAS_RESULT);c.searchResultsListView.clearResults();c.refreshIscroll()},loadResults:function(b){var c=b.data;var a=$(this).val();if(a.length>3){c.$resultsContainer.addClass(c.IS_LOADING);c.load(c.URL+$(this).val(),c.renderList)}else{c.$resultsContainer.removeClass(c.HAS_RESULT);c.searchResultsListView.clearResults();c.refreshIscroll()}},getResultsContainerHeight:function(){var a=module.view.getCurrentOrientation();var c=0;if(a=="tablet"){c=258}else{var b=this.$resultsContainer.offset().top;c=module.view.getViewportHeight()-b}return c},load:function(a,b){var c=this;$.getJSON(a,function(d){b(d.response.docs,c)})},renderList:function(b,a){var c=a;if(b.length>0){c.searchResultsListView.dataResults=b;c.searchResultsListView.render()}c.$resultsContainer.removeClass(c.IS_LOADING)},hasResults:function(){this.$resultsContainer.addClass(this.HAS_RESULT)}});lpch.LightSidebarResultsListView=lpch.BaseView.extend({itemTemplateName:"lightSidebarResultItem",$viewMoreItem:null,titleCharsLimit:28,HAS_RESULT:"has-result",events:{"click .view-more":"viewMoreItem"},initialize:function(a){var b=this;b.$viewMoreItem=b.$(".view-more-item");b.itempTemplate=_.template(module.view.model.templates.get(b.itemTemplateName).get("html"))},render:function(){var b=this;if(b.dataResults.length==0||this.dataResults==null){return this}b.clearResults();var a=1;_.each(this.dataResults,function(c){c.hiddenTabletClass=a>4?"hide-default-tablet":"";c=b.truncateText(c);a++;b.$viewMoreItem.before(b.itempTemplate(c))});if(b.dataResults.length>0){b.trigger(b.HAS_RESULT)}if(b.$(".hide-default-tablet").length>0){b.$viewMoreItem.removeAttr("style")}this.trigger("need-refresh-iscroll");return this},clearResults:function(){this.$(".result-item").remove()},viewMoreItem:function(a){a.preventDefault();this.$(".hide-default-tablet").slice(0,3).removeClass("hide-default-tablet");if(this.$(".hide-default-tablet").length<=0){this.$viewMoreItem.hide()}this.trigger("need-refresh-iscroll")},truncateText:function(a){if(a.title){a.title[0]=truncateTextByLimitCharacter(a.title[0],this.titleCharsLimit)}else{a.name=truncateTextByLimitCharacter(a.name,this.titleCharsLimit)}return a}});$(window).bind("initializeComponents",function(){if($("#light-sidebar").length==0||$(".search-nav").length==0){return}new lpch.LightSidebar({el:"#light-sidebar",originalSearchTextBox:$(".search-nav")})});lpch.LocationDetail=lpch.BaseView.extend({mapCanvas:null,latitude:37.436357,longtitude:-122.175048,imageMaker:"/web-resources/default/img/u12-icon-map-maker.png",initialize:function(){var a=this;a.mapCanvas=document.getElementById("map-canvas");a.initMap();lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation")},handleViewportChange:function(b,a){},initMap:function(){var d=this;var c=null;var b=new google.maps.LatLng(d.latitude,d.longtitude);c=new google.maps.Map(d.mapCanvas,{zoom:12,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP});var a=new google.maps.Marker({map:c,position:new google.maps.LatLng(d.latitude,d.longtitude),draggable:false,icon:d.imageMaker})}});$(window).bind("initializeComponents",function(){$(".location-detail").each(function(){new lpch.LocationDetail({el:this})})});lpch.Locations=lpch.BaseView.extend({maxHeight:0,isDropDown:false,$tab:null,$tabContent:null,$tabItems:null,$tabFirstITem:null,$tabDefaultItem:null,$tabItemLinks:null,$locationsItem:null,$locationsList:null,$contentListItems:null,$locationsItemLink:null,$dropDownSelectedContent:null,ACTIVE:"active",SLIDE_SPEED:200,EXPANDED:"expanded",DEFAULT_ITEM:"default-item",initialize:function(){var b=this;var a=module.view.getCurrentOrientation();b.$tabContent=b.$(".tab-content");b.$tab=b.$("#search_result_tab");b.$tabItems=b.$tab.find("li");b.$tabFirstITem=b.$tab.find(".first-child");b.$tabDefaultItem=b.$tab.find(".default-item");b.$tabItemLinks=b.$tabItems.find("a");b.$contentListItems=b.$(".content-list li");b.$locationsList=b.$el.find(".locations-list");b.$locationsItemLink=b.$locationsList.find("h4");b.$dropDownSelectedContent=b.$(".dropdown-nav p");b.$locationsListItem=b.$locationsList.find(".location-list-item");b.$tabItemLinks.bind("click",b,b.showTab);b.$(".dropdown-nav").bind("click",b,b.showDropDownNav);b.$locationsItemLink.bind("click",b,b.expandCollapseHandler);b.showAutoTab();b.changeHeight();if(a=="smartphone"){b.showDefaultTabItem()}lpch.BaseView.prototype.initialize.call(this)},changeHeight:function(){var a=module.view.getCurrentOrientation(),b=this;b.$contentListItems.removeAttr("style");b.maxHeight=0;b.$contentListItems.each(function(){var c=$(this).height();if(b.maxHeight<c){b.maxHeight=c}});if(a!="smartphone"){b.$contentListItems.css({height:b.maxHeight})}else{b.$contentListItems.removeAttr("style")}},showAutoTab:function(){var a=module.view.getCurrentOrientation(),d=this;if(a!="smartphone"){var b=d.$tabItems.not("."+d.DEFAULT_ITEM).length,c=100/b;d.$tabItems.not("."+d.DEFAULT_ITEM).css("width",c+"%")}},showTab:function(f){var a=$(this),h=f.data,g=a.parent(),d=a.find(".inner").html(),c=g.hasClass(h.DEFAULT_ITEM),b=module.view.getCurrentOrientation();f.preventDefault();h.$dropDownSelectedContent.html(d);if(c){h.showDefaultTabItem()}else{a.tab("show")}h.changeHeight();if(b=="smartphone"){h.$tab.hide()}},showDefaultTabItem:function(){var b=this,a=b.$tabDefaultItem.find(".inner").html();b.$dropDownSelectedContent.html(a);b.$tab.find("."+b.ACTIVE).removeClass(b.ACTIVE);b.$tabContent.find("."+b.ACTIVE).removeClass(b.ACTIVE);b.$tabDefaultItem.addClass(b.ACTIVE)},closeDropDownNav:function(b){var c=b.data,a=module.view.getCurrentOrientation();if(a=="smartphone"&&c.isDropDown){c.$tab.hide();c.$tab.removeAttr("style")}},showDropDownNav:function(a){var b=a.data;b.$tab.slideDown(b.SLIDE_SPEED,function(){b.isDropDown=true;$(document).on("click",b,b.closeDropDownNav);$("#search_result_tab, .dropdown-nav").on("click",function(c){c.stopPropagation()})})},expandCollapseHandler:function(b){var a=module.view.getCurrentOrientation(),d=b.data;if(a=="smartphone"){var c=$(this).parent();c.toggleClass(d.EXPANDED)}return false},handleLayoutChange:function(b){var c=this,a=b.get("orientation");if(a!="smartphone"){c.$el.find("."+c.EXPANDED).removeClass(c.EXPANDED);c.showAutoTab();c.$tab.removeAttr("style");if(c.$tabDefaultItem.hasClass(c.ACTIVE)){c.$tabFirstITem.find("a").tab("show")}}else{c.isDropDown=false;c.showDefaultTabItem();c.$tabItems.removeAttr("style")}},handleViewportChange:function(c,a){var b=module.view.getCurrentOrientation();this.changeHeight()}});$(window).bind("initializeComponents",function(){$(".locations-component").each(function(){new lpch.Locations({el:this})})});lpch.MarketingSplash=lpch.BaseView.extend({initialize:function(){var a=this;if(this.$el.find(".mktgsplash-video").length==0){this.$el.removeClass("video-left-text-right")}else{this.$el.addClass("video-left-text-right")}if(!this.$el.hasClass("video-left-text-right")){this.$el.addClass("main")}this.$el.find("a").not(".youtube").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});this.$el.bind("inview",function(b,c){if(c==true){$(this).addClass("inview")}else{$(this).removeClass("inview")}});$(window).bind("scroll",function(b){a.move(module.view.getViewportHeight())});this.setHeight(module.view.getViewportWidth());this.move(module.view.getViewportHeight());lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){if(a.get("orientation")=="tablet"){this.$el.children("img").css({top:0})}else{this.$el.children("img").css({top:0})}},handleViewportChange:function(b,a){this.setHeight(b);this.move(a)},setHeight:function(c){var b=module.view.getCurrentOrientation();if(b!="desktop"){if(b=="smartphone"){if(!this.$el.hasClass("main")){this.$el.css("height","auto");return}}var a=(400*c)/980;this.$el.css("height",a)}},repositionBackground:function(c,f,b,a){var d=(-((c+f)-b)*a);if(d>0){d=0}return d+"px"},move:function(a){var b=module.view.getCurrentOrientation();if(!Modernizr.touch&&b=="desktop"){if(this.$el.hasClass("inview")){var c=$(window).scrollTop();if(this.$el.hasClass("main")){this.$el.children("img").css({top:this.repositionBackground(a,c,980,0.3)})}else{this.$el.children("img").css({top:this.repositionBackground(a,c,980,0.12)})}}}}});$(window).bind("initializeComponents",function(){$(".mktgsplash-component").each(function(a){new lpch.MarketingSplash({el:this})})});lpch.MktgFFtxt=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.find("a").not(".youtube").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".mktgfftxt-component").each(function(a){new lpch.MktgFFtxt({el:this})})});lpch.Mktgimgtxt=lpch.BaseView.extend({initialize:function(){var b=this;var a=module.view.getCurrentOrientation();if(a!="smartphone"){$(".img-top-text-bottom").find(".mktgimgtxt-first").prependTo(".img-top-text-bottom")}else{$(".img-top-text-bottom").find(".mktgimgtxt-first").appendTo(".img-top-text-bottom")}this.$el.find("a").not(".youtube").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text()||$(this).find("img").first().attr("alt"))});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){$(".img-top-text-bottom").find(".mktgimgtxt-first").appendTo(".img-top-text-bottom")}else{$(".img-top-text-bottom").find(".mktgimgtxt-first").prependTo(".img-top-text-bottom")}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".mktgimgtxt-component").each(function(a){new lpch.Mktgimgtxt({el:this})})});lpch.MobileContentOverlay=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.click(function(b){$(".ls-canvas").toggleClass("active");$("body").toggleClass("no-scroll");$("#mobile-content-overlay").toggle();module.trigger("toggleNav")});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){new lpch.MobileContentOverlay({el:"#mobile-content-overlay"})});lpch.MobileHomeSearch=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.find("a").click(function(b){b.stopPropagation();a.$el.find("form").submit()});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".mobile-home-search").each(function(a){new lpch.MobileHomeSearch({el:this})})});lpch.Navigation=lpch.BaseView.extend({NAME:"Header",scrollNavigation:null,initialize:function(){var c=this;var a=module.view.getCurrentOrientation();this.initRecentlyVisited();if(Modernizr.touch){this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-btn").bind("click",function(d){d.preventDefault();module.view.trackEvent($(this).find("> span").text(),null,c.NAME)}).bind("touchend",function(f){f.preventDefault();var d=$(this).parent();if(!d.hasClass("open")){if(module.view.getCurrentOrientation()=="desktop"){d.addClass("open").removeClass("unactive").siblings().removeClass("open")}else{d.addClass("open").removeClass("unactive")}}else{d.removeClass("open").addClass("unactive")}if(c.scrollNavigation!=null&&!$("html").hasClass("ie8")){setTimeout(function(){c.scrollNavigation.refresh()},100)}return false})}else{this.$el.find(".nav-item").not(".nav-item--recently").hover(function(){if(module.view.getCurrentOrientation()=="desktop"&&!Modernizr.touch){$(this).addClass("open").siblings().removeClass("open")}},function(){if(module.view.getCurrentOrientation()=="desktop"&&!Modernizr.touch){$(this).removeClass("open")}});this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-btn").focus(function(){$(this).parent().trigger("mouseenter")});this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-nav-item").hover(function(d){var f=$(this).parent().parent();f.find(".dropdown-thumbnail ul li").hide();$(f.find(".dropdown-thumbnail ul li")[$(this).index()+1]).show()},function(d){var f=$(this).parent().parent();f.find(".dropdown-thumbnail ul li").hide();$(f.find(".dropdown-thumbnail ul li")[0]).show()});this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-nav-item a").focus(function(){$(this).parent().addClass("hover")});this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-nav-item a").blur(function(){$(this).parent().removeClass("hover")});this.$el.find(".nav-item").not(".nav-item--recently").last().find(".dropdown-nav-item").last().find("a").blur(function(){$(this).parent().parent().parent().parent().parent().trigger("mouseleave")});this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-btn").bind("click",function(f){if(module.view.getCurrentOrientation()!="desktop"){f.preventDefault()}module.view.trackEvent($(this).find("> span").text(),null,c.NAME);var d=$(this).parent();if(!d.hasClass("open")){d.addClass("open")}else{d.removeClass("open")}if(c.scrollNavigation!=null&&!$("html").hasClass("ie8")){setTimeout(function(){c.scrollNavigation.refresh()},100)}});this.$el.find(".nav-item").removeClass("current");var b=window.location.pathname;if(b.search("/plan")>=0||b.search("/locations")>=0){this.$el.find(".dropdown--plan").parent().addClass("current")}else{if(b.search("/service")>=0){this.$el.find(".dropdown--services").parent().addClass("current")}else{if(b.search("/learn")>=0||b.search("/about")>=0||b.search("/calendar")>=0){this.$el.find(".dropdown--learn").parent().addClass("current")}else{if(b.search("/participate")>=0){this.$el.find(".dropdown--participate").parent().addClass("current")}}}}}this.$el.find(".nav-item").not(".nav-item--recently").find(".dropdown-nav-item").bind("click",function(d){module.view.trackEvent($(this).text(),$(this).parent().parent().parent().parent().find("a > span").text(),c.NAME)});if(this.$el.length>0&&this.scrollNavigation==null&&a!="desktop"){this.$el.height(this.getNavHeight());if(!$("html").hasClass("ie8")){c.setupIscroll()}}if(a!="desktop"){this.$el.addClass("overflow-y-auto")}this.$el.find(".dropdown").bind("click",function(d){if(module.view.getCurrentOrientation()=="desktop"){d.stopPropagation()}});$(document).bind("click",function(){if(module.view.getCurrentOrientation()=="desktop"){var d=c.$el.find(".nav-item");d.removeClass("open")}});module.bind("toggleNav",function(d){c.$el.height(c.getNavHeight())});this.setTabIndex();lpch.BaseView.prototype.initialize.call(this)},setupIscroll:function(){this.scrollNavigation=new iScroll("navigation",{onBeforeScrollStart:function(b){var a=b.target;while(a.nodeType!=1){a=a.parentNode}if(a.tagName!="SELECT"&&a.tagName!="INPUT"&&a.tagName!="TEXTAREA"){b.preventDefault()}}})},handleLayoutChange:function(a){if(a.get("orientation")=="desktop"){this.$el.find(".nav-item").removeClass("open");if(this.scrollNavigation!=null&&!$("html").hasClass("ie8")){this.scrollNavigation.destroy();this.scrollNavigation=null;this.$el.removeAttr("style")}this.$el.removeClass("overflow-y-auto")}else{if($("html").hasClass("android")){this.$el.css("z-index","1");setTimeout(function(){this.$el.css("z-index","1399")},100)}if(this.$el.length>0&&this.scrollNavigation==null){this.$el.height(this.getNavHeight());if(!$("html").hasClass("ie8")){this.setupIscroll()}}this.$el.addClass("overflow-y-auto")}},initRecentlyVisited:function(){var f=this;var d=$.jStorage.get("recentlyVisited");if(!d){d=[]}var c={title:document.title,href:document.location.href};var b=d.length;while(b--){var a=d[b];if(a.href==c.href){d.splice(b,1)}}d.unshift(c);if(d.length>5){d.splice(5)}$.jStorage.set("recentlyVisited",d);$.each(d,function(h,j){var g='<li class="dropdown-nav-item"><a href="'+j.href+'">'+j.title+"</a></li>";$(g).appendTo(f.$el.find(".nav-item--recently .dropdown-nav"))})},handleViewportChange:function(c,a){var d=this;var b=module.view.getCurrentOrientation();if(b!="desktop"){this.$el.height(this.getNavHeight());if(d.scrollNavigation!=null&&!$("html").hasClass("ie8")){d.scrollNavigation.refresh()}}else{this.$el.removeAttr("style")}},getNavHeight:function(){var b=this.$el.length?this.$el.offset().top:0,a=module.view.getViewportHeight();currentNavHeight=a-b;return currentNavHeight},setTabIndex:function(){var a=1;$("#header .logo a").each(function(){$(this).attr("tabindex",a++)});this.$el.find(".nav-item").not(".nav-item--recently, .nav-item--search").each(function(){$(this).find(".dropdown-btn").each(function(){$(this).attr("tabindex",a++)});$(this).find(".dropdown-nav-item a").each(function(){$(this).attr("tabindex",a++)})});this.$el.find(".utinity-primary a").each(function(){$(this).attr("tabindex",a++)});$("#header .find-btn").each(function(){$(this).attr("tabindex",a++)})}});$(window).bind("initializeComponents",function(){new lpch.Navigation({el:"#navigation"})});lpch.PatientStory=lpch.BaseView.extend({_this:null,readSlider:null,helpedSlider:null,meetSlider:null,masterSlider:null,breakpoint:null,timeoutDuration:700,initialize:function(){_this=this;this.setupBxSlider();this.$el.find(".breadcrumb").not(".breadcrumb.home").click(function(){_this.masterSlider.goToSlide(0)});$(".panel h3").click(function(){if(_this.breakpoint==="smartphone"){var a=$(this).parent().find(".inner-panel");if(a.height()===0){a.css("height","")}else{a.css("height","0px")}$(this).find(".arrow").toggleClass("closed open")}});lpch.BaseView.prototype.initialize.call(this)},initTabs:function(){var a=$(".tab");a.unbind("click");a.click(function(){a.removeClass("active");$(this).toggleClass("active");console.log(jQuery.inArray(this,a)+1);_this.masterSlider.goToSlide(jQuery.inArray(this,a)+1)})},hidePanels:function(){$(".read-his-story .inner-panel").css("height","0px");$(".meet-team .inner-panel").css("height","0px");$(".how-we-helped .inner-panel").css("height","0px");$(".watch-video .inner-panel").css("height","0px");$("h3 .arrow").removeClass("closed open").addClass("closed")},setupBxSlider:function(){_this.handleLayoutChange(module.view.getCurrentLayout())},handleLayoutChange:function(a){if(_this.breakpoint!==a.attributes.orientation){if(a.attributes.orientation==="smartphone"){_this.hidePanels()}}_this.breakpoint=a.attributes.orientation;$(".inner-panel").css("height","");$(".tab").removeClass("active");$(".sharing.hidden-phone").removeClass("white");if(a.attributes.orientation==="desktop"){_this.setupDesktopView()}else{if(a.attributes.orientation==="tablet"){_this.setupTabletView()}else{if(a.attributes.orientation==="smartphone"){_this.setupSmartphoneView()}}}},setupDesktopView:function(){var c={minSlides:2,maxSlides:2,slideWidth:"235px",slideMargin:0,slideSelector:".slide",useCSS:true};var b={minSlides:1,maxSlides:1,slideWidth:"540px",slideMargin:0,slideSelector:".slide",useCSS:true};var a={onSliderLoad:function(){_this.initTabs();var d=setTimeout(function(){if(_this.readSlider!==null){_this.readSlider.reloadSlider(b)}else{_this.readSlider=$(".read-his-story .bxslider").bxSlider(b)}if(_this.meetSlider!==null){_this.meetSlider.reloadSlider(c)}else{_this.meetSlider=$(".meet-team .bxslider").bxSlider(c)}if(_this.helpedSlider!==null){_this.helpedSlider.reloadSlider(c)}else{_this.helpedSlider=$(".how-we-helped .bxslider").bxSlider(c)}},_this.timeoutDuration)},onSlideBefore:function(g,f,d){$(".tab").removeClass("active");if(d!==0){$(".tab:eq("+(d-1)+")").toggleClass("active")}if(d===2||d===3){$(".sharing.hidden-phone").addClass("white")}else{$(".sharing.hidden-phone").removeClass("white")}},pager:false,controls:false,touchEnabled:false,infiniteLoop:false};if(_this.masterSlider!==null){_this.masterSlider.reloadSlider(a)}else{_this.masterSlider=$(".main.bxslider").bxSlider(a)}},setupTabletView:function(){var b={minSlides:3,maxSlides:3,slideWidth:"360px",slideMargin:0,slideSelector:".slide",adaptiveHeight:false,useCSS:true};var c={minSlides:1,maxSlides:1,slideMargin:0,slideSelector:".slide",adaptiveHeight:false,useCSS:true};var a={onSliderLoad:function(){_this.initTabs();var d=setTimeout(function(){if(_this.readSlider!==null){_this.readSlider.reloadSlider(c)}else{_this.readSlider=$(".read-his-story .bxslider").bxSlider(c)}if(_this.meetSlider!==null){_this.meetSlider.reloadSlider(b)}else{_this.meetSlider=$(".meet-team .bxslider").bxSlider(b)}if(_this.helpedSlider!==null){_this.helpedSlider.reloadSlider(b)}else{_this.helpedSlider=$(".how-we-helped .bxslider").bxSlider(b)}},_this.timeoutDuration)},onSlideBefore:function(g,f,d){$(".tab").removeClass("active");if(d!==0){$(".tab:eq("+(d-1)+")").toggleClass("active")}if(d){$(".sharing.hidden-phone").removeClass("white")}},pager:false,controls:false,touchEnabled:false};if(_this.masterSlider!==null){_this.masterSlider.reloadSlider(a)}else{_this.masterSlider=$(".main.bxslider").bxSlider(a)}},setupSmartphoneView:function(){var b=false;if(_this.masterSlider!==null){_this.masterSlider.destroySlider()}else{b=true}var a=setTimeout(function(){$(".panel").css("width","100%");var c={minSlides:1,maxSlides:1,slideSelector:".slide",useCSS:true};if(_this.readSlider!==null){_this.readSlider.reloadSlider(c)}else{_this.readSlider=$(".read-his-story .bxslider").bxSlider(c)}if(_this.meetSlider!==null){_this.meetSlider.reloadSlider(c)}else{_this.meetSlider=$(".meet-team .bxslider").bxSlider(c)}if(_this.helpedSlider!==null){_this.helpedSlider.reloadSlider(c)}else{_this.helpedSlider=$(".how-we-helped .bxslider").bxSlider(c)}var d=setTimeout(function(){_this.hidePanels()},_this.timeoutDuration)},_this.timeoutDuration)},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".patient-story").each(function(a){new lpch.PatientStory({el:this})})});lpch.PersistentSearch=lpch.BaseView.extend({$magGlass:null,$searchBar:null,$searchInput:null,$searchResults:null,pSearchClosedWidth:40,pSearchClosedLeft:380,pSearchActiveWidth:258,pSearchActiveLeft:160,pSearchOpenWidth:420,pSearchOpenLeft:0,userClicked:false,csstransitions:false,state:"active",CLOSED:"closed",OPEN:"open",ACTIVE:"active",RESULTS:"results",initialize:function(){var a=this;this.csstransitions=$("html").hasClass("csstransitions");if($("html").hasClass("android")&&!$("html").hasClass("chrome")){this.$el.addClass("android-browser")}if($("#emergency-banner").length>0){this.$el.find(".p-search-spacer").addClass("emergency")}this.$magGlass=this.$el.find(".p-search-mag");this.$searchBar=this.$el.find(".p-search-bar");this.$searchInput=this.$el.find(".p-search-input");this.$searchResults=this.$el.find(".p-search-results");this.initMagGlass();this.initSearchInput();this.initWindowScroll();this.handleViewportChange(module.view.getViewportWidth(),module.view.getViewportHeight());lpch.BaseView.prototype.initialize.call(this)},initMagGlass:function(){var a=this;this.$magGlass.click(function(b){b.stopPropagation();a.userClicked=true;if(a.state==a.CLOSED){a.activate();module.view.trackEvent("Activate","Button","Search Widget")}else{if(a.state==a.OPEN){module.view.trackEvent("Submit","Button","Search Widget");a.$el.find(".p-search-form").submit()}}}).hover(function(){if(a.state==a.CLOSED){if(a.csstransitions){a.$el.addClass("hover")}else{a.$searchBar.animate({opacity:1},"fast")}}},function(){if(a.state==a.CLOSED){if(a.csstransitions){a.$el.removeClass("hover")}else{a.$searchBar.animate({opacity:0.9},"fast")}}})},initSearchInput:function(){var a=this;this.$searchInput.keyup(function(){a.open();var b="/en/search/widget.page?search-term="+$(this).val();if($(this).val().length>3){a.load(b,a.onSearchResults)}else{a.$searchResults.empty()}}).focus(function(){a.userClicked=true;if(Modernizr.touch){$("#header, #navigation, #persistent-search").css("position","absolute")}}).blur(function(){if(Modernizr.touch){$("#header, #navigation, #persistent-search").css("position","fixed")}}).click(function(b){b.stopPropagation()})},initWindowScroll:function(){var a=this;$(window).scroll(function(){if(a.$searchInput.is(":focus")){return}if(a.state==a.RESULTS){return}a.close()})},initDocumentClick:function(){var a=this;$(document).click(function(){a.close()})},load:function(a,c,b){var d=this;$.getJSON(a,function(f){d.onSearchResults(f,d)})},onSearchResults:function(k,o){o.$searchResults.empty();var m=$($.trim(module.view.model.templates.get("pSearchServicesItemTemplate").get("html"))),r=m.find(".p-search-result-set-list"),p=$($.trim(module.view.model.templates.get("pSearchDoctorsItemTemplate").get("html"))),b=p.find(".p-search-result-set-list"),g=$($.trim(module.view.model.templates.get("pSearchLocationsItemTemplate").get("html"))),n=g.find(".p-search-result-set-list"),v=$($.trim(module.view.model.templates.get("pSearchEventsItemTemplate").get("html"))),f=v.find(".p-search-result-set-list"),t=$($.trim(module.view.model.templates.get("pSearchPagesItemTemplate").get("html"))),d=t.find(".p-search-result-set-list"),s=$($.trim(module.view.model.templates.get("pSearchAllItemTemplate").get("html"))),q,u=0,c=0,h=0,a=0,j=0,l=k.response.docs;$.each(l,function(x,y){switch(y["content-type"]){case"service":q=r;u++;break;case"caregiver":q=b;c++;break;case"location":q=n;h++;break;case"class":q=f;a++;break;case"webcrawl":q=d;j++;break}if(q&&q.find("li").length<3){var w='<li><a href="'+y.url+'" title="'+(y.name||y.title)+'">'+(y.name||y.title)+"</a></li>";$(w).appendTo(q)}});if(r.find("li").length>0){if(r.find("li").length==1){m.find(".p-search-result-set-header .icon").hide()}m.find(".p-search-result-set-header .header").append("<span> ("+u+")</span>");m.appendTo(o.$searchResults)}if(b.find("li").length>0){if(b.find("li").length==1){p.find(".p-search-result-set-header .icon").hide()}p.find(".p-search-result-set-header .header").append("<span> ("+c+")</span>");p.appendTo(o.$searchResults)}if(n.find("li").length>0){if(n.find("li").length==1){g.find(".p-search-result-set-header .icon").hide()}g.find(".p-search-result-set-header .header").append("<span> ("+h+")</span>");g.appendTo(o.$searchResults)}if(f.find("li").length>0){if(f.find("li").length==1){v.find(".p-search-result-set-header .icon").hide()}v.find(".p-search-result-set-header .header").append("<span> ("+a+")</span>");v.appendTo(o.$searchResults)}if(d.find("li").length>0){if(d.find("li").length==1){t.find(".p-search-result-set-header .icon").hide()}t.find(".p-search-result-set-header .header").append("<span> ("+j+")</span>");t.appendTo(o.$searchResults)}s.appendTo(o.$searchResults);o.$searchResults.find(".view-all-results").click(function(w){w.preventDefault();o.$el.find(".p-search-form").submit()});o.$el.find(".p-search-result-set-header a").click(function(x){x.preventDefault();module.view.trackEvent($(this).attr("title"),"Tab","Search Widget");var w=$(this).attr("href");window.location=w+o.$searchInput.val()});o.$el.find(".p-search-result-set-list a").not(".view-all-results").click(function(w){module.view.trackEvent($(this).attr("title"),$(this).parent().parent().prev().find("a").attr("title"),"Search Widget")});o.$el.find(".p-search-result-set-list a.view-all-results").click(function(w){module.view.trackEvent($(this).attr("title"),"View All","Search Widget")});o.$searchResults.find(".p-search-result-set:first-child").addClass("first");if(o.csstransitions){o.$el.addClass(o.RESULTS)}else{o.$searchResults.css("visibility","visible").animate({maxHeight:"600px",opacity:"1"},"fast")}},activate:function(){this.$searchInput.val("");if(this.csstransitions){this.$el.removeClass("hover");this.$el.addClass(this.ACTIVE)}else{this.$searchBar.animate({opacity:0.9,left:this.pSearchActiveLeft,width:this.pSearchActiveWidth},"fast");this.$searchResults.animate({left:this.pSearchActiveLeft,width:this.pSearchActiveWidth},"fast");this.$searchInput.fadeIn("fast")}this.setState(this.ACTIVE)},open:function(){if(this.state==this.OPEN){return}if(this.csstransitions){this.$el.addClass(this.OPEN)}else{this.$searchBar.animate({left:this.pSearchOpenLeft,width:this.pSearchOpenWidth},"fast");this.$searchResults.animate({left:this.pSearchOpenLeft,width:this.pSearchOpenWidth},"fast");this.$searchInput.animate({width:"355px"},"fast")}this.initDocumentClick();this.setState(this.OPEN)},close:function(){if(this.csstransitions){this.$el.removeClass(this.ACTIVE);this.$el.removeClass(this.OPEN);this.$el.removeClass(this.RESULTS)}else{this.$searchBar.animate({left:this.pSearchClosedLeft,width:this.pSearchClosedWidth},"fast");this.$searchResults.animate({left:this.pSearchClosedLeft,width:this.pSearchClosedWidth,maxHeight:"0",opacity:"0"},"fast");this.$searchInput.animate({width:"195px"},"fast");this.$searchInput.fadeOut("fast");this.$searchResults.css({visibility:"hidden",maxHeight:0})}this.$searchInput.blur();this.setState(this.CLOSED)},setState:function(a){this.state=a},handleLayoutChange:function(a){},handleViewportChange:function(c,a){var b=module.view.getCurrentOrientation();if(b=="tablet"){var d=c-this.$el.width();this.$el.css({marginLeft:d})}else{if(b=="desktop"){this.$el.attr("style","")}}}});$(window).bind("initializeComponents",function(){new lpch.PersistentSearch({el:"#persistent-search"})});lpch.Related=lpch.BaseView.extend({NAME:"Related",initialize:function(){var a=this;this.$el.find("a").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".related").each(function(a){new lpch.Related({el:this})})});lpch.RelatedClasses=lpch.BaseView.extend({lang:null,jsonObj:{},initialize:function(){var d=this;var a=this.$el.attr("data-rel");var b=this.$el.attr("data-rel-limit");if(b===""){b=4}var c=window.location.pathname.split("/");d.lang="en";if(c[1]==="es"){d.lang="es"}$.ajax({type:"GET",url:"/config-public/events/index.xml",dataType:"xml",success:function(f){d.jsonObj=d.xmlToJson(f);d.parseData(a,b)}});lpch.BaseView.prototype.initialize.call(this)},parseData:function(a,c){var g=this;var f="",b=0,d=[];g.$el.find(".noevents").hide();$.each(g.jsonObj.result.dataset.record,function(h,j){if(j.txtEvtEstName){if(!Array.indexOf){Array.prototype.indexOf=function(l){for(var k=0;k<this.length;k++){if(this[k]==l){return k}}return -1}}if((j.txtLocCode["#text"]&&j.txtLocCode["#text"].indexOf(a)!==-1)||(j.txtEvtAnsField07["#text"]&&j.txtEvtAnsField07["#text"].indexOf(a)!==-1)){if(d.indexOf(j.txtEvtAnsField01["#text"])===-1){d.push(j.txtEvtAnsField01["#text"]);if(b<c){f+='<div class="content-related-classes-wrap">';f+='<a href="/'+g.lang+"/classes/class-detail.page?evt="+j.txtEvtAnsField01["#text"]+'" class="link-related-classes">';if(g.lang==="es"){if(typeof j.txtEvtAnsField05["#text"]!=="undefined"){f+=j.txtEvtAnsField05["#text"]}else{f+=j.txtEvtName["#text"]}}else{f+=j.txtEvtName["#text"]}f+="</a>";f+='<div class="content-related-classes">';f+='<span class="next-class">Next Class:</span> ';f+=j.dteEvtStartDate["#text"]+"<br />";f+=j.dteEvtStartTime["#text"];f+=" - ";f+=j.dteEvtEndTime["#text"];f+="</div>";f+="</div>"}b++}}}});if(b===0){g.$el.find(".noevents").show()}else{g.$el.find(".classlist").html(f)}},xmlToJson:function(c){var h={};if(c.nodeType===1){if(c.attributes.length>0){h["@attributes"]={};for(var b=0;b<c.attributes.length;b++){var g=c.attributes.item(b);h["@attributes"][g.nodeName]=g.nodeValue}}}else{if(c.nodeType===3){h=c.nodeValue}}if(c.hasChildNodes()){for(var d=0;d<c.childNodes.length;d++){var f=c.childNodes.item(d);var k=f.nodeName;if(typeof(h[k])==="undefined"){h[k]=this.xmlToJson(f)}else{if(typeof(h[k].push)==="undefined"){var a=h[k];h[k]=[];h[k].push(a)}h[k].push(this.xmlToJson(f))}}}return h}});$(window).bind("initializeComponents",function(){$(".related-classes.list").each(function(a){new lpch.RelatedClasses({el:this})})});lpch.Location=lpch.BaseView.extend({initialize:function(){var b=this;this.locCnt=b.$el.find(".location-content-container");this.locNav=b.$el.find(".location-nav");this.locNavPad=parseInt(this.locNav.css("paddingTop"))+parseInt(this.locNav.css("paddingBottom"));this.mH=0;this.$el.find(".location-btn").click(function(c){c.preventDefault();module.view.trackEvent($(this).find(".center-text").text());b.locNav.css("height","auto");if(!$(this).hasClass("active")){b.$el.find(".open").removeClass("open");b.$el.find("#"+$(this).attr("data-rel")).addClass("open");b.$el.find(".active").removeClass("active");$(this).addClass("active")}b.changeHeight()});var a=module.view.getCurrentOrientation();if(a=="smartphone"){this.$el.find(".location-nav li:even").css({"margin-left":"0px",width:"50%"})}else{this.$el.find(".location-nav li:even").removeAttr("style");this.changeHeight()}lpch.BaseView.prototype.initialize.call(this)},changeHeight:function(){this.mH=this.locCnt.height();if(module.view.getCurrentOrientation()!="smartphone"&&this.mH>this.locNav.outerHeight()){this.locNav.height(this.mH-this.locNavPad)}},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){this.$el.find(".location-nav li:even").css({"margin-left":"0px",width:"50%"})}else{this.$el.find(".location-nav li:even").removeAttr("style")}},handleViewportChange:function(b,a){this.locNav.css("height","auto");this.changeHeight()}});$(window).bind("initializeComponents",function(){$(".related-locations").each(function(a){new lpch.Location({el:this})})});lpch.RelatedNav=lpch.BaseView.extend({NAME:"Related Navigation",SLIDE_SPEED:300,EXPANDED:"expanded",HAS_CHILD:"has-child",LAST_CHILD:"last-child",initialize:function(){var b=this,a=module.view.getCurrentOrientation();b.$treeList=b.$el.find(".tree-list");b.$listItems=b.$treeList.find("li");b.$listItemLinks=b.$treeList.find("a");b.$listItems.removeClass("has-child");$("ul.tree-list").children().find("ul").each(function(c){$(this).parent().addClass(b.HAS_CHILD);$(this).parent().find(".arrow-icon").addClass("collapsed");$(this).hide();if($("ul.tree-list > li").hasClass("current")){$(this).parent().filter(".current").find(".arrow-icon").removeClass("collapsed").addClass("expanded");$("ul.tree-list > li.current > ul").show()}if($("ul.tree-list > li > ul > li").hasClass("current")){$("ul.tree-list > li > ul > li.current").parent().parent().find(".arrow-icon").removeClass("collapsed").addClass("expanded");$("ul.tree-list > li > ul > li.current").parent().show()}});if(b.$treeList.is(":last-child")){b.$treeList.addClass(b.LAST_CHILD)}this.$el.find(".topic-footer a").click(function(c){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation")},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".related-navigation").each(function(a){new lpch.RelatedNav({el:this})})});lpch.SaleforceForm=lpch.BaseView.extend({NAME:"Newsletter Form",initialize:function(){var a=this;this.validate(this.$el);this.pageSuccess();this.$el.find('input[type="submit"]').click(function(b){module.view.trackEvent($(this).val())});lpch.BaseView.prototype.initialize.call(this)},handleViewportChange:function(b,a){},handleLayoutChange:function(b){var a=b.get("orientation");if($("#colorbox").hasClass("layer-success-form-template")){clearTimeout(this.timer);this.timer=setTimeout(function(){if(a=="smartphone"){$.colorbox.resize({innerWidth:320,innerHeight:380})}else{if(a=="tablet"){$.colorbox.resize({innerWidth:508,innerHeight:300})}else{$.colorbox.resize({innerWidth:564,innerHeight:273})}}},200)}},validate:function(a){var b=this;a.validate({errorPlacement:function(c,d){c.addClass("error-text-right");if(d.next().is(".add-on")){c.addClass("add-on").insertBefore(d.next(".add-on"))}else{c.insertBefore(d)}},rules:{first_name:"required",last_name:"required",email:{required:true,email:true},confirm_email:{email:true,equalTo:"#email"},phone:{number:true}},messages:{first_name:"* Required Field",last_name:"* Required Field",email:{required:"* Required Field",email:"* Invalid Email"},confirm_email:"* Email Addresses Do Not Match",phone:"* Invalid Number"}})},templateSuccess:function(){return'<div class="layout-success-container"><div class="content"><h3 class="heading">Thank You!</h3><p class="description">Est ma comnienis mos ex erferum rerereped quia si reperfe rnates eatibust, excerspid quunt, quas is ipsusciuntes aut eatusamus veliquat imint alit et quidign imoluptatur aceruptatur repudantet quia nulpa plaborepudis re ame imi, es simi, quat autem que Cuptaqu aepernatquis aut am volest, temolorest, consed magnam quat eum int quatur aut que parchit laut la sitias idit omnit ent maiorro.</p></div><p class="controls"><button class="btn btn-danger" type="button">Return to page</button></p></div>'},pageSuccess:function(){if(module.view.getParameterByName("success")=="true"){var a=this.templateSuccess();$.colorbox({html:a,innerWidth:564,innerHeight:273,onComplete:function(){var b=module.view.getCurrentOrientation();if(b=="smartphone"){$.colorbox.resize({innerWidth:320,innerHeight:400})}else{if(b=="tablet"){$.colorbox.resize({innerWidth:508,innerHeight:300})}}},onOpen:function(){$("#colorbox").addClass("layer-success-form-template")},onClosed:function(){$("#colorbox").removeClass("layer-success-form-template")}})}}});$(window).bind("initializeComponents",function(){new lpch.SaleforceForm({el:".sales-force-form"})});lpch.ScrollIndicator=lpch.BaseView.extend({initialize:function(){var a=this;$(window).bind("scroll",function(c){var b=module.view.getCurrentOrientation();if(b=="desktop"){var d=$(this).scrollTop();if(d>350){a.$el.fadeOut()}else{a.$el.fadeIn()}}});lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".scroll-page").each(function(a){new lpch.ScrollIndicator({el:this})})});lpch.SearchResult=lpch.BaseView.extend({initialize:function(){var c=this;lpch.BaseView.prototype.initialize.call(this);this.searchAllList=new lpch.SearchItemListView({itemViewClass:lpch.SearchAllItemView,el:"#all-list",templateID:"allListView",collection:this.collection});this.searchDoctorList=new lpch.SearchItemListView({itemViewClass:lpch.SearchDoctorItemView,el:"#doctors-list",templateID:"doctorsListView",category:"caregiver",filterEventName:"filter.doctor",collection:this.collection,layoutChangeCallBack:c.handleDoctorLayoutChange});this.searchServiceList=new lpch.SearchItemListView({itemViewClass:lpch.SearchServiceItemView,el:"#services-list",templateID:"servicesListView",category:"service",collection:this.collection});this.searchLocationList=new lpch.SearchItemListView({itemViewClass:lpch.SearchLocationItemView,el:"#locations-list",templateID:"locationsListView",category:"location",collection:this.collection});this.searchClassList=new lpch.SearchItemListView({itemViewClass:lpch.SearchClassItemView,el:"#classes-list",templateID:"classesListView",category:"class",collection:this.collection});if($.jStorage.get("lastSearchTab")&&$.jStorage.get("lastSearchTerm")==module.view.getParameterByName("search-term")){var a=$.jStorage.get("lastSearchTab");var b=$('#search_result_tab li a[href="'+a+'"]');b.trigger("click")}else{if(module.view.getParameterByName("tab")!=""){var a="#"+module.view.getParameterByName("tab");var b=$('#search_result_tab li a[href="'+a+'"]');b.trigger("click")}else{$.jStorage.set("lastSearchTab","#all")}}$.jStorage.set("lastSearchTerm",module.view.getParameterByName("search-term"));this.$el.find(".results-header a[title], .results-body a[title]").click(function(d){module.view.trackEvent($(this).attr("title"),c.$el.find("#search_result_tab li.active .inner").clone().children().remove().end().text(),"Search")})},handleViewportChange:function(b,a){}});lpch.SearchResultTab=lpch.BaseView.extend({tabsText:["all","services","classes"],tabActive:null,wordCounts:{desktop:28,tablet:20,smartphone:12},timer:null,stopBubbling:function(a){a.stopPropagation()},toggleDropDownNav:function(a){a.stopPropagation();$("#search_result_tab").slideToggle(200)},closeDropDownNav:function(a){if(module.view.getCurrentOrientation()=="smartphone"){$("#search_result_tab").slideUp(200,function(){$(this).removeAttr("style")})}},truncate:function(b){this.tabActive=$(".tab-content > .active");var a=false;for(var c=0;c<this.tabsText.length;c++){if(this.tabActive.attr("id")==this.tabsText[c]){a=true;break}}if(!a){return}var d=this;clearTimeout(this.timer);this.timer=setTimeout(function(){d.truncateTabsContent(d.tabActive.find(".results-body"),d.wordCounts[b||module.view.getCurrentOrientation()])},200)},registerTextTruncate:function(a){this.tabsText.push(a)},truncateTabsContent:function(b,a){$.each(b.find("li"),function(g,f){var j=$(f).find(".desc"),h=j.find(".content"),d=j.find(".content-mobile"),c=words(h.html());if(c.length>a){truncateText(d,c,a)}})},showTab:function(b){b.preventDefault();var a=$(this);a.tab("show");module.trigger("showTab",a.attr("href"));$(".dropdown-nav p").html(a.find(".inner").html());$("#search_result_tab").hide().removeAttr("style");lpch.SearchResultTab.prototype.truncate();module.view.trackEvent($(this).find(".inner").clone().children().remove().end().text(),"Tab","Search");$.jStorage.set("lastSearchTab",$(b.currentTarget).attr("href"))},updateTabLabelLength:function(a){this.$el.find(".nav-wrap .result-"+a.category+"-count").html("("+a.l+")")},initialize:function(){lpch.BaseView.prototype.initialize.call(this);this.$el.find("#search_result_tab a").bind("click",this.showTab);this.$el.find("#search_result_tab").bind("click",this.stopBubbling);this.$el.find(".dropdown-nav").bind("click",this.toggleDropDownNav);module.vent.on("updateTabLabelLength",this.updateTabLabelLength,this);if(module.view.getCurrentOrientation()=="smartphone"){$(document).bind("click",this.closeDropDownNav)}this.truncate()},handleLayoutChange:function(b){var a=b.get("orientation");this.$(".filter-inner").removeAttr("style");if(a!="smartphone"){$(document).unbind("click",this.closeDropDownNav);$.colorbox.resize({innerWidth:640,innerHeight:404})}else{$(document).bind("click",this.closeDropDownNav);this.$(".search-result-tab").removeAttr("style");$.colorbox.resize({innerWidth:320,innerHeight:200})}this.truncate(a)}});$(window).bind("initializeComponents",function(){$(".search-result").each(function(b){try{var c=new lpch.SearchResultsCollection();c.reset(searchResults.response.docs);c.clean();new lpch.SearchResultTab({el:this});new lpch.SearchResult({el:this,collection:c})}catch(a){console.log(a.message)}})});lpch.SectionNav=lpch.BaseView.extend({NAME:"Section Navigation",scroller:null,initialize:function(){var a=this;this.$el.find(".section-name").bind("click",function(b){a.openSectionNav(b)});$(document).bind("click touchstart",function(c){var b=module.view.getCurrentOrientation();if(b=="smartphone"){if(!$(c.target).parents().is(a.$el)){a.closeSectionNav()}}});this.$el.bind("itemClicked",function(b){b.stopPropagation();a.closeSectionNav()});this.$el.find(".list-section-name a").click(function(b){module.view.trackEvent($(this).text())});lpch.BaseView.prototype.initialize.call(this)},openSectionNav:function(b){var c=this;b.preventDefault();b.stopPropagation();this.$el.find(".list-section-name").show();var a=this.$el.find(".list-section-name")[0];this.scroller=new iScroll(a,{bounce:false})},closeSectionNav:function(a){$(".list-section-name").hide();this.scroller=null},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){$(".list-section-name").hide()}else{$(".list-section-name").show()}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".section-navigation").each(function(a){new lpch.SectionNav({el:this})})});lpch.ServiceDoctors=lpch.BaseView.extend({initialize:function(){var b=this;this.$el.find(".service-doctors-nav li a").first().addClass("active").next().addClass("open");this.$el.find(".service-doctors-content-container div:first-child").addClass("open");var a=module.view.getCurrentOrientation();if(a=="tablet"){this.$el.find(".our-care-team li:even").css({"margin-left":"0px"})}else{this.$el.find(".our-care-team li:even").removeAttr("style")}lpch.BaseView.prototype.initialize.call(this)},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="tablet"){this.$el.find(".our-care-team li:even").css({"margin-left":"0px"})}else{this.$el.find(".our-care-team li:even").removeAttr("style")}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".service-doctors").each(function(a){new lpch.ServiceDoctors({el:this})})});lpch.ServiceIndex=lpch.BaseView.extend({initialize:function(){var a=this;a.initAlphabetNav();a.$(".alphabet-list").bind("touchstart",a.navTouchStartHandler).bind("touchmove",a.navTouchMoveHandler).bind("touchend",a.navTouchEndHandler).mouseover(a.navTouchStartHandler).mouseout(a.navTouchEndHandler);a.$(".alphabet-list").find("li a").bind("click",a,a.navItemClickHandler).bind("touchstart",a.indexListItemTouchStartHandler).bind("touchend",a.indexListItemTouchEndHandler);a.$(".service-list .icon.info").bind("click",a,a.showTooltipOnClick);a.$(".service-item").bind("mouseover",a,a.showTooltipOnHover).bind("mouseout",a,a.closeTooltip).bind("click",function(b){module.view.trackEvent($(this).text())});a.upToTop=a.$(".up-to-top-wrap");a.tooltip=a.$(".tooltip-wrap");a.tooltip.content=a.tooltip.find(".tooltip-content");a.tooltipArrow=a.tooltip.find(".tooltip-arrow"),a.tooltip.find(".close-tooltip").bind("click",a,a.closeTooltip);a.navHeightOnMobile=0;a.navHeightOnTablet=0;a.setInitNavHeight();a.detectNavListStyle($(window).height());$(window).bind("scroll",a,a.windowScrollHandler);a.upToTop.find("a.up-to-top").click(a.scrollToTop);lpch.BaseView.prototype.initialize.call(this)},initAlphabetNav:function(){this.$(".alphabet-list li a").removeClass("empty");this.$(".alphabet-list li a").each(function(){var a=$(this).attr("href");if($(a).length==0){$(this).addClass("empty")}})},navTouchMoveHandler:function(a){a.preventDefault();var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];curTouchX=b.pageX;curTouchY=b.pageY;$(this).find("li").each(function(){var c=$(this);var d=c.offset();if(curTouchY<(d.top+c.outerHeight())&&curTouchY>d.top){c.find("a").trigger("click")}})},navTouchStartHandler:function(b){var a=module.view.getCurrentOrientation();if(a=="desktop"){return}$(this).addClass("on-touch")},navTouchEndHandler:function(b){var a=module.view.getCurrentOrientation();if(a=="desktop"){return}$(this).removeClass("on-touch")},navItemClickHandler:function(d){if($(this).hasClass("empty")){return false}var f=d.data;var b=$(this).attr("href");var c=$(b).offset().top-$("#header-wrapper").height();var a=module.view.getCurrentOrientation();module.view.trackEvent($(this).text());if(a=="desktop"){$("html, body").animate({scrollTop:c},400,"swing")}else{$(window).scrollTop(c)}if($(this).is(":focus")){f.$el.find(".service-list li"+$(this).attr("href")+" ul li:first-child .service-item").focus()}d.preventDefault()},indexListItemTouchStartHandler:function(){$(this).parent().addClass("hover");e.preventDefault()},indexListItemTouchEndHandler:function(){$(this).parent().removeClass("hover");e.preventDefault()},showTooltipOnHover:function(j){var a=module.view.getCurrentOrientation();if(a!="desktop"){return}var g=j.data,h=$(this),b=h.offset(),k=h.attr("title"),m=g.$el.offset().top,l=g.$el.offset().left;g.tooltip.content.html(k);if(k!=""){g.tooltip.stop(true,true).show()}var d=b.left+h.width()+24,f=b.top-g.tooltip.height()/2+h.height()/2,c=g.tooltip.height()/2-g.tooltipArrow.height()/2+1;h.attr("title","");g.tooltip.css("top",f-m);g.tooltip.css("left",d-l);g.tooltipArrow.css("top",c)},showTooltipOnClick:function(l){var b=module.view.getCurrentOrientation();if(b=="desktop"){return}var h=l.data,k=$(this),m=k.parent().find("a").attr("title");h.tooltip.removeAttr("style");h.tooltipArrow.removeAttr("style");h.$(".icon.info").removeClass("active");k.addClass("active");h.tooltip.content.html(m);h.tooltip.stop(true,true).fadeIn(200);var c=k.offset(),o=h.$el.offset().top,j=h.tooltip.width(),n=h.tooltip.offset(),g=h.tooltipArrow.width(),f=0,q=0,d=0,p=0,a=false,r=false;if(b=="smartphone"){f=c.top+29-o;d=c.left-16-n.left;a=g+d>j;r=d<0;if(a){p=Math.abs(j-(g+d))+20}if(r){p=d-10}h.tooltip.css("top",f);h.tooltip.css("left",n.left+p);h.tooltipArrow.css("left",d-p)}if(b=="tablet"){q=c.left+39;f=c.top-h.tooltip.height()/2-o;d=h.tooltip.height()/2-h.tooltipArrow.height()/2+8;h.tooltip.css("left",q);h.tooltip.css("top",f);h.tooltipArrow.css("top",d)}$(document).bind("touchstart",h,h.closeTooltip);h.tooltip.find("*").addBack().bind("touchstart",function(s){s.stopPropagation()})},closeTooltip:function(c){var f=c.data;var b=c.target.className;var a=module.view.getCurrentOrientation();var d=$(this);if(b=="service-item"&&a!="desktop"){return}f.tooltip.removeAttr("style");$(this).removeAttr("style");if(b=="service-item"&&a=="desktop"){d.attr("title",f.tooltip.content.html())}f.tooltip.content.html("");f.tooltip.find(".tooltip-arrow").removeAttr("style");$(".icon.info").removeClass("active");$(document).unbind("touchstart",f.closeTooltip);c.preventDefault()},handleViewportChange:function(b,q){this.detectNavListStyle(q);var c=module.view.getCurrentOrientation();if(this.$(".active").length>0){var j=this,l=j.$(".active");j.tooltip.removeAttr("style").show();j.tooltipArrow.removeAttr("style");var d=l.offset(),n=j.$el.offset().top,k=j.tooltip.width(),m=j.tooltip.offset(),h=j.tooltipArrow.width(),g=0,p=0,f=0,o=0,a=false,r=false;if(c=="smartphone"){g=d.top+29-n;f=d.left-16-m.left;a=h+f>k;r=f<0;if(a){o=Math.abs(k-(h+f))+20}if(r){o=f-10}j.tooltip.css("top",g);j.tooltip.css("left",m.left+o);j.tooltipArrow.css("left",f-o)}else{if(c=="tablet"){p=d.left+39;g=d.top-j.tooltip.height()/2-n;f=j.tooltip.height()/2-j.tooltipArrow.height()/2+8;j.tooltip.css("left",p);j.tooltip.css("top",g);j.tooltipArrow.css("top",f)}}}},handleLayoutChange:function(c){var a=c.get("orientation");var b=$(".index-nav");switch(a){case"desktop":this.$(".icon.active").removeClass("active");this.tooltip.removeAttr("style");this.tooltipArrow.removeClass("style");if(b.find("ul").hasClass("dotted")){b.find("ul").removeClass("dotted").find(".dot a").each(function(){$(this).html($(this).data("text"))})}break;case"tablet":if(this.navHeightOnTablet==0){this.navHeightOnTablet=b.height()}this.$(".up-to-top").removeAttr("style");this.detectNavListStyle();break;default:if(this.navHeightOnMobile==0){this.navHeightOnMobile=b.height()}this.$(".up-to-top").removeAttr("style");this.detectNavListStyle();break}},windowScrollHandler:function(f){var b=module.view.getCurrentOrientation();if(b!="desktop"){return}var h=f.data,c=221,d=$(this).scrollTop(),g=$(this).height(),a=$(document).height();if(d>0){if(d+g>a-c){if(!h.upToTop.hasClass("absolute")){h.upToTop.addClass("absolute")}}else{if(h.upToTop.hasClass("absolute")){h.upToTop.removeClass("absolute")}h.upToTop.find("a").show()}}else{h.upToTop.find("a").hide()}},scrollToTop:function(a){$("html, body").animate({scrollTop:0},300);a.preventDefault()},detectNavListStyle:function(d){var a=module.view.getCurrentOrientation();if(a=="desktop"){return}var b=this.$(".alphabet-list");var c=a=="smartphone"?this.navHeightOnMobile:this.navHeightOnTablet;if(!b.hasClass("dotted")){if(c>d){b.addClass("dotted");b.find(".dot a").each(function(){$(this).data("text",$(this).html());$(this).html("")})}}else{if(c<=d){b.removeClass("dotted");b.find(".dot a").each(function(){$(this).html($(this).data("text"))})}}},setInitNavHeight:function(){var b=this;var a=module.view.getCurrentOrientation();switch(a){case"smartphone":b.navHeightOnMobile=this.$(".index-nav").height();b.navHeightOnTablet=0;break;case"tablet":b.navHeightOnMobile=0;b.navHeightOnTablet=this.$(".index-nav").height();break;default:break}}});$(window).bind("initializeComponents",function(){if($("#service_index").length==0){return}new lpch.ServiceIndex({el:"#service_index"})});lpch.SocialBlogAndArticle=lpch.BaseView.extend({NAME:"Social",wordCounts:{desktop:28,tablet:20,smartphone:12},timer:null,stopBubbling:function(a){a.stopPropagation()},truncate:function(a){var b=this;clearTimeout(this.timer);this.timer=setTimeout(function(){b.truncateTabsContent(b.$el,b.wordCounts[a||module.view.getCurrentOrientation()])},200)},truncateTabsContent:function(b,a){$.each(b.find(".blog-item"),function(g,f){var j=$(f).find(".description"),h=j.find(".content"),d=j.find(".content-truncate"),c=words(h.html());if(c.length>a){truncateText(d,c,a)}})},initialize:function(){var a=this;this.$el.find("a").click(function(b){console.log($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this);this.truncate()},handleLayoutChange:function(a){this.truncate(a.get("orientation"))},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".social-blog-article").each(function(a){new lpch.SocialBlogAndArticle({el:this})})});lpch.SocialLinkSystem=lpch.BaseView.extend({NAME:"Social",initialize:function(){var a=this;this.bindSocialRelatedLocation();$(".social-newletter a, .social-sharing a").click(function(b){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},bindSocialRelatedLocation:function(){var a=$("html, body"),c=$(window),b=0;$(".social-related-locations-wrap").each(function(){var d=$(this),f=d.find(".location-btn"),g=f.find(".active").index()||0;$.each(f,function(k){var l=$(this),j=l.attr("data-rel");$.event.add(this,"click",h(l,j,k))});function h(l,k,j){return function(m){m.preventDefault();f.removeClass("active");l.addClass("active");a.stop().animate({scrollTop:$("#"+k).offset().top-30},500)}}$(".btn-back-to-top").click(function(j){j.preventDefault();a.stop().animate({scrollTop:0},500)});c.scroll(function(n){b=c.scrollTop();var k=$("#location-facebook").offset().top,m=$("#location-youtube").offset().top,j=$("#location-blog").offset().top,l=$("#location-join-us-mobile").offset().top;if(b<=k){f.removeClass("active");f.eq(0).addClass("active")}else{if(b<=m){f.removeClass("active");f.eq(1).addClass("active")}else{if(b<=j){f.removeClass("active");f.eq(2).addClass("active")}else{if(b<=l){f.removeClass("active");f.eq(3).addClass("active")}}}}})})},handleLayoutChange:function(a){},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){new lpch.SocialLinkSystem({el:this})});lpch.Subnav=lpch.BaseView.extend({initialize:function(){var a=this;this.$el.find(".choose-a-section").bind("click touchstart",this.openSubnav);this.$el.find(".list-subnav a").bind("click touchstart",function(d){d.preventDefault();d.stopPropagation();var b=module.view.getCurrentOrientation();if(b=="smartphone"){var c=$(this).html();a.closeSubnav();$(".choose-a-section").html(c).truncate({maxLength:20})}});$(document).bind("click touchstart",function(){var b=module.view.getCurrentOrientation();if(b=="smartphone"){a.closeSubnav()}});lpch.BaseView.prototype.initialize.call(this)},openSubnav:function(a){a.preventDefault();a.stopPropagation();$(".list-subnav").show()},closeSubnav:function(a){$(".list-subnav").hide()},handleLayoutChange:function(b){var a=b.get("orientation");if(a=="smartphone"){$(".list-subnav").hide()}else{$(".list-subnav").show()}},handleViewportChange:function(b,a){}});$(window).bind("initializeComponents",function(){$(".subnav").each(function(a){new lpch.Subnav({el:this})})});lpch.TopicIndex=lpch.BaseView.extend({$treeList:null,$listItems:null,$stayWellP:null,$stayWellImg:null,$listItemLinks:null,$stayWellContainer:null,SLIDE_SPEED:300,EXPANDED:"expanded",HAS_CHILD:"has-child",LAST_CHILD:"last-child",initialize:function(){var c=this,a=module.view.getCurrentOrientation();c.$treeList=this.$el.find(".tree-list");c.$listItems=c.$treeList.find("li");c.$listItemLinks=c.$treeList.find("a");c.$stayWellContainer=c.$el.find(".stay-well");c.$stayWellP=this.$stayWellContainer.find("p");c.$stayWellImg=this.$stayWellContainer.find("img");c.initStayWellContent(a);c.$listItems.removeClass("has-child");for(var b=0;b<c.$listItems.length;b++){c.initItem(c.$listItems.eq(b))}c.$listItemLinks.bind("click",c,c.expandChild);this.$el.find(".topic-footer a").click(function(d){module.view.trackEvent($(this).attr("title")||$(this).text())});lpch.BaseView.prototype.initialize.call(this)},initItem:function(a){var c=a,b=this;if(c.find("ul").length>0){c.addClass(b.HAS_CHILD)}if(c.is(":last-child")){c.addClass(b.LAST_CHILD)}},expandChild:function(a){var b=$(this).parent(),c=a.data;module.view.trackEvent($(this).attr("title")||$(this).clone().children().remove().end().text());if(b.hasClass("has-child")){b.find(">ul").slideToggle(c.SLIDE_SPEED,function(){b.toggleClass(c.EXPANDED);$(this).removeAttr("style");if(!b.hasClass(c.EXPANDED)&&b.find("."+c.EXPANDED).length>0){b.find("."+c.EXPANDED).removeClass(c.EXPANDED)}});return false}},handleLayoutChange:function(b){var a=b.get("orientation");this.initStayWellContent(a)},handleViewportChange:function(b,a){},initStayWellContent:function(a){if(a=="smartphone"){this.$stayWellImg.before(this.$stayWellP)}else{this.$stayWellImg.after(this.$stayWellP)}}});$(window).bind("initializeComponents",function(){$(".topidx-component").each(function(){new lpch.TopicIndex({el:this})})});lpch.YtVideoModel=Backbone.Model.extend({});lpch.YtVideoView=Backbone.View.extend({tagName:"li",initialize:function(){this.template=_.template(module.view.model.templates.get("youtube-video-list").get("html"))},render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});lpch.YtVideosCollection=Backbone.Collection.extend({model:lpch.YtVideoModel,initialize:function(a){if(a!=undefined){this.url+=a.maxResults+"&callback=?"}},parse:function(a){var b=[];_.each(a.feed.entry,function(h,c){var d=h.media$group.media$content[0].duration;d=parseInt(parseInt(d)/60)+":"+(parseInt(d)%60<10?("0"+parseInt(d)%60):parseInt(d)%60);var g=h.media$group.media$description.$t;g=g.length>70?g.slice(0,67)+"...":g;var f=h.media$group.media$title.$t;f=f.length>23?f.slice(0,23)+"...":f;b.push({thumb:h.media$group.media$thumbnail[1].url,url:"//www.youtube.com/embed/"+h.media$group.yt$videoid.$t+"?rel=0&&amp;mode=transparent",title:f,desc:g,duration:d})});return b},url:"https://gdata.youtube.com/feeds/api/users/PackardChildrensHosp/uploads?v=2&alt=json&max-results="});lpch.YtVideosView=lpch.BaseView.extend({initialize:function(a){lpch.BaseView.prototype.initialize.call(this);this.render()},render:function(){this.collection.each(function(a,b){var c=new lpch.YtVideoView({model:a});this.$el.append(c.render().el)},this);return this}});$(window).bind("initializeComponents",function(){var a=new lpch.YtVideosCollection({maxResults:2});a.fetch({success:function(){$(".social-youtube-videos").each(function(b){var c=$(this);window.videoslist=new lpch.YtVideosView({el:$("ul.yt-videos-list").get(0),collection:a});setTimeout(function(d){c.find(".youtube").colorbox({iframe:true,innerWidth:620,innerHeight:404,fixed:true,onOpen:function(){module.view.trackEvent($(this).attr("title"))},onComplete:function(){var f=module.view.getCurrentOrientation();if(f=="smartphone"){$.colorbox.resize({innerWidth:320,innerHeight:200})}}})},10)})},reset:true})});lpch.Module=Backbone.Router.extend({viewClass:lpch.Document,routes:{"*actions":"defaultRoute"},initialize:function(){if(window.module){throw new Error("Only one module instance may be created.");return}window.module=this;module.vent={};_.extend(module.vent,Backbone.Events);this.view=new this.viewClass()},defaultRoute:function(a){},getView:function(){return this.view}});$(window).ready(function(){new lpch.Module()});